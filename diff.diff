diff --git a/.gitignore b/.gitignore
index bf49c8f..71e7dc8 100644
--- a/.gitignore
+++ b/.gitignore
@@ -1,6 +1,7 @@
 ./mgrserver/.DS_Store
-./mgrserver/node_modules/
-./mgrserver//dist/
+*node_modules/
+*dist/
+./mgrserver/dist/
 ./mgrserver/npm-debug.log*
 ./mgrserver/yarn-debug.log*
 ./mgrserver/yarn-error.log*
@@ -12,6 +13,5 @@
 ./mgrserver/*.ntvs*
 ./mgrserver/*.njsproj
 ./mgrserver/*.sln
-conf/
 logs/
 *sso
\ No newline at end of file
diff --git a/flowserver/init.go b/flowserver/init.go
index f1da97a..1cbbf98 100755
--- a/flowserver/init.go
+++ b/flowserver/init.go
@@ -9,7 +9,6 @@ import (
 	"github.com/micro-plat/sso/flowserver/services/image"
 	"github.com/micro-plat/sso/flowserver/services/member"
 	"github.com/micro-plat/sso/flowserver/services/menu"
-	"github.com/micro-plat/sso/flowserver/services/notify"
 	"github.com/micro-plat/sso/flowserver/services/role"
 	"github.com/micro-plat/sso/flowserver/services/subsys"
 	"github.com/micro-plat/sso/flowserver/services/system"
@@ -38,7 +37,6 @@ func (r *SSO) init() {
 		if _, err := c.GetCache(); err != nil {
 			return err
 		}
-		r.Micro("/sso/wxcode/get", member.NewWxcodeHandler(conf.AppID, conf.Secret, conf.WechatTSAddr)) //发送微信验证码
 
 		xmenu.Set(c) //保存全局菜单变量
 		return nil
@@ -51,6 +49,7 @@ func (r *SSO) init() {
 	r.Micro("/subsys/menu", subsys.NewMenuHandler, "*")   //子系统远程登录
 	r.Micro("/subsys/user", subsys.NewUserHandler, "*")   //子系统,获取用户列表
 	r.Micro("/subsys/pwd", subsys.NewPwdHandler, "*")     //子系统,修改密码
+	r.Micro("/subsys/info", subsys.NewInfoHandler, "*")   //子系统,获取系统信息
 
 	r.Micro("/sso/ident", system.NewSystemIdentHandler, "*") //系统信息获取
 
@@ -66,16 +65,16 @@ func (r *SSO) init() {
 
 	r.Micro("/sso/role", role.NewRoleHandler, "/user/role") //角色管理相关接口
 
-	r.Micro("/sso/sys/manage", system.NewSystemHandler, "/sys/index#[post:addsys]") //系统管理相关接口
+	r.Micro("/sso/sys/manage", system.NewSystemHandler, "*") //系统管理相关接口
 
 	r.Micro("/sso/sys/func", function.NewSystemFuncHandler, "/sys/index") //系统功能相关接口
 
 	r.Micro("/sso/img/upload", image.NewImageHandler("./static/static/img", "http://sso.sinopecscsy.com"), "*") //图片上传
 
-	r.Micro("/sso/notify/info", notify.NewNotifyHandler, "*") //获取报警消息列表
+	// r.Micro("/sso/notify/info", notify.NewNotifyHandler, "*") //获取报警消息列表
 
-	r.Micro("/sso/notify/settings", notify.NewNotifySetHandler, "*") //报警消息设置
+	// r.Micro("/sso/notify/settings", notify.NewNotifySetHandler, "*") //报警消息设置
 
-	r.CRON("/sso/notify/send", notify.NewNotifySendHandler, "*") // 发送消息
+	//r.CRON("/sso/notify/send", notify.NewNotifySendHandler, "*") // 发送消息
 
 }
diff --git a/flowserver/install.dev.go b/flowserver/install.dev.go
index 837650c..5dd9e6b 100644
--- a/flowserver/install.dev.go
+++ b/flowserver/install.dev.go
@@ -7,10 +7,7 @@ func (s *SSO) install() {
 	s.Conf.API.SetMainConf(`{"address":":6688"}`)
 	s.Conf.API.SetSubConf("app", `
 			{
-				"appid":"wx9e02ddcc88e13fd4",
-				"secret":"45d25cb71f3bee254c2bc6fc0dc0caf1",
-				"wechat-url":"http://59.151.30.153:9999/wx9e02ddcc88e13fd4/wechat/token/get",
-				"hostname": "http://sso2.100bm.cn"
+				"web_host_name": "http://sso2.100bm.cn"
 			}			
 			`)
 	s.Conf.API.SetSubConf("header", `
@@ -25,7 +22,30 @@ func (s *SSO) install() {
 	s.Conf.API.SetSubConf("auth", `
 		{
 			"jwt": {
-				"exclude": ["/sso/login","/sso/sys/func/enable","/sso/sys/manage/edit","/sso/login/code","/subsys/pwd","/subsys/user","/subsys/login","/subsys/menu","/sso/sys/get","/sso/ident","/qrcode/login/put","/sso/user/bind","/wx/login","/sso/notify/send","/qrcode/login/get","/sso/img/upload","/sso/user/getall","/sso/user/info","/sso/user/save","/sso/user/edit","/sso/user/delete","/sso/role/query","/sso/menu/get","/sso/sys/func/query","/sso/user/changepwd"],
+				"exclude": [
+				"/sso/login",
+				"/sso/sys/func/enable",
+				"/sso/sys/manage/edit",
+				"/sso/login/code",
+				"/subsys/info",
+				"/subsys/pwd",
+				"/subsys/user",
+				"/subsys/login",
+				"/subsys/menu",
+				"/sso/sys/get",
+				"/sso/ident",
+				"/sso/user/bind",
+				"/sso/notify/send",
+				"/sso/img/upload",
+				"/sso/user/getall",
+				"/sso/user/info",
+				"/sso/user/save",
+				"/sso/user/edit",
+				"/sso/user/delete",
+				"/sso/role/query",
+				"/sso/menu/get",
+				"/sso/sys/func/query",
+				"/sso/user/changepwd"],
 				"expireAt": 36000,
 				"mode": "HS512",
 				"name": "__jwt__",
@@ -33,15 +53,7 @@ func (s *SSO) install() {
 			}
 		}
 		`)
-	//"source":"header",
-	s.Conf.WS.SetSubConf("app", `
-	{
-		"appid":"wx9e02ddcc88e13fd4",
-		"secret":"45d25cb71f3bee254c2bc6fc0dc0caf1",
-		"wechat-url":"http://59.151.30.153:9999/wx9e02ddcc88e13fd4/wechat/token/get",
-		"hostname": "http://sso2.100bm.cn"
-	}			
-			`)
+
 	s.Conf.Plat.SetVarConf("db", "db", `{			
 			"provider":"ora",
 			"connString":"sso/123456@orcl136",
@@ -63,37 +75,5 @@ func (s *SSO) install() {
 			"pool_size":10
 	}		
 		`)
-	s.Conf.CRON.SetSubConf("app", `
-			{
-				"appid":"wx9e02ddcc88e13fd4",
-				"secret":"45d25cb71f3bee254c2bc6fc0dc0caf1",
-				"wechat-url":"http://59.151.30.153:9999/wx9e02ddcc88e13fd4/wechat/token/get",
-				"hostname": "http://sso.100bm.cn"
-			}			
-			`)
-	s.Conf.WS.SetSubConf("auth", `
-			{
-				"jwt": {
-					"exclude": ["/sso/login","/subsys/login","/subsys/menu","/sso/login/code","/sso/wxcode/get","/sso/sys/get","/qrcode/login","/qrcode/login/put","/sso/user/bind","/wx/login","/sso/notify/send","/qrcode/login/get"],
-					"source":"header",
-					"expireAt": 36000,
-					"mode": "HS512",
-					"name": "__jwt__",
-					"secret": "12345678"
-				}
-			}
-			`)
-	s.Conf.CRON.SetSubConf("auth", `
-			{
-				"jwt": {
-					"exclude": ["/sso/notify/send"],
-					"source":"header",
-					"expireAt": 36000,
-					"mode": "HS512",
-					"name": "__jwt__",
-					"secret": "12345678"
-				}
-			}
-			`)
-	s.Conf.CRON.SetSubConf("task", `{"tasks":[{"cron":"@every 30s","service":"/sso/notify/send"}]}`)
+
 }
diff --git a/flowserver/install.prod.go b/flowserver/install.prod.go
index c2f6393..156ba22 100644
--- a/flowserver/install.prod.go
+++ b/flowserver/install.prod.go
@@ -17,10 +17,7 @@ func (s *SSO) install() {
 	s.Conf.API.SetMainConf(`{"address":":6688"}`)
 	s.Conf.API.SetSubConf("app", `
 			{
-				"appid":"wx9e02ddcc88e13fd4",
-				"secret":"45d25cb71f3bee254c2bc6fc0dc0caf1",
-				"wechat-url":"http://59.151.30.153:9999/wx9e02ddcc88e13fd4/wechat/token/get",
-				"hostname": "http://sso2.100bm.cn"
+				"web_host_name": "#web_host_name"
 			}			
 			`)
 	s.Conf.API.SetSubConf("header", `
@@ -35,7 +32,31 @@ func (s *SSO) install() {
 	s.Conf.API.SetSubConf("auth", `
 		{
 			"jwt": {
-				"exclude": ["/sso/login","/sso/sys/func/enable","/sso/sys/manage/edit","/sso/login/code","/subsys/login","/subsys/menu","/sso/wxcode/get","/sso/sys/get","/sso/ident","/qrcode/login/put","/sso/user/bind","/wx/login","/sso/notify/send","/qrcode/login/get","/sso/img/upload","/sso/user/getall","/sso/user/info","/sso/user/save","/sso/user/edit","/sso/user/delete","/sso/role/query","/sso/menu/get","/sso/sys/func/query","/sso/user/changepwd"],
+				"exclude": [
+					"/sso/login",
+					"/sso/sys/func/enable",
+					"/sso/sys/manage/edit",
+					"/sso/login/code",
+					"/subsys/info",
+					"/subsys/pwd",
+					"/subsys/user",
+					"/subsys/login",
+					"/subsys/menu",
+					"/sso/sys/get",
+					"/sso/ident",
+					"/sso/user/bind",
+					"/sso/notify/send",
+					"/sso/img/upload",
+					"/sso/user/getall",
+					"/sso/user/info",
+					"/sso/user/save",
+					"/sso/user/edit",
+					"/sso/user/delete",
+					"/sso/role/query",
+					"/sso/menu/get",
+					"/sso/sys/func/query",
+					"/sso/user/changepwd"
+					],
 				"expireAt": 36000,
 				"mode": "HS512",
 				"name": "__jwt__",
@@ -43,15 +64,7 @@ func (s *SSO) install() {
 			}
 		}
 		`)
-	//"source":"header",
-	s.Conf.WS.SetSubConf("app", `
-	{
-		"appid":"wx9e02ddcc88e13fd4",
-		"secret":"45d25cb71f3bee254c2bc6fc0dc0caf1",
-		"wechat-url":"http://59.151.30.153:9999/wx9e02ddcc88e13fd4/wechat/token/get",
-		"hostname": "http://sso2.100bm.cn"
-	}			
-			`)
+
 	s.Conf.Plat.SetVarConf("db", "db", `{			
 			"provider":"ora",
 			"connString":"#db_string",
@@ -73,41 +86,4 @@ func (s *SSO) install() {
 			"pool_size":10
 	}		
 		`)
-	// "192.168.0.111:6379",
-	// 			"192.168.0.112:6379",
-	// 			"192.168.0.113:6379",
-	// 			"192.168.0.114:6379",
-	// 			"192.168.0.115:6379",
-	// 			"192.168.0.116:6379"
-	s.Conf.CRON.SetSubConf("app", `
-			{
-				"appid":"wx9e02ddcc88e13fd4",
-				"secret":"45d25cb71f3bee254c2bc6fc0dc0caf1",
-				"wechat-url":"http://59.151.30.153:9999/wx9e02ddcc88e13fd4/wechat/token/get",
-				"hostname": "http://sso.100bm.cn"
-			}			
-			`)
-	s.Conf.WS.SetSubConf("auth", `
-			{
-				"jwt": {
-					"exclude": ["/sso/login","/subsys/login","/subsys/menu","/sso/login/code","/sso/wxcode/get","/sso/sys/get","/qrcode/login","/qrcode/login/put","/sso/user/bind","/wx/login","/sso/notify/send","/qrcode/login/get"],
-					"expireAt": 36000,
-					"mode": "HS512",
-					"name": "__jwt__",
-					"secret": "12345678"
-				}
-			}
-			`)
-	s.Conf.CRON.SetSubConf("auth", `
-			{
-				"jwt": {
-					"exclude": ["/sso/notify/send"],
-					"expireAt": 36000,
-					"mode": "HS512",
-					"name": "__jwt__",
-					"secret": "12345678"
-				}
-			}
-			`)
-	s.Conf.CRON.SetSubConf("task", `{"tasks":[{"cron":"@every 30s","service":"/sso/notify/send"}]}`)
 }
diff --git a/flowserver/main.go b/flowserver/main.go
index 80f6025..af00564 100755
--- a/flowserver/main.go
+++ b/flowserver/main.go
@@ -12,7 +12,7 @@ func main() {
 		hydra.NewApp(
 			hydra.WithPlatName("sso"),
 			hydra.WithSystemName("sso"),
-			hydra.WithServerTypes("api-cron"),
+			hydra.WithServerTypes("api"),
 			hydra.WithDebug()),
 	}
 
diff --git a/flowserver/modules/app/conf.go b/flowserver/modules/app/conf.go
index 9476778..6bd4fe4 100644
--- a/flowserver/modules/app/conf.go
+++ b/flowserver/modules/app/conf.go
@@ -3,19 +3,13 @@ package app
 import (
 	"fmt"
 
-	"strings"
-
 	"github.com/asaskevich/govalidator"
 	"github.com/micro-plat/hydra/component"
-	"github.com/micro-plat/wechat/mp"
 )
 
 //Conf 应用程序配置
 type Conf struct {
-	AppID        string `json:"appid" valid:"ascii,required"`
-	Secret       string `json:"secret" valid:"ascii,required"`
-	WechatTSAddr string `json:"wechat-url" valid:"required"`
-	HostName     string `json:"hostname" valid:"required"`
+	WebHostName string `json:"web_host_name" valid:"required"`
 }
 
 //Valid 验证配置参数是否合法
@@ -26,19 +20,9 @@ func (c Conf) Valid() error {
 	return nil
 }
 
-//获取绑定url
-func (c *Conf) GetBindUrl() string {
-	return strings.Join([]string{c.HostName, "/user/bind?guid=%s"}, "")
-}
-
-//获取二维码登录url
-func (c *Conf) GetQRLoginCheckURL() string {
-	return strings.Join([]string{c.HostName, "/member/check"}, "")
-}
-
-//获取微信登录url
-func (c *Conf) GetWXLoginURL() string {
-	return strings.Join([]string{c.HostName, "/member/login"}, "")
+//GetWebHostName 获取前端域名,上传图片使用
+func (c *Conf) GetWebHostName() string {
+	return c.WebHostName
 }
 
 //SaveConf 保存当前应用程序配置
@@ -50,15 +34,3 @@ func SaveConf(c component.IContainer, m *Conf) {
 func GetConf(c component.IContainer) *Conf {
 	return c.Get("__AppConf__").(*Conf)
 }
-
-//GetWeChatContext 获取微信操作context
-func GetWeChatContext(ct component.IContainer) *mp.Context {
-	c := GetConf(ct)
-	if mp, ok := ct.Get("__wechat_context_").(*mp.Context); ok {
-		return mp
-	}
-	tk := mp.NewDefaultAccessTokenByURL(c.AppID, c.Secret, c.WechatTSAddr)
-	wectx := mp.NewContext(tk)
-	ct.Set("__wechat_context_", wectx)
-	return wectx
-}
diff --git a/flowserver/modules/const/sql/member.go b/flowserver/modules/const/sql/member.go
index b68878e..2ddf23a 100755
--- a/flowserver/modules/const/sql/member.go
+++ b/flowserver/modules/const/sql/member.go
@@ -1,7 +1,7 @@
 package sql
 
 //QueryUserByLogin 获取用户登录信息
-const QueryUserByLogin = `select user_id,user_name,password,status,wx_openid from sso_user_info where user_name=@user_name and rownum<=1`
+const QueryUserByLogin = `select user_id,user_name,password,status,wx_openid,ext_params from sso_user_info where user_name=@user_name and rownum<=1`
 
 //QueryUserInfoByUID 查询用户信息
 const QueryUserInfoByUID = `select u.user_id,u.user_name,u.mobile,u.wx_openid,u.status,u.login_url from sso_user_info u
@@ -19,3 +19,19 @@ inner join sso_role_info i on i.role_id=r.role_id where r.user_id=@user_id and s
 const QuerySysAuth = `select t.* from sso_user_role t 
 inner join sso_user_info i on i.user_id=t.user_id 
 where t.sys_id=@sys_id and t.user_id=@user_id`
+
+//QueryUserByUserName 根据用户名获取用户信息
+const QueryUserByUserName = `
+	select 
+		user_id,
+		user_name,
+		status,
+		wx_openid,
+		ext_params 
+	from 
+		sso_user_info
+	where 
+		user_name=@user_name 
+	and 
+		rownum<=1
+`
diff --git a/flowserver/modules/const/sql/subsystem.go b/flowserver/modules/const/sql/subsystem.go
index 42f9c21..69c1426 100755
--- a/flowserver/modules/const/sql/subsystem.go
+++ b/flowserver/modules/const/sql/subsystem.go
@@ -8,31 +8,65 @@ const QuerySubSystemPageList = `
 select 
 t2.* 
 from 
-(select t.*,rownum as rn from sso_system_info t where t.name like '%'||@name||'%' &t.enable and rownum < @pi * @ps) t2 
+(select t.*,rownum as rn from sso_system_info t 
+  where t.name like '%'||@name||'%' &t.enable and rownum <= @pi * @ps) t2 
 where 
 t2.rn > (@pi - 1) * @ps`
 
 const DeleteSubSystemById = `delete from sso_system_info where id = @id`
 
-const AddSubSystem = `insert into sso_system_info(id,name,index_url,login_timeout,logo,theme,layout,ident,wechat_status,login_url) 
-values(seq_system_info_id.nextval,@name,@addr,@time_out,@logo,@theme,@style,@ident,@wechat_status,@login_url)`
+const AddSubSystem = `
+insert into 
+  sso_system_info
+  (
+    id,
+    name,
+    index_url,
+    login_timeout,
+    logo,
+    theme,
+    layout,
+    ident,
+    wechat_status,
+    login_url,
+    secret
+  ) 
+values
+  (
+    seq_system_info_id.nextval,
+    @name,
+    @addr,
+    @time_out,
+    @logo,
+    @theme,
+    @style,
+    @ident,
+    @wechat_status,
+    @login_url,
+    @secret
+  )`
 
 const UpdateEnable = `update sso_system_info t
 set  t.enable = @enable
 where t.id=@id
 `
 
-const UpdateEdit = `update sso_system_info t
-set  t.enable = @enable,
-t.index_url=@index_url,
-t.login_timeout=@login_timeout,
-t.logo=@logo,
-t.name=@name,
-t.theme=@theme,
-t.layout=@layout,
-t.ident=@ident,
-t.wechat_status=@wechat_status 
-where t.id=@id
+const UpdateEdit = `
+update 
+  sso_system_info t
+set  
+  t.enable = @enable,
+  t.index_url = @index_url,
+  t.login_timeout = @login_timeout,
+  t.logo = @logo,
+  t.name = @name,
+  t.theme = @theme,
+  t.layout = @layout,
+  t.ident = @ident,
+  t.wechat_status = @wechat_status,
+  t.secret = @secret 
+where 
+  t.id = @id
 `
 const GetUsers = `
 select
diff --git a/flowserver/modules/const/sql/user.go b/flowserver/modules/const/sql/user.go
index fa5d796..de37acd 100755
--- a/flowserver/modules/const/sql/user.go
+++ b/flowserver/modules/const/sql/user.go
@@ -10,7 +10,8 @@ from (select L.*
 							 decode(t.status,0,'正常',1,'锁定',2,'禁用') status_label,
 							 t.mobile,
 							 to_char(t.create_time, 'yyyy/mm/dd hh24:mi') create_time,
-							 t.email
+							 t.email,
+							 t.ext_params
 						from sso_user_info t
 						left join sso_user_role r on r.user_id = t.user_id
 						where 1=1 
@@ -20,7 +21,8 @@ from (select L.*
                                   t.user_name,
                                   t.status,
                                   t.mobile,
-                                  t.email,
+								  t.email,
+								  t.ext_params,
                                   t.create_time
 					   order by t.user_id) R
 			   where rownum <= @pi * @ps) L
@@ -84,9 +86,17 @@ const DeleteUser = `delete from sso_user_info t where t.user_id = @user_id`
 const QueryUserInfo = `select t.user_id,t.user_name,t.mobile,t.email from sso_user_info t where t.user_id=@user_id`
 
 //EditUserInfo 编辑用户信息
-const EditUserInfo = `update sso_user_info t
-set t.status = @status, t.user_name = @user_name, t.mobile = @mobile, t.email = @email
-where t.user_id = @user_id
+const EditUserInfo = `
+update 
+	sso_user_info t
+set 
+	t.status = @status, 
+	t.user_name = @user_name, 
+	t.mobile = @mobile,
+	t.email = @email,
+	t.ext_params = @ext_params
+where 
+	t.user_id = @user_id
 `
 
 //DelUserRole 删除用户角色
@@ -99,10 +109,12 @@ const EditUserRole = `update sso_user_role t set t.role_id = @role_id where t.us
 const GetNewUserID = `select seq_user_info_id.nextval from dual`
 
 //AddUserInfo 添加用户信息
-const AddUserInfo = `insert into sso_user_info t
-(user_id, user_name, status, password, mobile, email)
+const AddUserInfo = `
+insert 
+	into sso_user_info 
+	(user_id, user_name, status, password, mobile, email, ext_params)
 values
-(@user_id, @user_name, @status, @password, @mobile, @email)
+	(@user_id, @user_name, @status, @password, @mobile, @email, @ext_params)
 `
 
 //AddUserRole 添加用户角色
@@ -120,9 +132,13 @@ const QueryUserPswd = `select count(1)
  where t.user_id=@user_id
  &password
 `
-const EditInfo = `update sso_user_info t
-set  t.mobile = @tel, t.email = @email
-where t.user_name = @username`
+const EditInfo = `
+update 
+	sso_user_info t
+set  
+	t.mobile = @tel, t.email = @email, t.ext_params = @ext_params
+where 
+	t.user_name = @username`
 
 const QueryOldPwd = `select t.password,t.changepwd_times from sso_user_info t where t.user_id=@user_id`
 
diff --git a/flowserver/modules/member/db.member.go b/flowserver/modules/member/db.member.go
index e805cf0..aac803c 100755
--- a/flowserver/modules/member/db.member.go
+++ b/flowserver/modules/member/db.member.go
@@ -12,6 +12,7 @@ import (
 type IDBMember interface {
 	QueryByID(uid int64) (db.QueryRow, error)
 	Query(u string, p string, ident string) (s *MemberState, err error)
+	QueryByUserName(u string, ident string) (info db.QueryRow, err error)
 	GetUserInfo(u string) (db.QueryRow, error)
 	QueryByOpenID(string) (db.QueryRow, error)
 	QueryAuth(sysID, userID int64) (data db.QueryRows, err error)
@@ -118,6 +119,34 @@ func (l *DBMember) Query(u string, p string, ident string) (s *MemberState, err
 	s.IndexURL = roles.Get(0).GetString("index_url")
 	s.LoginURL = roles.Get(0).GetString("login_url")
 	s.SystemID = roles.Get(0).GetInt("sys_id")
+	s.ExtParams = data.Get(0).GetString("ext_params")
 	s.SysIdent = ident
 	return s, err
 }
+
+func (l *DBMember) QueryByUserName(u string, ident string) (info db.QueryRow, err error) {
+	//根据用户名，查询用户信息
+	db := l.c.GetRegularDB()
+	data, _, _, err := db.Query(sql.QueryUserByUserName, map[string]interface{}{
+		"user_name": u,
+	})
+	if err != nil {
+		return nil, context.NewError(context.ERR_SERVICE_UNAVAILABLE, "暂时无法登录系统")
+	}
+	if data.IsEmpty() {
+		return nil, context.NewError(context.ERR_FORBIDDEN, "用户不存在")
+	}
+	//查询用户所在系统的登录地址及角色编号
+	roles, _, _, err := db.Query(sql.QueryUserRole, map[string]interface{}{
+		"user_id": data.Get(0).GetInt64("user_id", -1),
+		"ident":   ident,
+	})
+	if roles.IsEmpty() {
+		return nil, context.NewError(context.ERR_UNSUPPORTED_MEDIA_TYPE, "不允许登录系统")
+	}
+
+	userData := data.Get(0)
+	userData["ident"] = ident
+
+	return userData, err
+}
diff --git a/flowserver/modules/member/member.go b/flowserver/modules/member/member.go
index b7b2677..c62df35 100644
--- a/flowserver/modules/member/member.go
+++ b/flowserver/modules/member/member.go
@@ -20,6 +20,7 @@ const (
 //IMember 用户登录
 type IMember interface {
 	Login(u string, p string, ident string) (*LoginState, error)
+	QueryUserInfo(u string, ident string) (info db.QueryRow, err error)
 	Query(uid int64) (db.QueryRow, error)
 	LoginByOpenID(string, string) (*LoginState, error)
 	SendCheckMail(from string, password string, host string, port string, to string, link string) error
@@ -96,18 +97,34 @@ func (m *Member) Login(u string, p string, ident string) (s *LoginState, err err
 	}
 	//检查用户是否已锁定
 	if ls.Status == UserLock {
-		return nil, context.NewError(context.ERR_LOCKED, "用户被锁定暂时无法登录")
+		return nil, context.NewError(context.ERR_LOCKED, "用户被锁定暂时无法登录(423)")
 	}
 	//检查用户是否已禁用
 	if ls.Status == UserDisable {
-		return nil, context.NewError(context.ERR_FORBIDDEN, "用户被禁用请联系管理员")
+		return nil, context.NewError(context.ERR_LENGTH_REQUIRED, "用户被禁用请联系管理员(411)")
 	}
 	//检查密码是否有效，无效时累加登录失败次数
 	if strings.ToLower(ls.Password) != strings.ToLower(p) {
 		v, _ := m.cache.SetLoginFail(u)
-		return nil, context.NewError(context.ERR_FORBIDDEN, fmt.Sprintf("用户名或密码错误:%d", v))
+		return nil, context.NewError(context.ERR_PRECONDITION_FAILED, fmt.Sprintf("用户名或密码错误(412):%d", v))
 	}
 	//设置登录成功
 	err = m.cache.SetLoginSuccess(u)
 	return (*LoginState)(ls), err
 }
+
+func (m *Member) QueryUserInfo(u string, ident string) (ls db.QueryRow, err error) {
+
+	if ls, err = m.db.QueryByUserName(u, ident); err != nil {
+		return nil, err
+	}
+	//检查用户是否已锁定
+	if ls.GetInt("status") == UserLock {
+		return nil, context.NewError(context.ERR_LOCKED, "用户被锁定暂时无法登录")
+	}
+	//检查用户是否已禁用
+	if ls.GetInt("status") == UserDisable {
+		return nil, context.NewError(context.ERR_FORBIDDEN, "用户被禁用请联系管理员")
+	}
+	return ls, err
+}
diff --git a/flowserver/modules/member/status.go b/flowserver/modules/member/status.go
index 0457b8a..be5f8a1 100644
--- a/flowserver/modules/member/status.go
+++ b/flowserver/modules/member/status.go
@@ -25,6 +25,7 @@ type MemberState struct {
 	Code           string `json:"code"`
 	ProfilePercent int    `json:"profile_percent"`
 	LoginTimeout   int    `json:"login_timeout" m2s:"login_timeout"`
+	ExtParams      string `json:"ext_params" m2s:"ext_params"`
 }
 
 //LoginState 用户登录状态
diff --git a/flowserver/modules/member/wxcode.go b/flowserver/modules/member/wxcode.go
deleted file mode 100755
index 62598bd..0000000
--- a/flowserver/modules/member/wxcode.go
+++ /dev/null
@@ -1,112 +0,0 @@
-package member
-
-import (
-	"fmt"
-	"math/rand"
-	"time"
-
-	"github.com/micro-plat/hydra/component"
-	"github.com/micro-plat/hydra/context"
-	"github.com/micro-plat/lib4go/transform"
-	"github.com/micro-plat/sso/flowserver/modules/app"
-	"github.com/micro-plat/sso/flowserver/modules/system"
-
-	"github.com/micro-plat/wechat/mp/message/template"
-)
-
-type IWxcode interface {
-	Check(un string, code string) error
-	GetWXCode() string
-	Send(un string, sysIdent string, appid string, secret string, serverAddr string, code string) error
-}
-
-type Wxcode struct {
-	c         component.IContainer
-	db        IDBMember
-	sys       system.ISystem
-	cacheTime int
-}
-
-const (
-	wxCodeCacheFormat = "sso:login:wx-valid-code:{@userName}"
-)
-
-func NewWxcode(c component.IContainer) *Wxcode {
-	return &Wxcode{
-		c:         c,
-		db:        NewDBMember(c),
-		sys:       system.NewSystem(c),
-		cacheTime: 3600 * 24,
-	}
-}
-
-//GetWXCode 发送微信验证码
-func (l *Wxcode) GetWXCode() string {
-	rand.Seed(time.Now().UnixNano())
-	var num string
-	for i := 0; i < 4; i++ {
-		x := rand.Intn(10)
-		num = fmt.Sprintf("%s%d", num, x)
-	}
-	return num
-}
-
-//Check 验证微信验证码
-func (l *Wxcode) Check(un string, code string) error {
-	key := transform.Translate(wxCodeCacheFormat, "userName", un)
-	cache := l.c.GetRegularCache()
-	ccode, err := cache.Get(key)
-	if err != nil {
-		return err
-	}
-	defer cache.Delete(key)
-	if ccode != code {
-		return context.NewError(901, fmt.Errorf("微信验证码错误"))
-	}
-	return nil
-}
-
-//Send 发送微信验证码
-func (l *Wxcode) Send(un string, sysIdent string, appid string, secret string, serverAddr string, code string) error {
-	row, err := l.db.GetUserInfo(un)
-	if err != nil || row.GetString("wx_openid") == "" {
-		return context.NewError(406, err)
-	}
-
-	sys, err := l.sys.Get(sysIdent)
-	if err != nil {
-		return context.NewError(406, err)
-	}
-
-	ctx := app.GetWeChatContext(l.c)
-	if _, err := template.Send(ctx, &template.TemplateMessage2{
-		ToUser:     row.GetString("wx_openid"),
-		TemplateId: "_DL41WrU7r6uNYyjD45c5B11ECkOAhwdDG8qqQxbvGs",
-		Data: map[string]interface{}{
-			"first": map[string]string{
-				"value": fmt.Sprintf("您正在登录[%s]", sys.GetString("name")),
-			},
-			"keyword1": map[string]string{
-				"value": code,
-				"color": "#43CD80",
-			},
-			"keyword2": map[string]string{
-				"value": "5分钟",
-			},
-			"keyword3": map[string]string{
-				"value": time.Now().Format("2006/01/02 15:04:05"),
-			},
-			"remark": map[string]string{
-				"value": "若非本人操作请注意账户安全",
-			},
-		},
-	}); err != nil {
-		return fmt.Errorf("发送验证码失败:%v(%s)%v", err, row.GetString("wx_openid"), serverAddr)
-	}
-	key := transform.Translate(wxCodeCacheFormat, "userName", un)
-	cache := l.c.GetRegularCache()
-	if err := cache.Set(key, code, l.cacheTime); err != nil {
-		return fmt.Errorf("保存到缓存失败:%v", err)
-	}
-	return nil
-}
diff --git a/flowserver/modules/notify/notify.go b/flowserver/modules/notify/notify.go
index a8ba930..28cc00e 100644
--- a/flowserver/modules/notify/notify.go
+++ b/flowserver/modules/notify/notify.go
@@ -1,14 +1,13 @@
 package notify
 
 import (
-	"fmt"
 	"github.com/micro-plat/hydra/component"
 	"github.com/micro-plat/lib4go/db"
 )
 
 type INotify interface {
-	Query(input *UserNotifyInput) (data db.QueryRows,count int,err error)
-	Get(uid ,sysID,pi,ps int64) (data db.QueryRows,count int,err error)
+	Query(input *UserNotifyInput) (data db.QueryRows, count int, err error)
+	Get(uid, sysID, pi, ps int64) (data db.QueryRows, count int, err error)
 	AddSettings(input *SettingsInput) (err error)
 	DeleteSettings(id, uid int64) (err error)
 	Delete(id, uid int64) (err error)
@@ -21,7 +20,6 @@ type Notify struct {
 	c     component.IContainer
 	cache ICacheNotify
 	db    IDbNotify
-	wxMsg IWxmsg
 }
 
 func NewNotify(c component.IContainer) *Notify {
@@ -29,11 +27,11 @@ func NewNotify(c component.IContainer) *Notify {
 		c:     c,
 		cache: NewCacheNotify(c),
 		db:    NewDbNotify(c),
-		wxMsg:  NewWxmsg(c),
 	}
 }
+
 //获取消息列表
-func (n *Notify) Query(input *UserNotifyInput) (data db.QueryRows,count int,err error) {
+func (n *Notify) Query(input *UserNotifyInput) (data db.QueryRows, count int, err error) {
 	//从缓存获取数据
 	data, count, err = n.cache.QueryNotify(input.Title, input.UserID, input.SysID, input.Pi, input.Ps)
 	if err != nil || data == nil {
@@ -46,53 +44,58 @@ func (n *Notify) Query(input *UserNotifyInput) (data db.QueryRows,count int,err
 			return nil, 0, err
 		}
 	}
-	
+
 	return
 }
 
 //获取消息设置
-func(n *Notify) Get(userID, sysID, pi, ps int64) (data db.QueryRows, count int, err error){
+func (n *Notify) Get(userID, sysID, pi, ps int64) (data db.QueryRows, count int, err error) {
 	data, count, err = n.cache.QueryNotifySet(userID, sysID, pi, ps)
 	if err != nil || data == nil {
 		data, count, err = n.db.Get(userID, sysID, pi, ps)
-		if err != nil || data == nil{
+		if err != nil || data == nil {
 			return nil, 0, err
 		}
 		if err = n.cache.SaveNotifySet(userID, sysID, pi, ps, data, count); err != nil {
 			return nil, 0, err
 		}
 	}
-	return 
+	return
 }
+
 //添加配置
-func (n *Notify) AddSettings(input *SettingsInput) (err error){
+func (n *Notify) AddSettings(input *SettingsInput) (err error) {
 	err = n.db.AddSettings(input)
 	if err != nil {
 		return err
 	}
 	return n.cache.FreshNotifySet()
 }
+
 //删除配置
 func (n *Notify) DeleteSettings(id, uid int64) (err error) {
-	if err = n.db.DeleteSettings(id,uid); err != nil {
+	if err = n.db.DeleteSettings(id, uid); err != nil {
 		return err
-	} 
-	return n.cache.FreshNotifySet();
+	}
+	return n.cache.FreshNotifySet()
 }
+
 //删除消息
-func (n *Notify) Delete(id, uid int64) (err error){
+func (n *Notify) Delete(id, uid int64) (err error) {
 	if err = n.db.Delete(id, uid); err != nil {
 		return err
-	} 
-	return n.cache.FreshNotify();
+	}
+	return n.cache.FreshNotify()
 }
+
 //编辑配置
 func (n *Notify) EditSettings(input *EditSettingsInput) (err error) {
 	if err = n.db.EditSettings(input); err != nil {
 		return err
 	}
-	return n.cache.FreshNotifySet();
+	return n.cache.FreshNotifySet()
 }
+
 //接收系统消息
 func (n *Notify) Add(input *InsertNotifyInput) (err error) {
 	if err = n.db.Add(input); err != nil {
@@ -101,26 +104,27 @@ func (n *Notify) Add(input *InsertNotifyInput) (err error) {
 	//刷新用户消息缓存列表
 	return n.cache.FreshNotify()
 }
+
 //发送消息给用户
-func (n *Notify) SendMsg() (err error){
-	data , err := n.db.QueryToUserNotify()
-	if err != nil {
-		return err
-	}
-	//循环发送消息
-	for _,v := range data {
-		//使用微信发送模板消息，发送失败则进入下轮继续发送
-		err = n.wxMsg.Send(&TpMsg{
-			Openid: 	v.GetString("wx_openid"),
-			Name: 		v.GetString("name"),
-			Content: 	v.GetString("content"),
-			Time: 		v.GetString("create_times"),
-		})
-		//发送成功，修改状态
-		if err == nil {
-			err = n.db.ChangeStatus(v.GetString("id"))
-			fmt.Println(err)
-		}
-	}
-	return n.cache.FreshNotify()
-}
\ No newline at end of file
+// func (n *Notify) SendMsg() (err error) {
+// 	data, err := n.db.QueryToUserNotify()
+// 	if err != nil {
+// 		return err
+// 	}
+// 	//循环发送消息
+// 	for _, v := range data {
+// 		//使用微信发送模板消息，发送失败则进入下轮继续发送
+// 		err = n.wxMsg.Send(&TpMsg{
+// 			Openid:  v.GetString("wx_openid"),
+// 			Name:    v.GetString("name"),
+// 			Content: v.GetString("content"),
+// 			Time:    v.GetString("create_times"),
+// 		})
+// 		//发送成功，修改状态
+// 		if err == nil {
+// 			err = n.db.ChangeStatus(v.GetString("id"))
+// 			fmt.Println(err)
+// 		}
+// 	}
+// 	return n.cache.FreshNotify()
+// }
diff --git a/flowserver/modules/notify/wxmsg.go b/flowserver/modules/notify/wxmsg.go
deleted file mode 100644
index bde284b..0000000
--- a/flowserver/modules/notify/wxmsg.go
+++ /dev/null
@@ -1,56 +0,0 @@
-package notify
-
-import (
-	"fmt"
-
-	"github.com/micro-plat/hydra/component"
-	"github.com/micro-plat/sso/flowserver/modules/app"
-	"github.com/micro-plat/sso/flowserver/modules/system"
-	"github.com/micro-plat/wechat/mp/message/template"
-)
-
-type IWxmsg interface {
-	Send(msg *TpMsg) error
-}
-
-type Wxmsg struct {
-	c   component.IContainer
-	db  IDbNotify
-	sys system.ISystem
-}
-
-func NewWxmsg(c component.IContainer) *Wxmsg {
-	return &Wxmsg{
-		c:   c,
-		db:  NewDbNotify(c),
-		sys: system.NewSystem(c),
-	}
-}
-
-//Send 发送微信模板消息
-func (l *Wxmsg) Send(msg *TpMsg) error {
-
-	ctx := app.GetWeChatContext(l.c)
-	if _, err := template.Send(ctx, &template.TemplateMessage2{
-		ToUser:     msg.Openid,
-		TemplateId: "_UC3m5HLVglHeGLkrzP0mU6d_zoaThPC7pn0WVoMEP0",
-		Data: map[string]interface{}{
-			"first": map[string]string{
-				"value": fmt.Sprintf("[%s]监控告警通知", msg.Name),
-			},
-			"content": map[string]string{
-				"value": msg.Content,
-				"color": "#FF0000",
-			},
-			"occurtime": map[string]string{
-				"value": msg.Time,
-			},
-			"remark": map[string]string{
-				"value": "请尽快处理",
-			},
-		},
-	}); err != nil {
-		return fmt.Errorf("发送模板消息失败:%v(openid: %s)", err, msg.Openid)
-	}
-	return nil
-}
diff --git a/flowserver/modules/system/db.system.go b/flowserver/modules/system/db.system.go
index 47b5edf..c7fa55e 100755
--- a/flowserver/modules/system/db.system.go
+++ b/flowserver/modules/system/db.system.go
@@ -2,7 +2,6 @@ package system
 
 import (
 	"fmt"
-	"strings"
 
 	"github.com/micro-plat/hydra/component"
 	"github.com/micro-plat/lib4go/db"
@@ -32,6 +31,7 @@ type SystemEditInput struct {
 	Layout        string `form:"layout" json:"layout"`
 	Ident         string `form:"ident" json:"ident"`
 	Wechat_status string `form:"wechat_status" json:"wechat_status" valid:"required"`
+	Secret        string `form:"secret" json:"secret" valid:"required"`
 }
 
 type AddSystemInput struct {
@@ -43,6 +43,7 @@ type AddSystemInput struct {
 	Theme         string `form:"theme" json:"theme"`
 	Ident         string `form:"ident" json:"ident" vaild:"required"`
 	Wechat_status string `form:"wechat_status" json:"wechat_status" valid:"required"`
+	Secret        string `form:"secret" json:"secret" valid:"required"`
 }
 
 type DbSystem struct {
@@ -119,7 +120,8 @@ func (u *DbSystem) Add(input *AddSystemInput) (err error) {
 		"theme":         input.Theme,
 		"ident":         input.Ident,
 		"wechat_status": input.Wechat_status,
-		"login_url":     "http://" + strings.Split(strings.Split(input.Addr, "//")[1], "/")[0] + "/member/login",
+		"login_url":     "http://member/login",
+		"secret":        input.Secret,
 	}
 	_, q, a, err := db.Execute(sql.AddSubSystem, params)
 	if err != nil {
@@ -153,6 +155,7 @@ func (u *DbSystem) Edit(input *SystemEditInput) (err error) {
 		"theme":         input.Theme,
 		"ident":         input.Ident,
 		"wechat_status": input.Wechat_status,
+		"secret":        input.Secret,
 	}
 	_, q, a, err := db.Execute(sql.UpdateEdit, params)
 	if err != nil {
diff --git a/flowserver/modules/user/db.user.go b/flowserver/modules/user/db.user.go
index 1637c71..fe53432 100755
--- a/flowserver/modules/user/db.user.go
+++ b/flowserver/modules/user/db.user.go
@@ -33,13 +33,14 @@ type IDbUser interface {
 
 // 需要编辑/添加的用户数据
 type UserInputNew struct {
-	UserName string `form:"user_name" json:"user_name" valid:"ascii,required"`
-	UserID   int64  `form:"user_id" json:"user_id"`
-	RoleID   int64  `form:"role_id" json:"role_id" `
-	Mobile   int64  `form:"mobile" json:"mobile" valid:"length(11|11),required"`
-	Status   int    `form:"status" json:"status"`
-	Auth     string `form:"auth" json:"auth" valid:"required"`
-	Email    string `form:"email" json:"email" valid:"email,required"`
+	UserName  string `form:"user_name" json:"user_name" valid:"ascii,required"`
+	UserID    int64  `form:"user_id" json:"user_id"`
+	RoleID    int64  `form:"role_id" json:"role_id" `
+	Mobile    int64  `form:"mobile" json:"mobile" valid:"length(11|11),required"`
+	Status    int    `form:"status" json:"status"`
+	ExtParams string `form:"ext_params" json:"ext_params"`
+	Auth      string `form:"auth" json:"auth" valid:"required"`
+	Email     string `form:"email" json:"email" valid:"email,required"`
 }
 
 //QueryUserInput 查询用户列表输入参数
diff --git a/flowserver/services/image/image.go b/flowserver/services/image/image.go
index c1d3f92..fd565ac 100644
--- a/flowserver/services/image/image.go
+++ b/flowserver/services/image/image.go
@@ -6,6 +6,8 @@ import (
 	"os"
 	"path/filepath"
 
+	"github.com/micro-plat/sso/flowserver/modules/app"
+
 	"github.com/micro-plat/hydra/context"
 
 	"github.com/micro-plat/hydra/component"
@@ -76,6 +78,6 @@ func (ch *ImageHandler) PostHandle(ctx *context.Context) (r interface{}) {
 	}
 	ctx.Log.Info("3.返回数据")
 	return map[string]interface{}{
-		"url": name,
+		"url": app.GetConf(ch.container).GetWebHostName() + "/static/img/" + name,
 	}
 }
diff --git a/flowserver/services/member/login.go b/flowserver/services/member/login.go
index f705067..04f4f35 100755
--- a/flowserver/services/member/login.go
+++ b/flowserver/services/member/login.go
@@ -17,7 +17,6 @@ type LoginHandler struct {
 	c      component.IContainer
 	m      member.IMember
 	code   member.ICodeMember
-	wxcode member.IWxcode
 	sys    system.ISystem
 	op     operate.IOperate
 	member member.IDBMember
@@ -30,7 +29,6 @@ func NewLoginHandler(container component.IContainer) (u *LoginHandler) {
 		c:      container,
 		m:      member.NewMember(container),
 		code:   member.NewCodeMember(container),
-		wxcode: member.NewWxcode(container),
 		sys:    system.NewSystem(container),
 		op:     operate.NewOperate(container),
 		member: member.NewDBMember(container),
@@ -40,29 +38,14 @@ func NewLoginHandler(container component.IContainer) (u *LoginHandler) {
 
 //GetHandle 处理用户登录，登录成功后转跳到指定的系统
 func (u *LoginHandler) GetHandle(ctx *context.Context) (r interface{}) {
+
 	ctx.Log.Info("-------用户登录---------")
-	//检查系统是否设置需要微信登录
-	b, _, err := u.isWechatLogin(ctx.Request.GetString("ident"))
-	if err != nil {
-		return err
-	}
-	if b == true {
-		if err := ctx.Request.Check("wxcode"); err != nil {
-			return context.NewError(context.ERR_NOT_ACCEPTABLE, err)
-		}
-	}
 	ctx.Log.Info("1.检查参数")
 	//检查输入参数
 	if err := ctx.Request.Check("username", "password", "ident"); err != nil {
 		return context.NewError(context.ERR_NOT_ACCEPTABLE, err)
 	}
 
-	if b == true {
-		if err := u.wxcode.Check(ctx.Request.GetString("username"),
-			ctx.Request.GetString("wxcode")); err != nil {
-			return err
-		}
-	}
 	ctx.Log.Info("2.执行操作")
 	//处理用户登录
 	member, err := u.m.Login(ctx.Request.GetString("username"),
@@ -71,10 +54,7 @@ func (u *LoginHandler) GetHandle(ctx *context.Context) (r interface{}) {
 	if err != nil {
 		return err
 	}
-	url := ctx.Request.GetString("redirect_uri")
-	if url == "" {
-		url = member.IndexURL
-	}
+
 	//保存用户信息
 	code, err := u.code.Save(member)
 	if err != nil {
diff --git a/flowserver/services/member/wxcode.go b/flowserver/services/member/wxcode.go
deleted file mode 100755
index 0e5f915..0000000
--- a/flowserver/services/member/wxcode.go
+++ /dev/null
@@ -1,47 +0,0 @@
-package member
-
-import (
-	"github.com/micro-plat/hydra/component"
-	"github.com/micro-plat/hydra/context"
-	"github.com/micro-plat/sso/flowserver/modules/member"
-)
-
-type WxcodeHandler struct {
-	container  component.IContainer
-	wx         member.IWxcode
-	appid      string
-	secret     string
-	serverAddr string
-}
-
-func NewWxcodeHandler(appid string, secret string, serverAddr string) func(c component.IContainer) (u *WxcodeHandler) {
-	return func(c component.IContainer) (u *WxcodeHandler) {
-		return &WxcodeHandler{
-			container:  c,
-			wx:         member.NewWxcode(c),
-			appid:      appid,
-			secret:     secret,
-			serverAddr: serverAddr,
-		}
-	}
-}
-
-//Handle 发送微信验证码
-func (u *WxcodeHandler) Handle(ctx *context.Context) (r interface{}) {
-	//检查输入参数
-	if err := ctx.Request.Check("username", "ident"); err != nil {
-		return context.NewError(context.ERR_NOT_ACCEPTABLE, err)
-	}
-	code := u.wx.GetWXCode()
-	if err := u.wx.Send(
-		ctx.Request.GetString("username"),
-		ctx.Request.GetString("ident"),
-		u.appid,
-		u.secret,
-		u.serverAddr,
-		code); err != nil {
-		return err
-	}
-
-	return "success"
-}
diff --git a/flowserver/services/subsys/info.go b/flowserver/services/subsys/info.go
new file mode 100644
index 0000000..b6c9972
--- /dev/null
+++ b/flowserver/services/subsys/info.go
@@ -0,0 +1,65 @@
+package subsys
+
+import (
+	"fmt"
+
+	"github.com/micro-plat/hydra/component"
+	"github.com/micro-plat/hydra/context"
+	"github.com/micro-plat/sso/flowserver/modules/system"
+	"github.com/micro-plat/sso/flowserver/modules/util"
+)
+
+//InfoHandler 菜单查询对象
+type InfoHandler struct {
+	c   component.IContainer
+	sys system.ISystem
+}
+
+//NewInfoHandler 创建菜单查询对象
+func NewInfoHandler(container component.IContainer) (u *InfoHandler) {
+	return &InfoHandler{
+		c:   container,
+		sys: system.NewSystem(container),
+	}
+}
+
+//Handle 查询指定用户在指定系统的菜单列表
+func (u *InfoHandler) Handle(ctx *context.Context) (r interface{}) {
+	ctx.Log.Info("-------子系统调用，获取系统信息------")
+	ctx.Log.Info("1.参数校验")
+	if err := ctx.Request.Check("ident", "timestamp", "sign"); err != nil {
+		return fmt.Errorf("参数错误：%v", err)
+	}
+	//获取secret
+	secret, err := u.getSecret(ctx.Request.GetString("ident"))
+	if err != nil {
+		return err
+	}
+	//校验签名
+	d := map[string]interface{}{}
+	d["ident"] = ctx.Request.GetString("ident")
+	d["timestamp"] = ctx.Request.GetString("timestamp")
+	ctx.Log.Info("请求请求系统信息数据：", d)
+	if ok := util.VerifySign(ctx, d, secret, ctx.Request.GetString("sign")); ok != true {
+		return context.NewError(context.ERR_NOT_ACCEPTABLE, "sign签名错误")
+	}
+	ctx.Log.Info("2. 执行操作")
+	data, err := u.sys.Get(ctx.Request.GetString("ident"))
+	if err != nil {
+		return err
+	}
+	ctx.Log.Info("3. 返回数据")
+	return data
+}
+
+func (u *InfoHandler) getSecret(ident string) (string, error) {
+	if ident == "" {
+		return "", context.NewError(context.ERR_NOT_ACCEPTABLE, "ident not exists")
+	}
+	data, err := u.sys.Get(ident)
+	if err != nil {
+		return "", err
+	}
+
+	return data.GetString("secret"), nil
+}
diff --git a/flowserver/services/subsys/login.go b/flowserver/services/subsys/login.go
index 624e5dc..83e902a 100644
--- a/flowserver/services/subsys/login.go
+++ b/flowserver/services/subsys/login.go
@@ -15,7 +15,6 @@ type LoginHandler struct {
 	c      component.IContainer
 	m      member.IMember
 	code   member.ICodeMember
-	wxcode member.IWxcode
 	sys    system.ISystem
 	op     operate.IOperate
 	member member.IDBMember
@@ -28,7 +27,6 @@ func NewLoginHandler(container component.IContainer) (u *LoginHandler) {
 		c:      container,
 		m:      member.NewMember(container),
 		code:   member.NewCodeMember(container),
-		wxcode: member.NewWxcode(container),
 		sys:    system.NewSystem(container),
 		op:     operate.NewOperate(container),
 		member: member.NewDBMember(container),
@@ -57,7 +55,7 @@ func (u *LoginHandler) Handle(ctx *context.Context) (r interface{}) {
 	d["timestamp"] = ctx.Request.GetString("timestamp")
 	ctx.Log.Info("请求原数据", d)
 	if ok := util.VerifySign(ctx, d, secret, ctx.Request.GetString("sign")); ok != true {
-		return context.NewError(context.ERR_NOT_ACCEPTABLE, "sign签名错误")
+		return context.NewError(context.ERR_PAYMENT_REQUIRED, "sign签名错误(402)")
 	}
 
 	ctx.Log.Info("2.执行操作")
@@ -78,6 +76,7 @@ func (u *LoginHandler) Handle(ctx *context.Context) (r interface{}) {
 	if err := u.op.LoginOperate(member); err != nil {
 		return err
 	}
+	ctx.Log.Infof("%+v", member)
 	ctx.Log.Info("3.返回数据")
 	return member
 
diff --git a/flowserver/services/subsys/user.go b/flowserver/services/subsys/user.go
index 08c0838..9931e2b 100644
--- a/flowserver/services/subsys/user.go
+++ b/flowserver/services/subsys/user.go
@@ -5,6 +5,7 @@ import (
 
 	"github.com/micro-plat/hydra/component"
 	"github.com/micro-plat/hydra/context"
+	"github.com/micro-plat/sso/flowserver/modules/member"
 	"github.com/micro-plat/sso/flowserver/modules/system"
 	"github.com/micro-plat/sso/flowserver/modules/util"
 )
@@ -13,6 +14,7 @@ import (
 type UserHandler struct {
 	container component.IContainer
 	sys       system.ISystem
+	m         member.IMember
 }
 
 //NewUserHandler is
@@ -20,6 +22,7 @@ func NewUserHandler(container component.IContainer) (u *UserHandler) {
 	return &UserHandler{
 		container: container,
 		sys:       system.NewSystem(container),
+		m:         member.NewMember(container),
 	}
 }
 
@@ -89,6 +92,42 @@ func (u *UserHandler) PostHandle(ctx *context.Context) (r interface{}) {
 	}
 }
 
+//Handle 子系统远程登录
+func (u *UserHandler) InfoHandle(ctx *context.Context) (r interface{}) {
+	ctx.Log.Info("-------子系统用户远程登录---------")
+
+	ctx.Log.Info("1.检查参数")
+	if err := ctx.Request.Check("username", "ident", "timestamp", "sign"); err != nil {
+		return context.NewError(context.ERR_NOT_ACCEPTABLE, err)
+	}
+	//获取secret
+	secret, err := u.getSecret(ctx.Request.GetString("ident"))
+	if err != nil {
+		return err
+	}
+	//校验签名
+	d := map[string]interface{}{}
+	d["username"] = ctx.Request.GetString("username")
+	d["ident"] = ctx.Request.GetString("ident")
+	d["timestamp"] = ctx.Request.GetString("timestamp")
+	ctx.Log.Info("请求原数据", d)
+	if ok := util.VerifySign(ctx, d, secret, ctx.Request.GetString("sign")); ok != true {
+		return context.NewError(context.ERR_NOT_ACCEPTABLE, "sign签名错误")
+	}
+
+	ctx.Log.Info("2.执行操作")
+	//处理用户登录
+	member, err := u.m.QueryUserInfo(ctx.Request.GetString("username"),
+		ctx.Request.GetString("ident"))
+	if err != nil {
+		return err
+	}
+
+	ctx.Log.Info("3.返回数据")
+	return member
+
+}
+
 func (u *UserHandler) getSecret(ident string) (string, error) {
 	if ident == "" {
 		return "", context.NewError(context.ERR_NOT_ACCEPTABLE, "ident not exists")
diff --git a/flowserver/services/user/user.go b/flowserver/services/user/user.go
index 0170660..14ed674 100644
--- a/flowserver/services/user/user.go
+++ b/flowserver/services/user/user.go
@@ -1,23 +1,12 @@
 package user
 
 import (
-	"encoding/json"
-	"fmt"
-	"net/url"
-
 	"github.com/micro-plat/hydra/component"
 	"github.com/micro-plat/hydra/context"
-	"github.com/micro-plat/lib4go/db"
-	"github.com/micro-plat/lib4go/net/http"
-	"github.com/micro-plat/lib4go/utility"
-	"github.com/micro-plat/sso/flowserver/modules/app"
-	"github.com/micro-plat/sso/flowserver/modules/const/enum"
 	"github.com/micro-plat/sso/flowserver/modules/member"
 	"github.com/micro-plat/sso/flowserver/modules/operate"
 	"github.com/micro-plat/sso/flowserver/modules/system"
 	"github.com/micro-plat/sso/flowserver/modules/user"
-
-	"github.com/micro-plat/wechat/mp/oauth2"
 )
 
 //UserHandler is
@@ -239,23 +228,6 @@ func (u *UserHandler) EditHandle(ctx *context.Context) (r interface{}) {
 		return context.NewError(context.ERR_NOT_IMPLEMENTED, err)
 	}
 
-	// 判断是否需要发送邮件
-	b, err := u.userLib.IsSendEmail(&input)
-	// 发邮件
-	if err == nil && b == true {
-		guid := utility.GetGUID()
-		conf := app.GetConf(u.container)
-		resURI := url.QueryEscape(fmt.Sprintf(conf.GetBindUrl(), guid))
-		ctx.Log.Infof("发送验证邮件到:%s,guid：%v", input.Email, guid)
-		link := fmt.Sprintf(enum.WxApiCode, resURI)
-		if err := u.member.SendCheckMail(enum.From, enum.Password, enum.Host, enum.Port, input.Email, link); err != nil {
-			return err
-		}
-		if err := u.userLib.SetEmail(guid, input.Email); err != nil {
-			return err
-		}
-	}
-
 	ctx.Log.Info("4.返回结果")
 	return "success"
 }
@@ -279,63 +251,7 @@ func (u *UserHandler) SaveHandle(ctx *context.Context) (r interface{}) {
 	if err := u.userLib.Add(&inputData); err != nil {
 		return context.NewError(context.ERR_NOT_IMPLEMENTED, err)
 	}
-	// 判断是否需要发送邮件
-	b, err := u.userLib.IsSendEmail(&inputData)
-	// 发邮件
-	if err == nil && b == true {
-		guid := utility.GetGUID()
-		conf := app.GetConf(u.container)
-		resURI := url.QueryEscape(fmt.Sprintf(conf.GetBindUrl(), guid))
-		ctx.Log.Infof("发送验证邮件到:%s,guid：%v", inputData.Email, guid)
-		link := fmt.Sprintf(enum.WxApiCode, resURI)
-		if err := u.member.SendCheckMail(enum.From, enum.Password, enum.Host, enum.Port, inputData.Email, link); err != nil {
-			return err
-		}
-		if err := u.userLib.SetEmail(guid, inputData.Email); err != nil {
-			return err
-		}
-	}
 
 	ctx.Log.Info("4.返回结果")
 	return "success"
 }
-
-//BindHandle 绑定用户邮箱
-func (u *UserHandler) BindHandle(ctx *context.Context) (r interface{}) {
-
-	ctx.Log.Info("--------绑定用户邮箱--------")
-	ctx.Log.Info("1.参数校验")
-	if err := ctx.Request.Check("guid", "code"); err != nil {
-		return err
-	}
-	guid := ctx.Request.GetString("guid")
-	code := ctx.Request.GetString("code")
-
-	//判断邮箱是否过期
-	email, err := u.userLib.GetEmail(guid)
-	if err != nil || email == "" {
-		return fmt.Errorf("链接已经过期，请联系管理员.错误：%v,邮箱：%v", err, email)
-	}
-	ctx.Log.Info("2. 根据code查询用户openid")
-
-	conf := app.GetConf(u.container)
-	endpoint := oauth2.NewEndpoint(conf.AppID, conf.Secret)
-	url := endpoint.ExchangeTokenURL(code)
-	client := http.NewHTTPClient()
-	content, status, err := client.Get(url)
-	if err != nil || status != 200 {
-		return fmt.Errorf("远程请求失败:%s(%v)%d", url, err, status)
-	}
-	userInfo := make(db.QueryRow)
-	if err = json.Unmarshal([]byte(content), &userInfo); err != nil {
-		return fmt.Errorf("返回串无法解析:(%v)%s", err, content)
-	}
-	ctx.Log.Info("3. 根据openid进行用户绑定")
-	openID := userInfo.GetString("openid")
-	if err := u.userLib.Bind(email, openID); err != nil {
-		return err
-	}
-
-	ctx.Log.Info("3.返回结果")
-	return "success"
-}
diff --git a/flowserver/services/wx/login.go b/flowserver/services/wx/login.go
deleted file mode 100755
index 607fb3c..0000000
--- a/flowserver/services/wx/login.go
+++ /dev/null
@@ -1,88 +0,0 @@
-package wx
-
-import (
-	"encoding/json"
-	"fmt"
-
-	"github.com/micro-plat/hydra/component"
-	"github.com/micro-plat/hydra/context"
-	"github.com/micro-plat/lib4go/db"
-	"github.com/micro-plat/lib4go/net/http"
-	"github.com/micro-plat/lib4go/security/jwt"
-	"github.com/micro-plat/sso/flowserver/modules/app"
-	"github.com/micro-plat/sso/flowserver/modules/member"
-	"github.com/micro-plat/wechat/mp/oauth2"
-)
-
-type LoginHandler struct {
-	c    component.IContainer
-	m    member.IMember
-	code member.ICodeMember
-}
-
-func NewLoginHandler(container component.IContainer) (u *LoginHandler) {
-	return &LoginHandler{
-		c:    container,
-		m:    member.NewMember(container),
-		code: member.NewCodeMember(container),
-	}
-}
-
-func (u *LoginHandler) getLoginURL(ident string) string {
-	conf := app.GetConf(u.c)
-	url := fmt.Sprintf("%s?ident=%s", conf.GetWXLoginURL(), ident)
-	return oauth2.AuthCodeURL(conf.AppID, url, "snsapi_base", "")
-}
-
-//Handle 使用微信code查询用户openid,并登录，推送到ws端code
-func (u *LoginHandler) Handle(ctx *context.Context) (r interface{}) {
-	if err := ctx.Request.Check("code", "ident"); err != nil {
-		return context.NewError(context.ERR_NOT_ACCEPTABLE, err)
-	}
-	ctx.Log.Info("1. 根据code查询用户openid")
-	ident := ctx.Request.GetString("ident", "sso")
-	code := ctx.Request.GetString("code")
-	conf := app.GetConf(u.c)
-	endpoint := oauth2.NewEndpoint(conf.AppID, conf.Secret)
-	url := endpoint.ExchangeTokenURL(code)
-	client := http.NewHTTPClient()
-	content, status, err := client.Get(url)
-	if err != nil || status != 200 {
-		return fmt.Errorf("远程请求失败:%s(%v)%d", url, err, status)
-	}
-	userInfo := make(db.QueryRow)
-	if err = json.Unmarshal([]byte(content), &userInfo); err != nil {
-		return err
-	}
-	ctx.Log.Info("2. 根据openid登录")
-	openid := userInfo.GetString("openid")
-	member, err := u.m.LoginByOpenID(openid, ident)
-	if err != nil {
-		return fmt.Errorf("登录失败:(%v)%s(%s)", err, openid, content)
-	}
-	redirectURL := ctx.Request.GetString("redirect_uri")
-	if redirectURL == "" {
-		redirectURL = member.IndexURL
-	}
-	loginCode, err := u.code.Save(member)
-	if err != nil {
-		return fmt.Errorf("保存用户登录code失败:%v", err)
-	}
-	//设置jwt数据
-	ctx.Log.Info("3. 返回登录端code")
-	ctx.Response.SetJWT(member)
-
-	jwtAuth, err := ctx.Request.GetJWTConfig() //获取jwt配置
-	if err != nil {
-		return err
-	}
-	jwtToken, err := jwt.Encrypt(jwtAuth.Secret, jwtAuth.Mode, member, jwtAuth.ExpireAt)
-	if err != nil {
-		return err
-	}
-
-	return map[string]interface{}{
-		"code": loginCode,
-		"jwt":  jwtToken,
-	}
-}
diff --git a/mgrserver/.babelrc b/mgrserver/.babelrc
new file mode 100644
index 0000000..3a280ba
--- /dev/null
+++ b/mgrserver/.babelrc
@@ -0,0 +1,12 @@
+{
+  "presets": [
+    ["env", {
+      "modules": false,
+      "targets": {
+        "browsers": ["> 1%", "last 2 versions", "not ie <= 8"]
+      }
+    }],
+    "stage-2"
+  ],
+  "plugins": ["transform-vue-jsx", "transform-runtime"]
+}
diff --git a/mgrserver/.editorconfig b/mgrserver/.editorconfig
new file mode 100644
index 0000000..9d08a1a
--- /dev/null
+++ b/mgrserver/.editorconfig
@@ -0,0 +1,9 @@
+root = true
+
+[*]
+charset = utf-8
+indent_style = space
+indent_size = 2
+end_of_line = lf
+insert_final_newline = true
+trim_trailing_whitespace = true
diff --git a/mgrserver/.gitignore b/mgrserver/.gitignore
new file mode 100644
index 0000000..29e82d5
--- /dev/null
+++ b/mgrserver/.gitignore
@@ -0,0 +1,15 @@
+.DS_Store
+node_modules/
+/dist/
+npm-debug.log*
+yarn-debug.log*
+yarn-error.log*
+/conf/
+/logs/
+# Editor directories and files
+.idea
+.vscode
+*.suo
+*.ntvs*
+*.njsproj
+*.sln
diff --git a/mgrserver/.postcssrc.js b/mgrserver/.postcssrc.js
new file mode 100644
index 0000000..eee3e92
--- /dev/null
+++ b/mgrserver/.postcssrc.js
@@ -0,0 +1,10 @@
+// https://github.com/michael-ciniawsky/postcss-load-config
+
+module.exports = {
+  "plugins": {
+    "postcss-import": {},
+    "postcss-url": {},
+    // to edit target browsers: use "browserslist" field in package.json
+    "autoprefixer": {}
+  }
+}
diff --git a/mgrserver/config/prod.env.js b/mgrserver/config/prod.env.js
index 4b6854d..11b0f53 100644
--- a/mgrserver/config/prod.env.js
+++ b/mgrserver/config/prod.env.js
@@ -2,12 +2,12 @@
 module.exports = {
     NODE_ENV: '"production"',
     service: {
-        url: '"http://api.sso.sinopecscsy.com:6688"',   //线上
-        ws: `"ws://api.sso.sinopecscsy.com:6689/ws"`,
-        webHost:'"http://web.coupon.sinopecscsy.com"',
+        // url: '"http://api.sso.sinopecscsy.com:6688"',   //线上
+        // ws: `"ws://api.sso.sinopecscsy.com:6689/ws"`,
+        // webHost:'"http://web.coupon.sinopecscsy.com"',
         //url: '"http://api.sso2.100bm.cn:6688"',     //线下
-        // url: '"http://192.168.106.152:6688"',     //线下
-        // ws: `"ws://api.sso2.100bm.cn:6689/ws"`,
-        // webHost:'"http://coupon2.100bm.cn:6060"',
+        url: '"http://192.168.106.152:6688"',     //线下
+        ws: `"ws://api.sso2.100bm.cn:6689/ws"`,
+        webHost:'"http://coupon2.100bm.cn:6060"',
     }
 }
diff --git a/mgrserver/index.html b/mgrserver/index.html
index 0ef936e..7b43c61 100644
--- a/mgrserver/index.html
+++ b/mgrserver/index.html
@@ -7,8 +7,7 @@
     <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
 
     <title></title>
-    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
-    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
+
     <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">
 
 
diff --git a/mgrserver/package-lock.json b/mgrserver/package-lock.json
index 4f8a1bf..708704b 100644
--- a/mgrserver/package-lock.json
+++ b/mgrserver/package-lock.json
@@ -1354,10 +1354,9 @@
       }
     },
     "bootstrap": {
-      "version": "3.3.7",
-      "resolved": "http://registry.npmjs.org/bootstrap/-/bootstrap-3.3.7.tgz",
-      "integrity": "sha1-WjiTlFSfIzMIdaOxUGVldPip63E=",
-      "dev": true
+      "version": "4.2.1",
+      "resolved": "https://registry.npmjs.org/bootstrap/-/bootstrap-4.2.1.tgz",
+      "integrity": "sha512-tt/7vIv3Gm2mnd/WeDx36nfGGHleil0Wg8IeB7eMrVkY0fZ5iTaBisSh8oNANc2IBsCc6vCgCNTIM/IEN0+50Q=="
     },
     "brace-expansion": {
       "version": "1.1.11",
@@ -6234,12 +6233,12 @@
       }
     },
     "nav-menu": {
-      "version": "1.1.7",
-      "resolved": "https://registry.npmjs.org/nav-menu/-/nav-menu-1.1.7.tgz",
-      "integrity": "sha512-cfZCWu6s4vSV8EzEUttK03vgMcuHfhks+G/kfLa8J1a2xuqb5VwKhXtNFGubc0QcQLmlFdeIYxqAFgXEG0qzrg==",
+      "version": "1.3.1",
+      "resolved": "https://registry.npmjs.org/nav-menu/-/nav-menu-1.3.1.tgz",
+      "integrity": "sha512-SH5z8xzOFwZMQIJDLFxCqnGYPTdtwY1DtHeC384wX9X/xMRgE+mnY62wJkj35CABtIqKM4IcU3fuL4Lps/VWiQ==",
       "requires": {
         "axios": "^0.18.0",
-        "element-ui": "^2.4.8",
+        "element-ui": "^2.4.11",
         "jquery": "^3.3.1",
         "style-loader": "^0.23.1",
         "stylus-loader": "^3.0.2",
@@ -6249,9 +6248,9 @@
       },
       "dependencies": {
         "ajv": {
-          "version": "6.5.5",
-          "resolved": "https://registry.npmjs.org/ajv/-/ajv-6.5.5.tgz",
-          "integrity": "sha512-7q7gtRQDJSyuEHjuVgHoUa2VuemFiCMrfQc9Tc08XTAc4Zj/5U1buQJ0HU6i7fKjXU09SVgSmxa4sLvuvS8Iyg==",
+          "version": "6.7.0",
+          "resolved": "https://registry.npmjs.org/ajv/-/ajv-6.7.0.tgz",
+          "integrity": "sha512-RZXPviBTtfmtka9n9sy1N5M5b82CbxWIR6HIis4s3WQTXDJamc/0gpCWNGz6EWdWp4DOfjzJfhz/AS9zVPjjWg==",
           "requires": {
             "fast-deep-equal": "^2.0.1",
             "fast-json-stable-stringify": "^2.0.0",
@@ -6259,6 +6258,19 @@
             "uri-js": "^4.2.2"
           }
         },
+        "element-ui": {
+          "version": "2.4.11",
+          "resolved": "https://registry.npmjs.org/element-ui/-/element-ui-2.4.11.tgz",
+          "integrity": "sha512-RtgK0t840NAFTajGMWvylzZRSX1EkZ7V4YgAoBxhv4TtkeMscLuk/IdYOzPdlQq6IN0byx1YVBxCX+u4yYkGvw==",
+          "requires": {
+            "async-validator": "~1.8.1",
+            "babel-helper-vue-jsx-merge-props": "^2.0.0",
+            "deepmerge": "^1.2.0",
+            "normalize-wheel": "^1.0.1",
+            "resize-observer-polyfill": "^1.5.0",
+            "throttle-debounce": "^1.0.1"
+          }
+        },
         "fast-deep-equal": {
           "version": "2.0.1",
           "resolved": "https://registry.npmjs.org/fast-deep-equal/-/fast-deep-equal-2.0.1.tgz",
@@ -6270,9 +6282,9 @@
           "integrity": "sha512-xbbCH5dCYU5T8LcEhhuh7HJ88HXuW3qsI3Y0zOZFKfZEHcpWiHU/Jxzk629Brsab/mMiHQti9wMP+845RPe3Vg=="
         },
         "mime": {
-          "version": "2.3.1",
-          "resolved": "https://registry.npmjs.org/mime/-/mime-2.3.1.tgz",
-          "integrity": "sha512-OEUllcVoydBHGN1z84yfQDimn58pZNNNXgZlHXSboxMlFvgI6MXSWpWKpFRra7H1HxpVhHTkrghfRW49k6yjeg=="
+          "version": "2.4.0",
+          "resolved": "https://registry.npmjs.org/mime/-/mime-2.4.0.tgz",
+          "integrity": "sha512-ikBcWwyqXQSHKtciCcctu9YfPbFYZ4+gbHEmE0Q8jzcTYQg5dHCr3g2wwAZjPoJfQVXZq6KXAjpXOTf5/cjT7w=="
         },
         "schema-utils": {
           "version": "1.0.0",
diff --git a/mgrserver/package.json b/mgrserver/package.json
index de540af..eda612e 100644
--- a/mgrserver/package.json
+++ b/mgrserver/package.json
@@ -10,6 +10,8 @@
     "build": "node build/build.js"
   },
   "dependencies": {
+    "bootstrap": "^4.1.3",
+    "jquery": "^3.3.1",
     "axios": "^0.18.0",
     "babel-runtime": "^6.26.0",
     "bufferutil": "^4.0.0",
@@ -17,7 +19,7 @@
     "font-awesome": "^4.7.0",
     "js-cookie": "^2.2.0",
     "login-with-up": "^1.1.1",
-    "nav-menu": "^1.1.7",
+    "nav-menu": "^1.3.1",
     "popper.js": "^1.14.3",
     "qrcodejs2": "^0.0.2",
     "reconnecting-websocket": "^4.0.0-rc5",
@@ -49,7 +51,6 @@
     "babel-plugin-transform-vue-jsx": "^3.7.0",
     "babel-preset-env": "^1.7.0",
     "babel-preset-stage-2": "^6.22.0",
-    "bootstrap": "3.3.7",
     "chalk": "^2.0.1",
     "copy-webpack-plugin": "^4.0.1",
     "css-loader": "^0.28.0",
@@ -57,7 +58,6 @@
     "file-loader": "^1.1.4",
     "friendly-errors-webpack-plugin": "^1.6.1",
     "html-webpack-plugin": "^2.30.1",
-    "jquery": "^3.3.1",
     "node-notifier": "^5.1.2",
     "node-sass": "^4.9.0",
     "optimize-css-assets-webpack-plugin": "^3.2.0",
diff --git a/mgrserver/src/assets/app.css b/mgrserver/src/assets/app.css
index aefe442..adb5e6a 100644
--- a/mgrserver/src/assets/app.css
+++ b/mgrserver/src/assets/app.css
@@ -5205,7 +5205,7 @@ a.text-#000000:hover {
 .height-min .form-group{margin-bottom: 2px;}
 
 .pre-scrollable {
-    max-height: 760px;
+    /*max-height: 760px;*/
     overflow-y: auto;
     padding-bottom: 30px;
   }
diff --git a/mgrserver/src/components/item.vue b/mgrserver/src/components/item.vue
index e581e0b..93ff044 100644
--- a/mgrserver/src/components/item.vue
+++ b/mgrserver/src/components/item.vue
@@ -3,251 +3,277 @@
   <li :class="liClassVal">
 
     <span :class="spanClassVal" @click='open(model)'></span>
-    <a  @mouseenter='enterFunc(model)' @mouseleave='leaveFunc(model)'  @contextmenu.prevent='cxtmenufunc(model)'>
+    <span title='选中'  >
+         <input type="checkbox" @click.stop="checkNode(model)" :checked="model.checked" >
+      </span>
+    <a @mouseenter='enterFunc(model)' @mouseleave='leaveFunc(model)' @contextmenu.prevent='cxtmenufunc(model)'>
       <span :class="{loadSyncNode:model.loadNode==1}" v-if='model.loadNode==1'></span>
       <span :class='model.icon' v-else></span>
-      <span v-show='ischeck' id="treeDemo_5_check" class="button chk" :class='{"checkbox_false_full":!model.ckbool,"checkbox_true_full":model.ckbool}' @click='ckFunc(model)' treenode_check=""></span>
-      <span :class='enableClass' @click='Func(model)' v-if="model.level_id == 4" style="color: #23b7e5" >{{model.name}}</span>
-      <span :class='enableClass' @click='Func(model)' v-if="model.level_id < 4" >{{model.name}}</span>
+      <span v-show='ischeck' id="treeDemo_5_check" class="button chk"
+            :class='{"checkbox_false_full":!model.ckbool,"checkbox_true_full":model.ckbool}' @click='ckFunc(model)'
+            treenode_check=""></span>
+      <span :class='enableClass' @click='Func(model)' v-if="model.level_id == 4"
+            style="color: #23b7e5">{{model.name}}</span>
+      <span :class='enableClass' @click='Func(model)' v-if="model.level_id < 4">{{model.name}}</span>
       <!--新增-->
-      <span  v-show='model.hover' v-if="model.parent < 4 || model.level_id <= 3" title='新增' class="button add" @click="addNode(model)"></span>
+      <span v-show='model.hover' v-if="model.parent < 4 || model.level_id <= 3" title='新增' class="button add"
+            @click="addNode(model)"></span>
       <!--删除-->
       <span v-show='model.hover' title='删除' class="button remove" @click="delNode(model)"></span>
       <!--启用禁用-->
-      <span v-show='model.hover' v-if="model.enable == 0" title='启用' class="button enable" @click="enable(model)"></span>
-      <span v-show='model.hover' v-if="model.enable == 1" title='禁用' class="button disable" @click="enable(model)"></span>
+      <span v-show='model.hover' v-if="model.enable == 0" title='启用' class="button enable"
+            @click="enable(model)"></span>
+      <span v-show='model.hover' v-if="model.enable == 1" title='禁用' class="button disable"
+            @click="enable(model)"></span>
       <!--上移-->
       <span v-show='model.hover' title='上移' class="button up" @click="upNode(model)"></span>
       <!--下移-->
       <span v-show='model.hover' title='下移' class="button down" @click="downNode(model)"></span>
-      <span v-show='model.hover' v-if='model.parent == 0' title='添加顶级节点' class="button add_line" @click="addTopNode(model)"></span>
+
+      <span v-show='model.hover' v-if='model.parent == 0' title='添加顶级节点' class="button add_line"
+            @click="addTopNode(model)"></span>
     </a>
 
     <ul v-show='model.isFolder'>
-      <ztree-item v-for="(item,i) in model.children" :key='i' :callback='callback' :expandfunc='expandfunc' :cxtmenufunc='cxtmenufunc' :model.sync="item" :num.sync='i' root='1' :nodes.sync='model.children.length' :ischeck='ischeck' :trees.sync='trees'></ztree-item>
+      <ztree-item v-for="(item,i) in model.children" :key='i' :callback='callback' :checkfunc="checkfunc" :expandfunc='expandfunc'
+                  :cxtmenufunc='cxtmenufunc' :model.sync="item" :num.sync='i' root='1'
+                  :nodes.sync='model.children.length' :ischeck='ischeck' :trees.sync='trees'></ztree-item>
     </ul>
   </li>
 </template>
 
 <script>
-  export default
-  {
+  export default {
     name: 'ztreeItem',
-    data(){
+    data() {
       return {
-        parentNodeModel : null
+        parentNodeModel: null,
+        checkedNames: []
       }
     },
     props: {
-      model:{
-        type:Object,
-        twoWay:true
+      model: {
+        type: Object,
+        twoWay: true
       },
-      num:{
-        type:Number,
-        twoWay:true
+      num: {
+        type: Number,
+        twoWay: true
       },
-      nodes:{
-        type:Number,
-        twoWay:true,
-        default:0
+      nodes: {
+        type: Number,
+        twoWay: true,
+        default: 0
       },
-      trees:{
-        type:Array,
-        twoWay:true,
-        default:[]
+      trees: {
+        type: Array,
+        twoWay: true,
+        default: []
       },
-      root:{
-        type:String,
-        twoWay:true
+      root: {
+        type: String,
+        twoWay: true
       },
-      callback:{
-        type:Function
+      callback: {
+        type: Function
       },
-      expandfunc:{
+      checkfunc:{
         type:Function
       },
-      cxtmenufunc:{
-        type:Function
+      expandfunc: {
+        type: Function
+      },
+      cxtmenufunc: {
+        type: Function
       },
-      ischeck:{
-        type:Boolean,
-        twoWay:true,
-        default:false
+
+      ischeck: {
+        type: Boolean,
+        twoWay: true,
+        default: false
       }
     },
-    update(){
+    update() {
       this.initTreeData();
     },
-    mounted(){
+    mounted() {
     },
-    methods:{
-      Func(m){
+    methods: {
+      checkNode(m) {
+        console.log("checked")
+        m.checked = !m.checked;
+        if (typeof this.checkfunc == "function") {
+          if (m.checked){
+                this.checkfunc(m.id);
+          }
+        }
+      },
+      Func(m) {
         // 查找点击的子节点
-        var recurFunc = (data,list) => {
-          data.forEach((i)=>{
-            if(i.id==m.id){
+        var recurFunc = (data, list) => {
+          data.forEach((i) => {
+            if (i.id == m.id) {
               i.clickNode = true;
-              if(typeof this.callback == "function") {
-                this.callback.call(null,m,list,this.trees);
+              if (typeof this.callback == "function") {
+                this.callback.call(null, m, list, this.trees);
               }
-            }else {
+            } else {
               i.clickNode = false;
             }
 
-            if(i.children){
-              recurFunc(i.children,i);
+            if (i.children) {
+              recurFunc(i.children, i);
             }
           })
         }
 
-        recurFunc(this.trees,this.trees);
+        recurFunc(this.trees, this.trees);
       },
-      ckFunc(m){
+      ckFunc(m) {
         m.ckbool = !m.ckbool;
 
         // 查找复选框的所有子节点
         var recurFuncChild = (data) => {
-          data.forEach((i)=>{
+          data.forEach((i) => {
             i.ckbool = m.ckbool;
-            if(i.children)  recurFuncChild(i.children);
+            if (i.children) recurFuncChild(i.children);
           })
         }
         recurFuncChild(m.children);
 
         // 查找复选框的所有父节点
-        var isFindRootBool  = false, parentId = m.parentId;
-        var recurFuncParent = (data,list) => {
-          data.forEach((i)=>{
-            if(!isFindRootBool) {
-              if(i.id == parentId && parentId>0) {
+        var isFindRootBool = false, parentId = m.parentId;
+        var recurFuncParent = (data, list) => {
+          data.forEach((i) => {
+            if (!isFindRootBool) {
+              if (i.id == parentId && parentId > 0) {
                 parentId = i.parentId;
                 i.ckbool = m.ckbool;
                 // 重新查找
-                recurFuncParent(this.trees,this.trees);
-              }else if(i.id == m.id && i.parentId==0) {
+                recurFuncParent(this.trees, this.trees);
+              } else if (i.id == m.id && i.parentId == 0) {
                 i.ckbool = m.ckbool;
                 isFindRootBool = true;
-              }else {
-                recurFuncParent(i.children,i);
+              } else {
+                recurFuncParent(i.children, i);
               }
             }
           })
 
         }
-        recurFuncParent(this.trees,this.trees);
+        recurFuncParent(this.trees, this.trees);
       },
-      getParentNode(m,cb){
+      getParentNode(m, cb) {
         // 查找点击的子节点
-        var recurFunc = (data,list) => {
-          data.forEach((i)=>{
-            if(i.id==m.id) this.parentNodeModel = list;
-            if(i.children) {
+        var recurFunc = (data, list) => {
+          data.forEach((i) => {
+            if (i.id == m.id) this.parentNodeModel = list;
+            if (i.children) {
               (typeof cb == "function") && cb.call(i.children);
-              recurFunc(i.children,i);
+              recurFunc(i.children, i);
             }
           })
         }
-        recurFunc(this.trees,this.trees);
+        recurFunc(this.trees, this.trees);
       },
-      open(m){
+      open(m) {
         m.isExpand = !m.isExpand;
 
-        if(typeof this.expandfunc == "function" && m.isExpand) {
-          if(m.loadNode!=2) {
-            this.expandfunc.call(null,m);
-          }else {
+        if (typeof this.expandfunc == "function" && m.isExpand) {
+          if (m.loadNode != 2) {
+            this.expandfunc.call(null, m);
+          } else {
             m.isFolder = !m.isFolder;
           }
         } else {
           m.isFolder = !m.isFolder;
         }
       },
-      enterFunc(m){
+      enterFunc(m) {
         m.hover = true;
-        this.getParentNode(m,null);
+        this.getParentNode(m, null);
       },
-      leaveFunc(m){
+      leaveFunc(m) {
         m.hover = false;
       },
       // 新增节点
-      addNode(nodeModel){
+      addNode(nodeModel) {
         console.log(nodeModel)
-        if (nodeModel.level_id >= 4){
+        if (nodeModel.level_id >= 4) {
           return false
         }
-        if(nodeModel) {
+        if (nodeModel) {
           var _nid = +new Date();
           nodeModel.children.push({
-            id:_nid,
-            parentId:nodeModel.id,
-            parentLevel:nodeModel.level_id,
-            name:"",
-            path:"-",
-            icon:"-",
-            clickNode:false,
+            id: _nid,
+            parentId: nodeModel.id,
+            parentLevel: nodeModel.level_id,
+            name: "",
+            path: "-",
+            icon: "-",
+            clickNode: false,
             isNew: true,
-            ckbool:false,
-            isCheck:this.ischeck,
-            isFolder:false,
-            isExpand:false,
-            hover:false,
-            loadNode:0,
-            children:[]
+            ckbool: false,
+            isCheck: this.ischeck,
+            isFolder: false,
+            isExpand: false,
+            hover: false,
+            loadNode: 0,
+            children: []
           });
           nodeModel.isFolder = true;
-          nodeModel.children.forEach((item,index)=> {
+          nodeModel.children.forEach((item, index) => {
             if (item.isNew == true) {
               this.Func(item)
             }
           })
-        }else {
+        } else {
           return false
         }
       },
-      addTopNode(nodeModel){
-        if(nodeModel) {
+      addTopNode(nodeModel) {
+        if (nodeModel) {
           var _nid = +new Date();
           this.parentNodeModel.push({
-            id:_nid,
-            parentId:0,
-            parentLevel:0,
-            name:"",
-            path:"-",
-            icon:"-",
-            clickNode:false,
+            id: _nid,
+            parentId: 0,
+            parentLevel: 0,
+            name: "",
+            path: "-",
+            icon: "-",
+            clickNode: false,
             isNew: true,
-            ckbool:false,
-            isCheck:this.ischeck,
-            isFolder:false,
-            isExpand:false,
-            hover:false,
-            loadNode:0,
-            children:[]
+            ckbool: false,
+            isCheck: this.ischeck,
+            isFolder: false,
+            isExpand: false,
+            hover: false,
+            loadNode: 0,
+            children: []
           });
           nodeModel.isFolder = true;
-          this.parentNodeModel.forEach((item,index)=> {
+          this.parentNodeModel.forEach((item, index) => {
             if (item.isNew == true) {
               this.Func(item)
             }
           })
-        }else {
+        } else {
 
           return false
         }
       },
       // 删除节点
-      delNode(nodeModel){
-        if(nodeModel) {
-          this.$del("/sso/sys/func",{data:{id:nodeModel.id}})
+      delNode(nodeModel) {
+        if (nodeModel) {
+          this.$del("/sso/sys/func", {data: {id: nodeModel.id}})
             .then(res => {
-                if(this.parentNodeModel.hasOwnProperty("children")) {
-                  this.parentNodeModel.children.splice(this.parentNodeModel.children.indexOf(nodeModel),1);
-                }else if(this.parentNodeModel instanceof Array){
-                  // 第一级根节点处理
-                  this.parentNodeModel.splice(this.parentNodeModel.indexOf(nodeModel),1);
-                }
-                nodeModel = null;
+              if (this.parentNodeModel.hasOwnProperty("children")) {
+                this.parentNodeModel.children.splice(this.parentNodeModel.children.indexOf(nodeModel), 1);
+              } else if (this.parentNodeModel instanceof Array) {
+                // 第一级根节点处理
+                this.parentNodeModel.splice(this.parentNodeModel.indexOf(nodeModel), 1);
+              }
+              nodeModel = null;
               this.$notify({
                 title: '成功',
                 message: '删除节点成功',
@@ -262,37 +288,37 @@
                   message: '登录超时,请重新登录',
                   type: 'error',
                   offset: 50,
-                  duration:2000,
+                  duration: 2000,
                   onClose: function () {
                     this.$router.push("/login");
                   }
                 });
-              }else{
+              } else {
                 this.$notify({
                   title: '错误',
                   message: '网络错误,请稍后再试',
                   type: 'error',
                   offset: 50,
-                  duration:2000,
+                  duration: 2000,
                 });
               }
             });
 
-        }else {
-         return false;
+        } else {
+          return false;
         }
       },
       enable(nodeModel) {
-        if(nodeModel) {
-          let status
-          if (nodeModel.enable == 1){
+        if (nodeModel) {
+          let status;
+          if (nodeModel.enable == 1) {
             status = 0
-          }else{
+          } else {
             status = 1
           }
-          this.$post("/sso/sys/func/enable",{id:nodeModel.id,status:status})
+          this.$post("/sso/sys/func/enable", {id: nodeModel.id, status: status})
             .then(res => {
-              nodeModel.enable = status
+              nodeModel.enable = status;
               this.$notify({
                 title: '成功',
                 message: '状态修改成功',
@@ -307,61 +333,62 @@
                   message: '登录超时,请重新登录',
                   type: 'error',
                   offset: 50,
-                  duration:2000,
+                  duration: 2000,
                   onClose: function () {
                     this.$router.push("/login");
                   }
                 });
-              }else{
+              } else {
                 this.$notify({
                   title: '错误',
                   message: '网络错误,请稍后再试',
                   type: 'error',
                   offset: 50,
-                  duration:2000,
+                  duration: 2000,
                 });
               }
             });
 
-        }else {
-         return false;
+        } else {
+          return false;
         }
       },
-      upNode(nodeModel){
-        if(this.parentNodeModel.hasOwnProperty("children")) {
+      upNode(nodeModel) {
+        console.log("upNode", nodeModel);
+        if (this.parentNodeModel.hasOwnProperty("children")) {
           var index = this.parentNodeModel.children.indexOf(nodeModel);
-          if(index-1>=0) {
-            var model = this.parentNodeModel.children.splice(this.parentNodeModel.children.indexOf(nodeModel),1);
-            this.parentNodeModel.children.splice(index-1,0,model[0]);
+          if (index - 1 >= 0) {
+            var model = this.parentNodeModel.children.splice(this.parentNodeModel.children.indexOf(nodeModel), 1);
+            this.parentNodeModel.children.splice(index - 1, 0, model[0]);
           }
-        }else if(this.parentNodeModel instanceof Array){
+        } else if (this.parentNodeModel instanceof Array) {
           // 第一级根节点处理
           var index = this.parentNodeModel.indexOf(nodeModel);
-          if(index-1>=0) {
-            var model = this.parentNodeModel.splice(this.parentNodeModel.indexOf(nodeModel),1);
-            this.parentNodeModel.splice(index-1,0,model[0]);
+          if (index - 1 >= 0) {
+            var model = this.parentNodeModel.splice(this.parentNodeModel.indexOf(nodeModel), 1);
+            this.parentNodeModel.splice(index - 1, 0, model[0]);
           }
         }
       },
-      downNode(nodeModel){
-
-        if(this.parentNodeModel.hasOwnProperty("children")) {
+      downNode(nodeModel) {
+        console.log(nodeModel);
+        if (this.parentNodeModel.hasOwnProperty("children")) {
           var index = this.parentNodeModel.children.indexOf(nodeModel);
-          if(index+1<=this.parentNodeModel.children.length) {
-            var model = this.parentNodeModel.children.splice(this.parentNodeModel.children.indexOf(nodeModel),1);
-            this.parentNodeModel.children.splice(index+1,0,model[0]);
+          if (index + 1 <= this.parentNodeModel.children.length) {
+            var model = this.parentNodeModel.children.splice(this.parentNodeModel.children.indexOf(nodeModel), 1);
+            this.parentNodeModel.children.splice(index + 1, 0, model[0]);
           }
-        }else if(this.parentNodeModel instanceof Array){
+        } else if (this.parentNodeModel instanceof Array) {
           // 第一级根节点处理
           var index = this.parentNodeModel.indexOf(nodeModel);
-          if(index+1<=this.parentNodeModel.length) {
-            var model = this.parentNodeModel.splice(this.parentNodeModel.indexOf(nodeModel),1);
-            this.parentNodeModel.splice(index+1,0,model[0]);
+          if (index + 1 <= this.parentNodeModel.length) {
+            var model = this.parentNodeModel.splice(this.parentNodeModel.indexOf(nodeModel), 1);
+            this.parentNodeModel.splice(index + 1, 0, model[0]);
           }
         }
       }
     },
-    computed:{
+    computed: {
       rootClass() {
         var strRootClass = "";
 
@@ -449,6 +476,6 @@
 </script>
 
 <style>
-  @import 'font-awesome/css/font-awesome.css';
+  @import "font-awesome/css/font-awesome.css";
 </style>
 
diff --git a/mgrserver/src/components/vue-tree.vue b/mgrserver/src/components/vue-tree.vue
index 975f5e3..d294be1 100644
--- a/mgrserver/src/components/vue-tree.vue
+++ b/mgrserver/src/components/vue-tree.vue
@@ -1,7 +1,7 @@
 <style>
-  div.ztree_content_wrap {height:680px; }
+  div.ztree_content_wrap {height:100%; }
   div.ztree_content_wrap div.left{float: left;width: 100%;}
-  div.zTreeDemoBackground {width:100%;height:500px;text-align:left;}
+  div.zTreeDemoBackground {width:100%;height:100%;text-align:left;}
 
   .expendIcon {
     background-position: -74px -36px;
@@ -128,15 +128,17 @@
   .disablefont {
     color: #96abbb;
   }
+  .qx-add-scrollbox{ overflow-y: auto; overflow-x: hidden;}
+
 </style>
 
 <template>
   <!--（ztree－🌲）-->
   <div class="ztree_content_wrap" v-if='treeDataSource.length>0'>
     <div class="zTreeDemoBackground left">
-      <div class="row pre-scrollable">
+      <div class="row qx-add-scrollbox">
       <ul class="ztree">
-        <ztree-item v-for='(m,i) in treeDataSource' :key='i' :model.sync="m" :num.sync='i' root='0' :nodes.sync='treeDataSource.length' :ischeck='isCheck' :callback='func' :expandfunc='expand' :cxtmenufunc='contextmenu' :trees.sync='treeDataSource'></ztree-item>
+        <ztree-item v-for='(m,i) in treeDataSource' :key='i' :model.sync="m" :num.sync='i' root='0' :nodes.sync='treeDataSource.length' :ischeck='isCheck' :callback='func' :checkfunc='checkfunc' :expandfunc='expand' :cxtmenufunc='contextmenu' :trees.sync='treeDataSource'></ztree-item>
       </ul>
       </div>
     </div>
@@ -166,6 +168,10 @@
         type: Function,
         default: null
       },
+      checkfunc:{
+        type:Function,
+        default: null
+      },
       // 点击展开回调
       expand: {
         type: Function,
diff --git a/mgrserver/src/main.js b/mgrserver/src/main.js
index 437073b..c07f8bf 100644
--- a/mgrserver/src/main.js
+++ b/mgrserver/src/main.js
@@ -1,13 +1,13 @@
 // The Vue build version to load with the `import` command
 // (runtime-only or standalone) has been set in webpack.base.conf with an alias.
-require('bootstrap')
+import "jquery"
+import "bootstrap"
+
 import Vue from 'vue'
 import Vuex from 'vuex'
 import App from './App'
 import router from './router'
-import $ from 'jquery'
-//import 'bootstrap/dist/js/bootstrap.min'
-//import '@/assets/app.css'
+
 import VeeValidate from 'vee-validate';
 import store from './store'
 import 'vue-tree-halower/dist/halower-tree.min.css'
@@ -25,10 +25,7 @@ import {
     del
 } from './services/http'
 
-import {
-    ws,
-    wssend
-} from './services/ws'
+
 
 import VueCookies from 'vue-cookies'
 
@@ -44,8 +41,8 @@ Vue.prototype.$fetch = fetch;
 Vue.prototype.$patch = patch;
 Vue.prototype.$put = put;
 Vue.prototype.$del = del;
-Vue.prototype.$wssend = wssend;
-Vue.prototype.$ws = ws;
+
+
 Vue.config.productionTip = false;
 
   /* eslint-disable no-new */
diff --git a/mgrserver/src/pages/member/menu.new.vue b/mgrserver/src/pages/member/menu.new.vue
new file mode 100644
index 0000000..f8d8e62
--- /dev/null
+++ b/mgrserver/src/pages/member/menu.new.vue
@@ -0,0 +1,209 @@
+<template>
+  <div id="app">
+    <nav-menu
+      :menus="menus"
+      :copyright="copyright"
+      :themes="themes"
+      :logo="logo"
+      :systemName="systemName"
+      :headpic="headpic"
+      :userinfo="userinfo"
+      :pwd="pwd"
+      ref="NewTap"
+    >
+      <keep-alive>
+        <router-view v-if="$route.meta.keepAlive" @addTab="addTab" @close="close" @setTab="setTab" ></router-view>
+      </keep-alive>
+      <router-view v-if="!$route.meta.keepAlive" @addTab="addTab" @close="close" @setTab="setTab"></router-view>
+      <!--<router-view  @addTab="addTab" @close="close"></router-view>-->
+    </nav-menu>
+    <!-- Add Form -->
+    <el-dialog title="修改密码" width="30%" :visible.sync="dialogAddVisible">
+      <el-form :model="updateInfo" :rules="rules" ref="addForm">
+
+        <el-form-item label="请输入原密码" prop="password_old">
+          <el-input type="password" v-model="updateInfo.password_old"  ></el-input>
+        </el-form-item>
+
+        <el-form-item label="请输入新密码" prop="password">
+          <el-input type="password" v-model="updateInfo.password"  ></el-input>
+        </el-form-item>
+
+        <el-form-item label="请确认密码" prop="checkPass">
+          <el-input type="password" v-model="updateInfo.checkPass"  ></el-input>
+        </el-form-item>
+
+      </el-form>
+      <div slot="footer" >
+        <button class="btn btn-sm btn-primary" @click="resetForm('addForm')">取 消</button>
+        <button class="btn btn-sm btn-danger"  @click="add('addForm')">确 定</button>
+      </div>
+
+    </el-dialog>
+    <!--Add Form -->
+  </div>
+</template>
+
+<script>
+  import navMenu from 'nav-menu'; // 引入
+  export default {
+    name: 'app',
+    data () {
+
+      var validatePass = (rule, value, callback) => {
+        if (value === '') {
+          callback(new Error('请输入密码'));
+        } else {
+          if (this.updateInfo.checkPass !== '') {
+            this.$refs.addForm.validateField('checkPass');
+          }
+          callback();
+        }
+      };
+      var validatePass2 = (rule, value, callback) => {
+        if (value === '') {
+          callback(new Error('请再次输入密码'));
+        } else if (value !== this.updateInfo.password) {
+          callback(new Error('两次输入密码不一致!'));
+        } else {
+          callback();
+        }
+      };
+      return {
+        headpic: "http://sso2.100bm.cn:6888/static/img/a0.jpg",
+        logo: "http://sso2.100bm.cn:6888/static/img/d663155de6dc8e060415bbcd891cb9d4.png",
+        copyright: "2018 admin-web", //版权信息
+        themes: "bg-danger|bg-danger|bg-dark light-danger", //顶部左侧背景颜色,顶部右侧背景颜色,右边菜单背景颜色
+        menus: [{}],  //菜单数据
+        systemName: "admin-web 系统",  //系统名称
+        userinfo: {},
+        indexUrl: "/",
+        dialogAddVisible:false,     //添加表单显示隐藏
+        updateInfo:{
+          password_old: "",
+          password: "",
+          checkPass: "",
+        },
+        rules: {                    //数据验证规则
+          password_old: [
+            { required: true, message: "请输入原密码", trigger: "blur" }
+          ],
+          password: [
+            { required: true, message: "请输入新密码", trigger: "blur" },
+            { validator: validatePass, trigger: 'change' }
+          ],
+          checkPass: [
+            { required: true, message: "请确认密码", trigger: "blur" },
+            { validator: validatePass2, trigger: 'change' }
+          ],
+        },
+
+      }
+    },
+    components:{ //注册插件
+      navMenu
+    },
+    created(){
+      this.getAllDictionaryData();
+      this.getMenu();
+    },
+    mounted(){
+      this.$get("/member/getsysinfo",{})
+        .then(res=>{
+          console.log("系统信息",res);
+          this.systemName =res.name;
+          this.logo = res.logo;
+          this.themes = res.theme;
+          if (res.index_url){
+            this.indexUrl  = res.index_url
+          }
+          this.$refs.NewTap.add("首页", this.indexUrl ,{});   //设置默认页面
+        }).catch(err=>{
+        console.log(err)
+      });
+
+      this.userinfo = JSON.parse(sessionStorage.getItem("userinfo"));
+      document.title = "用户权限系统";
+    },
+    methods:{
+      pwd(val){
+
+        this.dialogAddVisible = val;
+      },
+      resetForm(formName) {
+        this.dialogAddVisible = false;
+        this.$refs[formName].resetFields();
+      },
+      add(formName){
+        // console.log(this.addData)
+        this.$refs[formName].validate((valid) => {
+          if (valid) {
+            this.$get("/member/changepwd",{
+              password_old : this.updateInfo.password_old,
+              password : this.updateInfo.password,
+            }).then(res=>{
+              this.$notify({
+                title:'成功',
+                message:'修改操作完成',
+                type:'success'
+              });
+              this.dialogAddVisible = false;
+              this.$refs[formName].resetFields();
+            }).catch(errro=>{
+              this.$notify({
+                title:'失败',
+                message:"原密码错误或密码修改次数超过限制",
+                type:'error'
+              });
+              this.$refs[formName].resetFields();
+            })
+          } else {
+            console.log('error submit!!');
+            return false;
+          }
+        });
+      },
+
+      getMenu(){
+        this.$get("/sso/menu")
+          .then(res => {
+            this.menus = res;
+          })
+          .catch(err => {
+            console.log(err)
+          });
+      },
+      //@name 标签名称
+      //@path 路由
+      //@obj  路由参数 类型：Object
+      addTab(name,path,obj){
+        this.$refs.NewTap.add(name,path,obj);   //调用组件方法，添加一个页面
+      },
+      close(v){
+        this.$refs.NewTap.closeTab(v);
+      },
+      setTab(name,path,obj){
+        console.log("outer",name,path,obj);
+        this.$refs.NewTap.set(name,path,obj);
+      },
+      // 获取枚举字典
+      getAllDictionaryData(){
+        this.$post('/base/dictionary/info/getall', {})
+          .then(response=>{
+            // console.log(response);
+            this.EnumUtility.Set(response.list);
+
+          })
+          .catch(error=>{
+            console.error("获取数据字典失败,error:",error)
+
+          });
+      },
+
+    }
+  }
+</script>
+
+<style scoped>
+
+</style>
diff --git a/mgrserver/src/pages/member/menu.vue b/mgrserver/src/pages/member/menu.vue
index b4e50b9..95218d2 100644
--- a/mgrserver/src/pages/member/menu.vue
+++ b/mgrserver/src/pages/member/menu.vue
@@ -1,5 +1,5 @@
 <template>
-  <div>
+  <div id="app">
     <nav-menu
       :menus="menus"
       :copyright="copyright"
@@ -7,52 +7,200 @@
       :logo="logo"
       :systemName="systemName"
       :headpic="headpic"
+      :userinfo="userinfo"
+      :pwd="pwd"
       ref="NewTap"
     >
-      <router-view  @addTab="addTab" />
+      <keep-alive>
+        <router-view v-if="$route.meta.keepAlive" @addTab="addTab" @close="close" @setTab="setTab" ></router-view>
+      </keep-alive>
+      <router-view v-if="!$route.meta.keepAlive" @addTab="addTab" @close="close" @setTab="setTab"></router-view>
+      <!--<router-view  @addTab="addTab" @close="close"></router-view>-->
     </nav-menu>
+    <!-- Add Form -->
+    <el-dialog title="修改密码" width="30%" :visible.sync="dialogAddVisible">
+      <el-form :model="updateInfo" :rules="rules" ref="addForm">
 
+        <el-form-item label="请输入原密码" prop="password_old">
+          <el-input type="password" v-model="updateInfo.password_old"  ></el-input>
+        </el-form-item>
+
+        <el-form-item label="请输入新密码" prop="password">
+          <el-input type="password" v-model="updateInfo.password"  ></el-input>
+        </el-form-item>
+
+        <el-form-item label="请确认密码" prop="checkPass">
+          <el-input type="password" v-model="updateInfo.checkPass"  ></el-input>
+        </el-form-item>
+
+      </el-form>
+      <div slot="footer" >
+        <button class="btn btn-sm btn-primary" @click="resetForm('addForm')">取 消</button>
+        <button class="btn btn-sm btn-danger"  @click="add('addForm')">确 定</button>
+      </div>
+
+    </el-dialog>
+    <!--Add Form -->
   </div>
 </template>
 
 <script>
-
   import navMenu from 'nav-menu'; // 引入
   export default {
     name: 'app',
     data () {
+
+      var validatePass = (rule, value, callback) => {
+        if (value === '') {
+          callback(new Error('请输入密码'));
+        } else {
+          if (this.updateInfo.checkPass !== '') {
+            this.$refs.addForm.validateField('checkPass');
+          }
+          callback();
+        }
+      };
+      var validatePass2 = (rule, value, callback) => {
+        if (value === '') {
+          callback(new Error('请再次输入密码'));
+        } else if (value !== this.updateInfo.password) {
+          callback(new Error('两次输入密码不一致!'));
+        } else {
+          callback();
+        }
+      };
       return {
-        headpic:"http://sso2.100bm.cn:6888/static/img/a0.jpg",  //头像
-        logo:"http://sso2.100bm.cn:6888/static/img/d879a953c0dc59a7564a861000aaeac3.png",
-        copyright:"2018 四川千行你我科技有限公司", //版权信息
-        themes:"bg-info|bg-danger|bg-dark", //顶部左侧背景颜色,顶部右侧背景颜色,右边菜单背景颜色
-        menus:[{}],  //菜单数据
-        systemName:"用户权限系统"  //系统名称
+        headpic: "http://sso2.100bm.cn:6888/static/img/a0.jpg",
+        logo: "http://sso2.100bm.cn:6888/static/img/d663155de6dc8e060415bbcd891cb9d4.png",
+        copyright: "2018 admin-web", //版权信息
+        themes: "bg-danger|bg-danger|bg-dark light-danger", //顶部左侧背景颜色,顶部右侧背景颜色,右边菜单背景颜色
+        menus: [{}],  //菜单数据
+        systemName: "用户权限系统",  //系统名称
+        userinfo: {name:'wule',role:"管理员"},
+        indexUrl: "/user/index",
+        dialogAddVisible:false,     //添加表单显示隐藏
+        updateInfo:{
+          password_old: "",
+          password: "",
+          checkPass: "",
+        },
+        rules: {                    //数据验证规则
+          password_old: [
+            { required: true, message: "请输入原密码", trigger: "blur" }
+          ],
+          password: [
+            { required: true, message: "请输入新密码", trigger: "blur" },
+            { validator: validatePass, trigger: 'change' }
+          ],
+          checkPass: [
+            { required: true, message: "请确认密码", trigger: "blur" },
+            { validator: validatePass2, trigger: 'change' }
+          ],
+        },
+
       }
     },
     components:{ //注册插件
       navMenu
     },
+    created(){
+      //this.getAllDictionaryData();
+      this.getMenu();
+    },
     mounted(){
+      // this.$get("/member/getsysinfo",{})
+      //   .then(res=>{
+      //     console.log("系统信息",res);
+      //     this.systemName =res.name;
+      //     this.logo = res.logo;
+      //     this.themes = res.theme;
+      //     if (res.index_url){
+      //       this.indexUrl  = res.index_url
+      //     }
+      //     this.$refs.NewTap.add("首页", this.indexUrl ,{});   //设置默认页面
+      //   }).catch(err=>{
+      //   console.log(err)
+      // });
+      this.$refs.NewTap.add("首页", this.indexUrl ,{});
+
+      //this.userinfo = JSON.parse(sessionStorage.getItem("userinfo"));
       document.title = "用户权限系统";
-      this.getMenu();
-      //向组件添加一个自定义标签，点击标签会路由到一个页面
-      this.$refs.NewTap.add("用户管理","/user/index");   //设置默认页面
     },
     methods:{
+      pwd(val){
+
+        this.dialogAddVisible = val;
+      },
+      resetForm(formName) {
+        this.dialogAddVisible = false;
+        this.$refs[formName].resetFields();
+      },
+      add(formName){
+        // console.log(this.addData)
+        this.$refs[formName].validate((valid) => {
+          if (valid) {
+            this.$get("/member/changepwd",{
+              password_old : this.updateInfo.password_old,
+              password : this.updateInfo.password,
+            }).then(res=>{
+              this.$notify({
+                title:'成功',
+                message:'修改操作完成',
+                type:'success'
+              });
+              this.dialogAddVisible = false;
+              this.$refs[formName].resetFields();
+            }).catch(errro=>{
+              this.$notify({
+                title:'失败',
+                message:"原密码错误或密码修改次数超过限制",
+                type:'error'
+              });
+              this.$refs[formName].resetFields();
+            })
+          } else {
+            console.log('error submit!!');
+            return false;
+          }
+        });
+      },
+
       getMenu(){
-        this.$post("/sso/menu")
+        this.$fetch("/sso/menu")
           .then(res => {
-
             this.menus = res;
           })
           .catch(err => {
             console.log(err)
           });
       },
-      addTab(name,path){
-        this.$refs.NewTap.add(name,path);   //调用组件方法，添加一个页面
-      }
+      //@name 标签名称
+      //@path 路由
+      //@obj  路由参数 类型：Object
+      addTab(name,path,obj){
+        this.$refs.NewTap.add(name,path,obj);   //调用组件方法，添加一个页面
+      },
+      close(v){
+        this.$refs.NewTap.closeTab(v);
+      },
+      setTab(name,path,obj){
+        console.log("outer",name,path,obj);
+        this.$refs.NewTap.set(name,path,obj);
+      },
+      // 获取枚举字典
+      getAllDictionaryData(){
+        this.$post('/base/dictionary/info/getall', {})
+          .then(response=>{
+            // console.log(response);
+            this.EnumUtility.Set(response.list);
+
+          })
+          .catch(error=>{
+            console.error("获取数据字典失败,error:",error)
+
+          });
+      },
+
     }
   }
 </script>
diff --git a/mgrserver/src/pages/role/index.new.vue b/mgrserver/src/pages/role/index.new.vue
new file mode 100644
index 0000000..6f5e0ee
--- /dev/null
+++ b/mgrserver/src/pages/role/index.new.vue
@@ -0,0 +1,347 @@
+<!--角色基础信息查询-->
+<template>
+  <div ref="main">
+
+    <div class="panel panel-default">
+      <div class="panel panel-default">
+        <div class="panel-body">
+          <form class="form-inline" role="form">
+            <div class="form-group">
+              <label class="sr-only" >角色名</label>
+              <input type="text" class="form-control" v-model="paging.role_name"  placeholder="请输入角色名">
+            </div>
+            <a class="btn btn-success" @click="searchClick" >查询</a>
+            <a class="btn btn-primary" @click="showModal(1,{})" >添加角色</a>
+          </form>
+        </div>
+      </div>
+
+      <el-scrollbar style="height:100%">
+        <el-table :data="datalist.items" stripe  style="width: 100%">
+
+          <el-table-column width="200" prop="role_name" label="角色名" ></el-table-column>
+
+          <el-table-column  width="180" prop="status" label="状态" >
+            <template slot-scope="scope">
+
+              <el-tag type="success" v-if="scope.row.status == 0">{{scope.row.status_label}}</el-tag>
+              <el-tag type="info" v-if="scope.row.status == 2">{{scope.row.status_label}}</el-tag>
+            </template>
+          </el-table-column>
+
+          <el-table-column prop="create_time" label="创建时间" >
+            <template slot-scope="scope">
+              <i class="el-icon-time"></i>
+              <span style="margin-left: 10px">{{ scope.row.create_time }}</span>
+            </template>
+          </el-table-column>
+
+          <el-table-column  label="操作">
+            <template slot-scope="scope">
+              <el-button plain type="primary" size="mini" @click="showModal(0,scope.row)">编辑</el-button>
+              <el-button plain type="success" size="mini" @click="roleChange(0,scope.row.role_id)" v-if="scope.row.status == 2" >启用</el-button>
+              <el-button plain type="info" size="mini" @click="roleChange(2,scope.row.role_id)" v-if="scope.row.status == 0">禁用</el-button>
+
+              <el-button plain  type="danger" size="mini" @click="roleDel(scope.row.role_id)">删除</el-button>
+
+            </template>
+          </el-table-column>
+        </el-table>
+
+      </el-scrollbar>
+
+      <el-dialog   width="30%"  @closed="closed" :visible.sync="dialogFormVisible">
+        <div slot="title">
+          {{isAdd == 1 ? "添加角色" : "编辑角色"}}
+        </div>
+
+        <el-form :model="roleInfo"  >
+          <el-form-item label="角色名">
+            <el-input clearable v-model="roleInfo.role_name"
+                      placeholder="请输入角色名">
+
+            </el-input>
+          </el-form-item>
+          <el-form-item label="是否启用" v-if="isAdd == 1">
+            <el-checkbox  clearable v-model="roleInfo.status">
+
+            </el-checkbox>
+          </el-form-item>
+
+        </el-form>
+        <div slot="footer" class="dialog-footer">
+          <el-button size="small" @click="dialogFormVisible = false">取 消</el-button>
+          <el-button type="success" size="small" @click="submitUser">确 定</el-button>
+        </div>
+      </el-dialog>
+
+      <div class="page-pagination">
+        <el-pagination
+          @size-change="handleSizeChange"
+          @current-change="pageChange"
+          :current-page="paging.pi"
+          :page-size="paging.ps"
+          :page-sizes="pageSizes"
+          layout="total, sizes, prev, pager, next, jumper"
+          :total="totalpage">
+        </el-pagination>
+      </div>
+
+    </div>
+
+  </div>
+</template>
+<script>
+import pager from "vue-simple-pager";
+import PullTo from 'vue-pull-to';
+export default {
+  components: {
+    "bootstrap-modal": require("vue2-bootstrap-modal"),
+    pager: pager,
+    PullTo
+  },
+  data() {
+    return {
+      title:()=>{
+        if (this.isAdd == 1){
+            return "添加"
+        }else{
+          return "编辑"
+        }
+      },
+      editOrAddData:{},
+      dialogFormVisible:false,
+      paging: { ps: 10, pi: 1, role_name: "" },
+      pageSizeList: [5, 10, 20, 50], //可选显示数据条数
+      datalist: { count: 0, items: [] },
+      totalpage: 0,
+      isShowLog: false,
+      isAdd: 1,
+      selectRole: {},
+      roleInfo: {
+        role_name: "",
+        role_id: -1,
+        status: 0,
+        is_add: 2
+      }
+    };
+  },
+  mounted() {
+    this.$refs.main.style.height = document.documentElement.clientHeight + 'px';
+    this.queryData();
+  },
+  methods: {
+    closed(){
+      console.log("colsed")
+      // this.query()
+    },
+    loadmore: function(loaded) {
+      return new Promise(function(resolve, reject) {
+        setTimeout(function() {
+          loaded("done");
+        }, 1000);
+      });
+    },
+    next(){
+      let pi = this.paging.pi
+      this.paging.pi = pi + 1;
+      this.$post("/sso/role", this.paging)
+        .then(res => {
+          if(res.list.length <= 0) {
+            this.paging.pi = pi
+            return false
+          }
+          this.datalist.items = this.datalist.items.concat(res.list);
+          this.datalist.count = new Number(res.count);
+          this.totalpage = Math.ceil(this.datalist.count / this.paging.ps);
+        })
+        .catch(err => {
+          if (err.response.status == 403) {
+            this.$router.push("/login");
+          }else{
+            this.$notify({
+              title: '错误',
+              message: '网络错误,请稍后再试',
+              type: 'error',
+              offset: 50,
+              duration:2000,
+            });
+          }
+        });
+    },
+    queryData: function() {
+      if (this.paging.pi == 0) {
+        this.paging.pi = 1;
+      }
+      this.$fetch("/sso/role", this.paging)
+        .then(res => {
+          this.datalist.items = res.list;
+          this.datalist.count = new Number(res.count);
+          this.totalpage = res.count;
+        })
+        .catch(err => {
+          if (err.response.status == 403) {
+            this.$router.push("/login");
+          }else{
+            this.$notify({
+              title: '错误',
+              message: '网络错误,请稍后再试',
+              type: 'error',
+              offset: 50,
+              duration:2000,
+            });
+          }
+        });
+    },
+    pageChange: function(data) {
+      this.paging.pi = data;
+      this.queryData();
+    },
+    handleSizeChange(val){
+      this.paging.ps = val;
+      this.queryData()
+    },
+    searchClick: function() {
+      this.paging.pi = 1;
+      this.queryData();
+    },
+
+    showModal: function(i, j) {
+      if (i == 1) {
+        this.isAdd = 1;
+        this.roleInfo.role_name = "";
+        this.roleInfo.role_id = -1;
+        this.roleInfo.status = 0;
+        this.roleInfo.is_add = 1;
+      } else {
+        this.isAdd = 0;
+        this.roleInfo.role_name = j.role_name;
+        this.roleInfo.role_id = j.role_id;
+        this.roleInfo.status = j.status;
+        this.roleInfo.is_add = 2;
+      }
+      this.dialogFormVisible =true
+      //this.$refs.editModal.open();
+    },
+    roleChange: function(ests, roleid) {
+      var role = { status: ests, role_id: roleid };
+      this.$confirm("确认执行该操作吗?, 是否继续?", "提示", {
+        confirmButtonText: "确定",
+        cancelButtonText: "取消",
+        type: "warning"
+      }).then(() => {
+        this.$put("/sso/role", role)
+          .then(res => {
+            this.queryData();
+            this.$notify({
+              title: '成功',
+              message: '状态修改成功',
+              type: 'success',
+              offset: 50,
+              duration:2000
+            });
+          })
+          .catch(err => {
+
+            this.$notify({
+              title: '错误',
+              message: '网络错误,请稍后再试',
+              type: 'error',
+              offset: 50,
+              duration:2000,
+            });
+
+          });
+
+      }).catch(() => {
+        this.$message({
+          type: "info",
+          message: "已取消删除"
+        });
+      });
+
+    },
+    roleDel: function(roleid) {
+      var role = {data:{ role_id: roleid }};
+
+      this.$confirm("此操作将永久删除该数据, 是否继续?", "提示", {
+        confirmButtonText: "确定",
+        cancelButtonText: "取消",
+        type: "warning"
+      }).then(() => {
+        this.$del("/sso/role", role)
+          .then(res => {
+            this.queryData();
+            this.$notify({
+              title: '成功',
+              message: '删除成功',
+              type: 'success',
+              offset: 50,
+              duration:2000,
+            });
+          })
+          .catch(err => {
+            this.$notify({
+              title: '错误',
+              message: '网络错误,请稍后再试',
+              type: 'error',
+              offset: 50,
+              duration:2000,
+            });
+          });
+
+      }).catch(() => {
+        this.$message({
+          type: "info",
+          message: "已取消删除"
+        });
+      });
+
+    },
+    submitUser() {
+      this.$validator.validate().then(result => {
+        if (!result) {
+          return false;
+        } else {
+          if (this.isAdd == 1) {
+            this.roleInfo.is_add = 1;
+
+            if (this.roleInfo.status) {
+              this.roleInfo.status = 0;
+            } else {
+              this.roleInfo.status = 2;
+            }
+          }
+
+          this.$post("/sso/role", this.roleInfo)
+            .then(res => {
+              this.dialogFormVisible=false;
+              this.queryData();
+            })
+            .catch(err => {
+                this.$notify({
+                  title: '错误',
+                  message: '网络错误,请稍后再试',
+                  type: 'error',
+                  offset: 50,
+                  duration:2000,
+                });
+            });
+        }
+      });
+    },
+    auth(id) {
+      this.$router.push({
+        name: "roleauth",
+        query: {
+          role_id: id
+        }
+      });
+    }
+  }
+};
+</script>
+
+<style scoped>
+  .page-pagination{padding: 10px 15px;text-align: right;}
+</style>
diff --git a/mgrserver/src/pages/system/func.index.vue b/mgrserver/src/pages/system/func.index.vue
index d56efc8..cff1a33 100644
--- a/mgrserver/src/pages/system/func.index.vue
+++ b/mgrserver/src/pages/system/func.index.vue
@@ -3,7 +3,7 @@
   <div class="app-content-body fade-in-up ng-scope">
     <div class="fade-in-down ng-scope">
       <div class="wrapper wrapper-lg">
-            <vue-ztree :list='ztreeDataSource' :func='nodeClick' :expand='expandClick'
+            <vue-ztree :list='ztreeDataSource' :func='nodeClick' :checkfunc="checkFunc" :expand='expandClick'
                        :contextmenu='contextmenuClick' :is-open='true'></vue-ztree>
       </div>
     </div>
@@ -647,10 +647,16 @@ export default {
     },
     editFunc() {
       let data = this.currentData;
+      let icon;
+      if (data.iconTemp == ""){
+          icon = data.icon
+      }else{
+          icon = data.iconTemp + " " + data.color
+      }
           this.$put("/sso/sys/func", {
             id: data.id,
             name: data.name,
-            icon: data.iconTemp + " " + data.color,
+            icon: icon,
             path: data.path,
             is_open: data.is_open,
           })
@@ -765,6 +771,10 @@ export default {
         }
       }
     },
+    //点击选中
+    checkFunc(m) {
+      console.log("m",m)
+    },
     // 右击事件
     contextmenuClick: function(m) {},
     // 点击展开收起
diff --git a/mgrserver/src/pages/system/sys.index.new.vue b/mgrserver/src/pages/system/sys.index.new.vue
new file mode 100644
index 0000000..8d4b0a1
--- /dev/null
+++ b/mgrserver/src/pages/system/sys.index.new.vue
@@ -0,0 +1,1297 @@
+//系统管理,查询，添加，编辑，禁用
+<template>
+  <div ref="main">
+
+    <div class="panel panel-default">
+      <div class="panel panel-default">
+        <div class="panel-body">
+          <form class="form-inline">
+            <div class="form-group">
+              <label class="sr-only">系统名</label>
+              <input type="text" class="form-control" v-model="sysname" placeholder="请输入系统名称">
+            </div>
+            <div class="form-group">
+              <label class="col-sm-2 control-label sr-only">状态</label>
+              <select  class="form-control visible-md  visible-lg" v-model="selected">
+                <option value="" selected="selected" >---请选择状态---</option>
+                <option value="0">禁用</option>
+                <option value="1">启用</option>
+              </select>
+            </div>
+            <a class="visible-xs-inline visible-sm-inline visible-md-inline  visible-lg-inline btn btn btn-success" @click="query">查询</a>
+            <span ng-controller="ModalDemoCtrl">
+              <script type="text/ng-template" id="myModalContent.html">
+                <div ng-include="'src/pages/user/index/add.vue'"></div>
+              </script>
+              <a class="visible-sm-inline visible-md-inline  visible-lg-inline btn btn-primary" ref="addsys" @click="openAdd">添加</a>
+            </span>
+          </form>
+        </div>
+      </div>
+      <el-scrollbar style="height:100%">
+        <el-table :data="datalist" stripe  style="width: 100%">
+
+          <el-table-column width="100" prop="id" label="编号" ></el-table-column>
+          <el-table-column width="200" prop="name" label="系统名称" ></el-table-column>
+          <el-table-column width="200" prop="index_url" label="首页地址" ></el-table-column>
+
+          <el-table-column  width="150" prop="enable" label="状态" >
+            <template slot-scope="scope">
+
+              <el-tag type="info" v-if="scope.row.enable == 0">禁用</el-tag>
+              <el-tag type="success" v-if="scope.row.enable == 1">启用</el-tag>
+            </template>
+          </el-table-column>
+          <el-table-column width="100" prop="login_timeout" label="超时时长" ></el-table-column>
+
+          <el-table-column width="200" prop="logo" label="logo" >
+            <template slot-scope="scope">
+              <img v-if="scope.row.theme" :class="scope.row.theme.split('|')[0]"
+                   :src="scope.row.logo" :onerror="errorImg" alt="">
+
+            </template>
+          </el-table-column>
+
+          <el-table-column width="300" prop="secret" label="secret" ></el-table-column>
+
+          <el-table-column  label="操作">
+            <template slot-scope="scope">
+              <el-button plain type="primary" size="mini" @click="edit(scope.row.id)">编辑</el-button>
+              <el-button plain type="success" size="mini" @click="enable(scope.row.id,1)" v-if="scope.row.enable == 0" >启用</el-button>
+
+              <el-button plain type="info" size="mini" @click="enable(scope.row.id,0)" v-if="scope.row.enable == 1">禁用</el-button>
+
+              <el-button plain  type="danger" size="mini" @click="deleteById(scope.row.id)">删除</el-button>
+
+              <el-button plain  type="warning" size="mini" @click="manage(scope.row.id)">管理</el-button>
+
+            </template>
+          </el-table-column>
+        </el-table>
+
+      </el-scrollbar>
+      <div class="page-pagination">
+        <el-pagination
+          @size-change="handleSizeChange"
+          @current-change="goPage"
+          :current-page="pi"
+          :page-size="ps"
+          :page-sizes="pageSizeList"
+          layout="total, sizes, prev, pager, next, jumper"
+          :total="totalPage">
+        </el-pagination>
+      </div>
+
+
+
+    <bootstrap-modal ref="theModal" :need-header="true" :need-footer="true" >
+      <div slot="title">
+        删除系统
+      </div>
+      <div slot="body">
+        确定删除系统？
+      </div>
+      <div slot="footer">
+        <a class="btn btn-sm btn-danger" @click="ok">确定</a>
+        <a class="btn btn-sm btn-primary" @click="cancel">取消</a>
+      </div>
+    </bootstrap-modal>
+    <bootstrap-modal ref="deletOkModal" :need-header="true" :need-footer="false" >
+      <div slot="title">
+        提示
+      </div>
+      <div slot="body">
+        删除成功
+      </div>
+      <div slot="footer">
+        <a class="btn btn-sm btn-primary" @click="cancel">确定</a>
+      </div>
+    </bootstrap-modal>
+    <bootstrap-modal ref="addModal" :need-header="true" :need-footer="true">
+      <div slot="title">
+        添加系统
+      </div>
+      <div slot="body">
+        <div class="panel panel-default">
+          <div class="panel-body">
+            <form role="form" class="ng-pristine ng-valid ng-submitted height-min">
+              <div class="form-group">
+                <label>系统名称</label>
+                <input class="form-control" placeholder="请输入系统名称" v-validate="'required'" name="name" v-model="addData.name"  type="text">
+                <div class="form-height text-danger"><span v-show="errors.first('name')">系统名称不能为空</span></div>
+              </div>
+              <div class="form-group">
+                <label>系统英文名称</label>
+                <input class="form-control" placeholder="请输入系统英文名称" v-validate="'required|alpha'" name="name-e" v-model="addData.ident"  type="text">
+                <div class="form-height text-danger"><span v-show="errors.first('name-e')">系统英文名称不能为空且为字母</span></div>
+              </div>
+              <div class="form-group">
+                <label>首页地址</label>
+                <input class="form-control" placeholder="请输入首页地址" v-validate="'required'" name="addr" v-model="addData.addr"  type="text">
+                <div class="form-height text-danger"><span v-show="errors.first('addr')">首页地址不能为空</span></div>
+              </div>
+              <div class="form-group">
+                <label>超时时常</label>
+                <input class="form-control" placeholder="请输入超时时常" v-validate="'required|numeric'" v-model="addData.time_out" name="time_out"  type="text">
+                <div class="form-height text-danger"><span v-show="errors.first('time_out')">超时时常不能为空且必须为数字</span> </div>
+              </div>
+              <div class="form-group">
+                <label>secret</label>
+                <input class="form-control" placeholder="请输系统签名所需的secret" v-validate="'required'" v-model="addData.secret" name="secret"  type="text">
+                <div class="form-height text-danger"><span v-show="errors.first('secret')">secret不能为空</span> </div>
+              </div>
+              <div class="form-group">
+                <!--<label>logo</label>-->
+                <input class="form-control" placeholder="logo地址" v-validate="'required'" name="logo" v-model="addData.logo"  readonly>
+                <!--<div class="form-height text-danger"> <span v-show="errors.first('logo')">logo地址不能为空</span> </div>-->
+                <uploader :options="options" class="uploader-example" :file-status-text="statusText"   ref="uploader" @file-success="fileSuccess" @file-error="fileError">
+                  <uploader-unsupport></uploader-unsupport>
+                  <uploader-drop>
+                    <p>上传logo</p>
+                    <uploader-btn :attrs="attrs">选择图片</uploader-btn>
+                  </uploader-drop>
+                  <uploader-list></uploader-list>
+                </uploader>
+              </div>
+              <div class="form-group">
+                <div class="settings">
+                  <div class="container">
+                    <div class="row">
+                      <div class="col col-lg-2-4">
+                        <div class="panel-body ng-scope">
+                          <div class="m-b-sm">
+                            <label class="i-switch bg-info pull-right">
+                              <input type="checkbox" v-model="addData.style" class="ng-pristine ng-untouched ng-valid"  value="app-header-fixed">
+                              <i></i>
+                            </label>
+                            Fixed header
+                          </div>
+                          <div class="m-b-sm">
+                            <label class="i-switch bg-info pull-right">
+                              <input type="checkbox" v-model="addData.style" class="ng-pristine ng-untouched ng-valid"  value="app-aside-fixed">
+                              <i></i>
+                            </label>
+                            Fixed aside
+                          </div>
+                          <div class="m-b-sm">
+                            <label class="i-switch bg-info pull-right">
+                              <input type="checkbox" v-model="addData.style" class="ng-pristine ng-untouched ng-valid"  value="app-aside-folded">
+                              <i></i>
+                            </label>
+                            Folded aside
+                          </div>
+                          <div class="m-b-sm">
+                            <label class="i-switch bg-info pull-right">
+                              <input type="checkbox" v-model="addData.style" class="ng-pristine ng-untouched ng-valid"  value="app-aside-dock">
+                              <i></i>
+                            </label>
+                            Dock aside
+                          </div>
+                          <div>
+                            <label class="i-switch bg-info pull-right">
+                              <input type="checkbox" v-model="addData.style" class="ng-pristine ng-untouched ng-valid"  value="container">
+                              <i></i>
+                            </label>
+                            Boxed layout
+                          </div>
+                        </div>
+                      </div>
+                      <div class="col col-lg-2-4">
+                        <div class="wrapper b-t b-light bg-light lter r-b ng-scope">
+                          <div class="row row-sm">
+                            <div class="col-xs-6">
+                              <label class="i-checks block m-b-sm" ng-click="
+          app.settings.navbarHeaderColor='bg-black';
+          app.settings.navbarCollapseColor='bg-white-only';
+          app.settings.asideColor='bg-black';
+         " role="button" tabindex="0">
+                                <input type="radio" name="a" ng-model="app.settings.themeID" v-model="addData.theme"
+                                       value="bg-black|bg-white|bg-black black-black" class="ng-pristine ng-untouched ng-valid" aria-checked="true" tabindex="0" aria-invalid="false">
+                                <span class="block bg-light clearfix pos-rlt">
+            <span class="active pos-abt w-full h-full bg-black-opacity text-center">
+              <i class="glyphicon glyphicon-ok text-white m-t-xs"></i>
+            </span>
+            <b class="bg-black header"></b>
+            <b class="bg-white header"></b>
+            <b class="bg-black black-black"></b>
+          </span>
+                              </label>
+
+                              <label class="i-checks block m-b-sm" ng-click="
+          app.settings.navbarHeaderColor='bg-dark';
+          app.settings.navbarCollapseColor='bg-white-only';
+          app.settings.asideColor='bg-dark';
+         " role="button" tabindex="0">
+                                <input type="radio" name="a" ng-model="app.settings.themeID" v-model="addData.theme"
+                                       value="bg-dark|bg-white|bg-dark dark-dark" class="ng-pristine ng-untouched ng-valid" aria-checked="false" tabindex="-1" aria-invalid="false">
+                                <span class="block bg-light clearfix pos-rlt">
+            <span class="active pos-abt w-full h-full bg-black-opacity text-center">
+              <i class="glyphicon glyphicon-ok text-white m-t-xs"></i>
+            </span>
+            <b class="bg-dark header"></b>
+            <b class="bg-white header"></b>
+            <b class="bg-dark dark-dark"></b>
+          </span>
+                              </label>
+
+                              <label class="i-checks block m-b-sm" ng-click="
+          app.settings.navbarHeaderColor='bg-white-only';
+          app.settings.navbarCollapseColor='bg-white-only';
+          app.settings.asideColor='bg-black';
+         " role="button" tabindex="0">
+                                <input type="radio" ng-model="app.settings.themeID" v-model="addData.theme"
+                                       value="bg-white|bg-white|bg-black black-white" class="ng-pristine ng-untouched ng-valid" name="a" aria-checked="false" tabindex="-1" aria-invalid="false">
+                                <span class="block bg-light clearfix pos-rlt">
+            <span class="active pos-abt w-full h-full bg-black-opacity text-center">
+              <i class="glyphicon glyphicon-ok text-white m-t-xs"></i>
+            </span>
+            <b class="bg-white header"></b>
+            <b class="bg-white header"></b>
+            <b class="bg-black black-white"></b>
+          </span>
+                              </label>
+
+                              <label class="i-checks block m-b-sm" ng-click="
+          app.settings.navbarHeaderColor='bg-primary';
+          app.settings.navbarCollapseColor='bg-white-only';
+          app.settings.asideColor='bg-dark';
+         " role="button" tabindex="0">
+                                <input type="radio" ng-model="app.settings.themeID" v-model="addData.theme"
+                                       value="bg-primary|bg-white|bg-dark dark-primary" class="ng-pristine ng-untouched ng-valid" name="a" aria-checked="false" tabindex="-1" aria-invalid="false">
+                                <span class="block bg-light clearfix pos-rlt">
+            <span class="active pos-abt w-full h-full bg-black-opacity text-center">
+              <i class="glyphicon glyphicon-ok text-white m-t-xs"></i>
+            </span>
+            <b class="bg-primary header"></b>
+            <b class="bg-white header"></b>
+            <b class="bg-dark dark-primary"></b>
+          </span>
+                              </label>
+
+                              <label class="i-checks block m-b-sm" ng-click="
+          app.settings.navbarHeaderColor='bg-info';
+          app.settings.navbarCollapseColor='bg-white-only';
+          app.settings.asideColor='bg-black';
+         " role="button" tabindex="0">
+                                <input type="radio" ng-model="app.settings.themeID" v-model="addData.theme"
+                                       value="bg-info|bg-white|bg-black black-info" class="ng-pristine ng-untouched ng-valid" name="a" aria-checked="false" tabindex="-1" aria-invalid="false">
+                                <span class="block bg-light clearfix pos-rlt">
+            <span class="active pos-abt w-full h-full bg-black-opacity text-center">
+              <i class="glyphicon glyphicon-ok text-white m-t-xs"></i>
+            </span>
+            <b class="bg-info header"></b>
+            <b class="bg-white header"></b>
+            <b class="bg-black black-info"></b>
+          </span>
+                              </label>
+
+                              <label class="i-checks block m-b-sm" ng-click="
+          app.settings.navbarHeaderColor='bg-success';
+          app.settings.navbarCollapseColor='bg-white-only';
+          app.settings.asideColor='bg-dark';
+         " role="button" tabindex="0">
+                                <input type="radio" ng-model="app.settings.themeID" v-model="addData.theme"
+                                       value="bg-success|bg-white|bg-dark dark-success" class="ng-pristine ng-untouched ng-valid" name="a" aria-checked="false" tabindex="-1" aria-invalid="false">
+                                <span class="block bg-light clearfix pos-rlt">
+            <span class="active pos-abt w-full h-full bg-black-opacity text-center">
+              <i class="glyphicon glyphicon-ok text-white m-t-xs"></i>
+            </span>
+            <b class="bg-success header"></b>
+            <b class="bg-white header"></b>
+            <b class="bg-dark dark-success"></b>
+          </span>
+                              </label>
+
+                              <label class="i-checks block">
+                                <input type="radio" v-model="addData.theme"
+                                       value="bg-danger|bg-white|bg-dark dark-danger" class="ng-pristine ng-untouched ng-valid" name="a" aria-checked="false" tabindex="-1" aria-invalid="false">
+                                <span class="block bg-light clearfix pos-rlt">
+            <span class="active pos-abt w-full h-full bg-black-opacity text-center">
+              <i class="glyphicon glyphicon-ok text-white m-t-xs"></i>
+            </span>
+            <b class="bg-danger header"></b>
+            <b class="bg-white header"></b>
+            <b class="bg-dark dark-danger"></b>
+          </span>
+                              </label>
+                              <label class="i-checks block">
+                                <input type="radio" v-model="addData.theme"
+                                       value="bg-danger|bg-white|bg-light light-danger" class="ng-pristine ng-untouched ng-valid" name="a" aria-checked="false" tabindex="-1" aria-invalid="false">
+                                <span class="block bg-light clearfix pos-rlt">
+            <span class="active pos-abt w-full h-full bg-black-opacity text-center">
+              <i class="glyphicon glyphicon-ok text-white m-t-xs"></i>
+            </span>
+            <b class="bg-danger header"></b>
+            <b class="bg-white header"></b>
+            <b class="bg-light light-danger"></b>
+          </span>
+                              </label>
+                            </div>
+                            <div class="col-xs-6">
+                              <label class="i-checks block m-b-sm" ng-click="
+          app.settings.navbarHeaderColor='bg-black';
+          app.settings.navbarCollapseColor='bg-black';
+          app.settings.asideColor='bg-white b-r';
+         " role="button" tabindex="0">
+                                <input type="radio" ng-model="app.settings.themeID" v-model="addData.theme"
+                                       value="bg-black|bg-black|bg-white white-black" class="ng-pristine ng-untouched ng-valid" name="a" aria-checked="false" tabindex="-1" aria-invalid="false">
+                                <span class="block bg-light clearfix pos-rlt">
+            <span class="active pos-abt w-full h-full bg-black-opacity text-center">
+              <i class="glyphicon glyphicon-ok text-white m-t-xs"></i>
+            </span>
+            <b class="bg-black header"></b>
+            <b class="bg-black header"></b>
+            <b class="bg-white white-black"></b>
+          </span>
+                              </label>
+
+                              <label class="i-checks block m-b-sm" ng-click="
+          app.settings.navbarHeaderColor='bg-dark';
+          app.settings.navbarCollapseColor='bg-dark';
+          app.settings.asideColor='bg-light';
+         " role="button" tabindex="0">
+                                <input type="radio" name="a" ng-model="app.settings.themeID" v-model="addData.theme"
+                                       value="bg-dark|bg-dark|bg-light light-dark" class="ng-pristine ng-untouched ng-valid" aria-checked="false" tabindex="-1" aria-invalid="false">
+                                <span class="block bg-light clearfix pos-rlt">
+            <span class="active pos-abt w-full h-full bg-black-opacity text-center">
+              <i class="glyphicon glyphicon-ok text-white m-t-xs"></i>
+            </span>
+            <b class="bg-dark header"></b>
+            <b class="bg-dark header"></b>
+            <b class="bg-light light-dark"></b>
+          </span>
+                              </label>
+
+                              <label class="i-checks block m-b-sm" ng-click="
+          app.settings.navbarHeaderColor='bg-info dker';
+          app.settings.navbarCollapseColor='bg-info dker';
+          app.settings.asideColor='bg-light dker b-r';
+         " role="button" tabindex="0">
+                                <input type="radio" ng-model="app.settings.themeID" v-model="addData.theme"
+                                       value="bg-info|bg-info|bg-light light-info" class="ng-pristine ng-untouched ng-valid" name="a" aria-checked="false" tabindex="-1" aria-invalid="false">
+                                <span class="block bg-light clearfix pos-rlt">
+            <span class="active pos-abt w-full h-full bg-black-opacity text-center">
+              <i class="glyphicon glyphicon-ok text-white m-t-xs"></i>
+            </span>
+            <b class="bg-info header"></b>
+            <b class="bg-info header"></b>
+            <b class="bg-light light-info"></b>
+          </span>
+                              </label>
+
+                              <label class="i-checks block m-b-sm" ng-click="
+          app.settings.navbarHeaderColor='bg-primary';
+          app.settings.navbarCollapseColor='bg-primary';
+          app.settings.asideColor='bg-dark';
+         " role="button" tabindex="0">
+                                <input type="radio" ng-model="app.settings.themeID" v-model="addData.theme"
+                                       value="bg-primary|bg-primary|bg-dark dark-primary" class="ng-pristine ng-untouched ng-valid" name="a" aria-checked="false" tabindex="-1" aria-invalid="false">
+                                <span class="block bg-light clearfix pos-rlt">
+            <span class="active pos-abt w-full h-full bg-black-opacity text-center">
+              <i class="glyphicon glyphicon-ok text-white m-t-xs"></i>
+            </span>
+            <b class="bg-primary header"></b>
+            <b class="bg-primary header"></b>
+            <b class="bg-dark dark-primary"></b>
+          </span>
+                              </label>
+
+                              <label class="i-checks block m-b-sm" ng-click="
+          app.settings.navbarHeaderColor='bg-info dker';
+          app.settings.navbarCollapseColor='bg-info dk';
+          app.settings.asideColor='bg-black';
+         " role="button" tabindex="0">
+                                <input type="radio" ng-model="app.settings.themeID" v-model="addData.theme"
+                                       value="bg-info|bg-info|bg-black black-info" class="ng-pristine ng-untouched ng-valid" name="a" aria-checked="false" tabindex="-1" aria-invalid="false">
+                                <span class="block bg-light clearfix pos-rlt">
+            <span class="active pos-abt w-full h-full bg-black-opacity text-center">
+              <i class="glyphicon glyphicon-ok text-white m-t-xs"></i>
+            </span>
+            <b class="bg-info header"></b>
+            <b class="bg-info header"></b>
+            <b class="bg-black black-info"></b>
+          </span>
+                              </label>
+
+                              <label class="i-checks block m-b-sm" ng-click="
+          app.settings.navbarHeaderColor='bg-success';
+          app.settings.navbarCollapseColor='bg-success';
+          app.settings.asideColor='bg-dark';
+          " role="button" tabindex="0">
+                                <input type="radio" ng-model="app.settings.themeID" v-model="addData.theme"
+                                       value="bg-success|bg-success|bg-dark dark-success" class="ng-pristine ng-untouched ng-valid" name="a" aria-checked="false" tabindex="-1" aria-invalid="false">
+                                <span class="block bg-light clearfix pos-rlt">
+            <span class="active pos-abt w-full h-full bg-black-opacity text-center">
+              <i class="glyphicon glyphicon-ok text-white m-t-xs"></i>
+            </span>
+            <b class="bg-success header"></b>
+            <b class="bg-success header"></b>
+            <b class="bg-dark dark-success"></b>
+          </span>
+                              </label>
+
+                              <label class="i-checks block" >
+                                <input type="radio" ng-model="app.settings.themeID" v-model="addData.theme"
+                                       value="bg-danger|bg-danger|bg-dark dark-danger" class="ng-pristine ng-untouched ng-valid" name="a" aria-checked="false" tabindex="-1" aria-invalid="false">
+                                <span class="block bg-light clearfix pos-rlt">
+            <span class="active pos-abt w-full h-full bg-black-opacity text-center">
+              <i class="glyphicon glyphicon-ok text-white m-t-xs"></i>
+            </span>
+            <b class="bg-danger header"></b>
+            <b class="bg-danger header"></b>
+            <b class="bg-dark dark-danger"></b>
+          </span>
+                              </label>
+                              <label class="i-checks block" >
+                                <input type="radio" v-model="addData.theme"
+                                       value="bg-danger|bg-danger|bg-light light-danger" class="ng-pristine ng-untouched ng-valid" name="a" aria-checked="false" tabindex="-1" aria-invalid="false">
+                                <span class="block bg-light clearfix pos-rlt">
+            <span class="active pos-abt w-full h-full bg-black-opacity text-center">
+              <i class="glyphicon glyphicon-ok text-white m-t-xs"></i>
+            </span>
+            <b class="bg-danger header"></b>
+            <b class="bg-danger header"></b>
+            <b class="bg-light light-danger"></b>
+          </span>
+                              </label>
+                            </div>
+                          </div>
+                        </div>
+                      </div>
+                    </div>
+                  </div>
+                </div>
+              </div>
+            </form>
+          </div>
+        </div>
+      </div>
+      <div slot="footer">
+        <a  class="btn btn-sm btn-danger" @click="addNew">提交</a>
+        <a  class="btn btn-sm btn-primary" @click="cancel">取消</a>
+      </div>
+    </bootstrap-modal>
+    <bootstrap-modal ref="editModal" :need-header="true" :need-footer="true">
+      <div slot="title">
+        编辑系统
+      </div>
+      <div slot="body">
+        <div class="panel panel-default">
+          <div class="panel-body">
+            <form role="form" class="ng-pristine ng-valid ng-submitted">
+              <div class="form-group">
+                <label>系统名称</label>
+                <input class="form-control" placeholder="" v-validate="'required'" name="name2" v-model="editData.name"  type="text">
+                <div class="form-height text-danger"><span v-show="errors.first('name2')">系统名称不能为空</span></div>
+                <input class="form-control" placeholder=""  v-model="editData.id"  type="hidden">
+              </div>
+              <div class="form-group">
+                <label>系统英文名称</label>
+                <input class="form-control" placeholder="" v-validate="'required|alpha'" name="name-e" v-model="editData.ident"  type="text">
+                <div class="form-height text-danger"><span v-show="errors.first('name-e')">系统名称不能为空</span></div>
+                <input class="form-control" placeholder=""  v-model="editData.id"  type="hidden">
+              </div>
+              <div class="form-group">
+                <label>首页地址</label>
+                <input class="form-control" placeholder="" v-validate="'required'" name="url2" v-model="editData.index_url"  type="text">
+                <div class="form-height text-danger"><span v-show="errors.first('url2')">首页地址不能为空</span></div>
+              </div>
+              <div class="form-group">
+                <label>超时时常</label>
+                <input class="form-control" placeholder="" v-validate="'required|numeric'" name="time_out2" v-model="editData.login_timeout"  type="text">
+                <div class="form-height text-danger"><span v-show="errors.first('time_out2')">超时时常不能为空且必须为数字</span></div>
+              </div>
+              <div class="form-group">
+                <label>secret</label>
+                <input class="form-control" placeholder="请输系统签名所需的secret" v-validate="'required'" v-model="editData.secret" name="secret"  type="text">
+                <div class="form-height text-danger"><span v-show="errors.first('secret')">secret不能为空</span> </div>
+              </div>
+              <div class="form-group">
+                <label>{{editData.logo}}</label>
+                <input class="form-control" placeholder="" v-validate="'required'" name="logo2" v-model="editData.logo"  type="hidden">
+                <!--<div class="form-height text-danger"><span v-show="errors.first('logo2')">logo地址不能为空</span></div>-->
+                <uploader :options="options" class="uploader-example" :file-status-text="statusText" ref="uploader" @file-success="fileEditSuccess" @file-error="fileError">
+                  <uploader-unsupport></uploader-unsupport>
+                  <uploader-drop>
+                    <p>上传logo</p>
+                    <uploader-btn :attrs="attrs">选择图片</uploader-btn>
+                  </uploader-drop>
+                  <uploader-list></uploader-list>
+                </uploader>
+              </div>
+              <div class="form-group">
+                <div class="settings">
+                  <div class="container">
+                    <div class="row">
+                      <div class="col col-lg-2-4 col-sm-6">
+                        <div class="panel-body ng-scope">
+                          <div class="m-b-sm">
+                            <label class="i-switch bg-info pull-right">
+                              <input type="checkbox" v-model="editData.layout" class="ng-pristine ng-untouched ng-valid"   value="app-header-fixed">
+                              <i></i>
+                            </label>
+                            Fixed header
+                          </div>
+                          <div class="m-b-sm">
+                            <label class="i-switch bg-info pull-right">
+                              <input type="checkbox" v-model="editData.layout" class="ng-pristine ng-untouched ng-valid"   value="app-aside-fixed">
+                              <i></i>
+                            </label>
+                            Fixed aside
+                          </div>
+                          <div class="m-b-sm">
+                            <label class="i-switch bg-info pull-right">
+                              <input type="checkbox" v-model="editData.layout" class="ng-pristine ng-untouched ng-valid"   value="app-aside-folded">
+                              <i></i>
+                            </label>
+                            Folded aside
+                          </div>
+                          <div class="m-b-sm">
+                            <label class="i-switch bg-info pull-right">
+                              <input type="checkbox" v-model="editData.layout" class="ng-pristine ng-untouched ng-valid"   value="app-aside-dock">
+                              <i></i>
+                            </label>
+                            Dock aside
+                          </div>
+                          <div>
+                            <label class="i-switch bg-info pull-right">
+                              <input type="checkbox" v-model="editData.layout" class="ng-pristine ng-untouched ng-valid" value="container">
+                              <i></i>
+                            </label>
+                            Boxed layout
+                          </div>
+                        </div>
+                      </div>
+                      <div class="col col-lg-2-4 col-sm-6">
+                        <div class="wrapper b-t b-light bg-light lter r-b ng-scope">
+                          <div class="row row-sm">
+                            <div class="col-xs-6 col-sm-6">
+                              <label class="i-checks block m-b-sm" ng-click="
+          app.settings.navbarHeaderColor='bg-black';
+          app.settings.navbarCollapseColor='bg-white-only';
+          app.settings.asideColor='bg-black';
+         " role="button" tabindex="0">
+                                <input type="radio" name="b" ng-model="app.settings.themeID" v-model="editData.theme"
+                                       value="bg-black|bg-white|bg-black black-black" class="ng-pristine ng-untouched ng-valid" aria-checked="true" tabindex="0" aria-invalid="false">
+                                <span class="block bg-light clearfix pos-rlt">
+            <span class="active pos-abt w-full h-full bg-black-opacity text-center">
+              <i class="glyphicon glyphicon-ok text-white m-t-xs"></i>
+            </span>
+            <b class="bg-black header"></b>
+            <b class="bg-white header"></b>
+            <b class="bg-black black-black"></b>
+          </span>
+                              </label>
+
+                              <label class="i-checks block m-b-sm" ng-click="
+          app.settings.navbarHeaderColor='bg-dark';
+          app.settings.navbarCollapseColor='bg-white-only';
+          app.settings.asideColor='bg-dark';
+         " role="button" tabindex="0">
+                                <input type="radio" name="b" ng-model="app.settings.themeID" v-model="editData.theme"
+                                       value="bg-dark|bg-white|bg-dark dark-dark" class="ng-pristine ng-untouched ng-valid" aria-checked="false" tabindex="-1" aria-invalid="false">
+                                <span class="block bg-light clearfix pos-rlt">
+            <span class="active pos-abt w-full h-full bg-black-opacity text-center">
+              <i class="glyphicon glyphicon-ok text-white m-t-xs"></i>
+            </span>
+            <b class="bg-dark header"></b>
+            <b class="bg-white header"></b>
+            <b class="bg-dark dark-dark"></b>
+          </span>
+                              </label>
+
+                              <label class="i-checks block m-b-sm" ng-click="
+          app.settings.navbarHeaderColor='bg-white-only';
+          app.settings.navbarCollapseColor='bg-white-only';
+          app.settings.asideColor='bg-black';
+         " role="button" tabindex="0">
+                                <input type="radio" ng-model="app.settings.themeID" v-model="editData.theme"
+                                       value="bg-white|bg-white|bg-black black-white" class="ng-pristine ng-untouched ng-valid" name="b" aria-checked="false" tabindex="-1" aria-invalid="false">
+                                <span class="block bg-light clearfix pos-rlt">
+            <span class="active pos-abt w-full h-full bg-black-opacity text-center">
+              <i class="glyphicon glyphicon-ok text-white m-t-xs"></i>
+            </span>
+            <b class="bg-white header"></b>
+            <b class="bg-white header"></b>
+            <b class="bg-black black-white"></b>
+          </span>
+                              </label>
+
+                              <label class="i-checks block m-b-sm" ng-click="
+          app.settings.navbarHeaderColor='bg-primary';
+          app.settings.navbarCollapseColor='bg-white-only';
+          app.settings.asideColor='bg-dark';
+         " role="button" tabindex="0">
+                                <input type="radio" ng-model="app.settings.themeID" v-model="editData.theme"
+                                       value="bg-primary|bg-white|bg-dark dark-primary" class="ng-pristine ng-untouched ng-valid" name="b" aria-checked="false" tabindex="-1" aria-invalid="false">
+                                <span class="block bg-light clearfix pos-rlt">
+            <span class="active pos-abt w-full h-full bg-black-opacity text-center">
+              <i class="glyphicon glyphicon-ok text-white m-t-xs"></i>
+            </span>
+            <b class="bg-primary header"></b>
+            <b class="bg-white header"></b>
+            <b class="bg-dark dark-primary"></b>
+          </span>
+                              </label>
+
+                              <label class="i-checks block m-b-sm" ng-click="
+          app.settings.navbarHeaderColor='bg-info';
+          app.settings.navbarCollapseColor='bg-white-only';
+          app.settings.asideColor='bg-black';
+         " role="button" tabindex="0">
+                                <input type="radio" ng-model="app.settings.themeID" v-model="editData.theme"
+                                       value="bg-info|bg-white|bg-black black-info" class="ng-pristine ng-untouched ng-valid" name="b" aria-checked="false" tabindex="-1" aria-invalid="false">
+                                <span class="block bg-light clearfix pos-rlt">
+            <span class="active pos-abt w-full h-full bg-black-opacity text-center">
+              <i class="glyphicon glyphicon-ok text-white m-t-xs"></i>
+            </span>
+            <b class="bg-info header"></b>
+            <b class="bg-white header"></b>
+            <b class="bg-black black-info"></b>
+          </span>
+                              </label>
+
+                              <label class="i-checks block m-b-sm" ng-click="
+          app.settings.navbarHeaderColor='bg-success';
+          app.settings.navbarCollapseColor='bg-white-only';
+          app.settings.asideColor='bg-dark';
+         " role="button" tabindex="0">
+                                <input type="radio" ng-model="app.settings.themeID" v-model="editData.theme"
+                                       value="bg-success|bg-white|bg-dark dark-success" class="ng-pristine ng-untouched ng-valid" name="b" aria-checked="false" tabindex="-1" aria-invalid="false">
+                                <span class="block bg-light clearfix pos-rlt">
+            <span class="active pos-abt w-full h-full bg-black-opacity text-center">
+              <i class="glyphicon glyphicon-ok text-white m-t-xs"></i>
+            </span>
+            <b class="bg-success header"></b>
+            <b class="bg-white header"></b>
+            <b class="bg-dark dark-success"></b>
+          </span>
+                              </label>
+
+                              <label class="i-checks block">
+                                <input type="radio" ng-model="app.settings.themeID" v-model="editData.theme"
+                                       value="bg-danger|bg-white|bg-dark dark-danger" class="ng-pristine ng-untouched ng-valid" name="b" aria-checked="false" tabindex="-1" aria-invalid="false">
+                                <span class="block bg-light clearfix pos-rlt">
+            <span class="active pos-abt w-full h-full bg-black-opacity text-center">
+              <i class="glyphicon glyphicon-ok text-white m-t-xs"></i>
+            </span>
+            <b class="bg-danger header"></b>
+            <b class="bg-white header"></b>
+            <b class="bg-dark dark-danger"></b>
+          </span>
+                              </label>
+                              <label class="i-checks block">
+                                <input type="radio" ng-model="app.settings.themeID" v-model="editData.theme"
+                                       value="bg-danger|bg-white|bg-light light-danger" class="ng-pristine ng-untouched ng-valid" name="b" aria-checked="false" tabindex="-1" aria-invalid="false">
+                                <span class="block bg-light clearfix pos-rlt">
+            <span class="active pos-abt w-full h-full bg-black-opacity text-center">
+              <i class="glyphicon glyphicon-ok text-white m-t-xs"></i>
+            </span>
+            <b class="bg-danger header"></b>
+            <b class="bg-white header"></b>
+            <b class="bg-light light-danger"></b>
+          </span>
+                              </label>
+                            </div>
+                            <div class="col-xs-6">
+                              <label class="i-checks block m-b-sm" ng-click="
+          app.settings.navbarHeaderColor='bg-black';
+          app.settings.navbarCollapseColor='bg-black';
+          app.settings.asideColor='bg-white b-r';
+         " role="button" tabindex="0">
+                                <input type="radio" ng-model="app.settings.themeID" v-model="editData.theme"
+                                       value="bg-black|bg-black|bg-white white-black" class="ng-pristine ng-untouched ng-valid" name="b" aria-checked="false" tabindex="-1" aria-invalid="false">
+                                <span class="block bg-light clearfix pos-rlt">
+            <span class="active pos-abt w-full h-full bg-black-opacity text-center">
+              <i class="glyphicon glyphicon-ok text-white m-t-xs"></i>
+            </span>
+            <b class="bg-black header"></b>
+            <b class="bg-black header"></b>
+            <b class="bg-white white-black"></b>
+          </span>
+                              </label>
+
+                              <label class="i-checks block m-b-sm" ng-click="
+          app.settings.navbarHeaderColor='bg-dark';
+          app.settings.navbarCollapseColor='bg-dark';
+          app.settings.asideColor='bg-light';
+         " role="button" tabindex="0">
+                                <input type="radio" name="b" ng-model="app.settings.themeID" v-model="editData.theme"
+                                       value="bg-dark|bg-dark|bg-light light-dark" class="ng-pristine ng-untouched ng-valid" aria-checked="false" tabindex="-1" aria-invalid="false">
+                                <span class="block bg-light clearfix pos-rlt">
+            <span class="active pos-abt w-full h-full bg-black-opacity text-center">
+              <i class="glyphicon glyphicon-ok text-white m-t-xs"></i>
+            </span>
+            <b class="bg-dark header"></b>
+            <b class="bg-dark header"></b>
+            <b class="bg-light light-dark"></b>
+          </span>
+                              </label>
+
+                              <label class="i-checks block m-b-sm" ng-click="
+          app.settings.navbarHeaderColor='bg-info dker';
+          app.settings.navbarCollapseColor='bg-info dker';
+          app.settings.asideColor='bg-light dker b-r';
+         " role="button" tabindex="0">
+                                <input type="radio" ng-model="app.settings.themeID" v-model="editData.theme"
+                                       value="bg-info|bg-info|bg-light light-info" class="ng-pristine ng-untouched ng-valid" name="b" aria-checked="false" tabindex="-1" aria-invalid="false">
+                                <span class="block bg-light clearfix pos-rlt">
+            <span class="active pos-abt w-full h-full bg-black-opacity text-center">
+              <i class="glyphicon glyphicon-ok text-white m-t-xs"></i>
+            </span>
+            <b class="bg-info header"></b>
+            <b class="bg-info header"></b>
+            <b class="bg-light light-info"></b>
+          </span>
+                              </label>
+
+                              <label class="i-checks block m-b-sm" ng-click="
+          app.settings.navbarHeaderColor='bg-primary';
+          app.settings.navbarCollapseColor='bg-primary';
+          app.settings.asideColor='bg-dark';
+         " role="button" tabindex="0">
+                                <input type="radio" ng-model="app.settings.themeID" v-model="editData.theme"
+                                       value="bg-primary|bg-primary|bg-dark dark-primary" class="ng-pristine ng-untouched ng-valid" name="b" aria-checked="false" tabindex="-1" aria-invalid="false">
+                                <span class="block bg-light clearfix pos-rlt">
+            <span class="active pos-abt w-full h-full bg-black-opacity text-center">
+              <i class="glyphicon glyphicon-ok text-white m-t-xs"></i>
+            </span>
+            <b class="bg-primary header"></b>
+            <b class="bg-primary header"></b>
+            <b class="bg-dark dark-primary"></b>
+          </span>
+                              </label>
+
+                              <label class="i-checks block m-b-sm" ng-click="
+          app.settings.navbarHeaderColor='bg-info dker';
+          app.settings.navbarCollapseColor='bg-info dk';
+          app.settings.asideColor='bg-black';
+         " role="button" tabindex="0">
+                                <input type="radio" ng-model="app.settings.themeID" v-model="editData.theme"
+                                       value="bg-info|bg-info|bg-black black-info" class="ng-pristine ng-untouched ng-valid" name="b" aria-checked="false" tabindex="-1" aria-invalid="false">
+                                <span class="block bg-light clearfix pos-rlt">
+            <span class="active pos-abt w-full h-full bg-black-opacity text-center">
+              <i class="glyphicon glyphicon-ok text-white m-t-xs"></i>
+            </span>
+            <b class="bg-info header"></b>
+            <b class="bg-info header"></b>
+            <b class="bg-black black-info"></b>
+          </span>
+                              </label>
+
+                              <label class="i-checks block m-b-sm" ng-click="
+          app.settings.navbarHeaderColor='bg-success';
+          app.settings.navbarCollapseColor='bg-success';
+          app.settings.asideColor='bg-dark';
+          " role="button" tabindex="0">
+                                <input type="radio" ng-model="app.settings.themeID" v-model="editData.theme"
+                                       value="bg-success|bg-success|bg-dark dark-success" class="ng-pristine ng-untouched ng-valid" name="b" aria-checked="false" tabindex="-1" aria-invalid="false">
+                                <span class="block bg-light clearfix pos-rlt">
+            <span class="active pos-abt w-full h-full bg-black-opacity text-center">
+              <i class="glyphicon glyphicon-ok text-white m-t-xs"></i>
+            </span>
+            <b class="bg-success header"></b>
+            <b class="bg-success header"></b>
+            <b class="bg-dark dark-success"></b>
+          </span>
+                              </label>
+
+                              <label class="i-checks block" >
+                                <input type="radio"  v-model="editData.theme"
+                                       value="bg-danger|bg-danger|bg-dark dark-danger" class="ng-pristine ng-untouched ng-valid" name="b" aria-checked="false" tabindex="-1" aria-invalid="false">
+                                <span class="block bg-light clearfix pos-rlt">
+            <span class="active pos-abt w-full h-full bg-black-opacity text-center">
+              <i class="glyphicon glyphicon-ok text-white m-t-xs"></i>
+            </span>
+            <b class="bg-danger header"></b>
+            <b class="bg-danger header"></b>
+            <b class="bg-dark dark-danger"></b>
+          </span>
+                              </label>
+
+                              <label class="i-checks block" >
+                                <input type="radio"  v-model="editData.theme"
+                                       value="bg-danger|bg-danger|bg-light light-danger" class="ng-pristine ng-untouched ng-valid" name="b" aria-checked="false" tabindex="-1" aria-invalid="false">
+                                <span class="block bg-light clearfix pos-rlt">
+            <span class="active pos-abt w-full h-full bg-black-opacity text-center">
+              <i class="glyphicon glyphicon-ok text-white m-t-xs"></i>
+            </span>
+            <b class="bg-danger header"></b>
+            <b class="bg-danger header"></b>
+            <b class="bg-light light-danger"></b>
+          </span>
+                              </label>
+                              <label class="i-checks block" >
+                                <input type="radio"  v-model="editData.theme"
+                                       value="bg-success|bg-success|bg-light light-success" class="ng-pristine ng-untouched ng-valid" name="b" aria-checked="false" tabindex="-1" aria-invalid="false">
+                                <span class="block bg-light clearfix pos-rlt">
+            <span class="active pos-abt w-full h-full bg-black-opacity text-center">
+              <i class="glyphicon glyphicon-ok text-white m-t-xs"></i>
+            </span>
+            <b class="bg-success header"></b>
+            <b class="bg-success header"></b>
+            <b class="bg-light light-success"></b>
+          </span>
+                              </label>
+                            </div>
+                          </div>
+                        </div>
+                      </div>
+                    </div>
+                  </div>
+                </div>
+              </div>
+            </form>
+          </div>
+        </div>
+      </div>
+      <div slot="footer">
+        <a class="btn btn-sm btn-danger" @click="editPost">提交</a>
+        <a class="btn btn-sm btn-primary" @click="cancel">取消</a>
+      </div>
+    </bootstrap-modal>
+    <bootstrap-modal ref="msgModal" :need-header="true" :need-footer="true">
+      <div slot="title">
+        提示
+      </div>
+      <div slot="body">
+        不能删除该系统
+      </div>
+      <div slot="footer">
+        <button class="btn btn-sm btn-primary" @click="cancel">确定</button>
+      </div>
+    </bootstrap-modal>
+    <bootstrap-modal ref="msg2Modal" :need-header="true" :need-footer="true">
+      <div slot="title">
+        提示
+      </div>
+      <div slot="body">
+        确定修改当前状态？
+      </div>
+      <div slot="footer">
+        <button class="btn btn-sm btn-danger" @click="enableOk">确定</button>
+        <button class="btn btn-sm btn-primary" @click="cancel">取消</button>
+      </div>
+    </bootstrap-modal>
+
+  </div>
+
+  </div>
+</template>
+
+<script>
+  import pager from "vue-simple-pager"
+  import PullTo from 'vue-pull-to'
+export default {
+  components: {
+    "bootstrap-modal": require("vue2-bootstrap-modal"),
+    pager,
+    PullTo
+  },
+  data() {
+    return {
+      options: {
+        // 可通过 https://github.com/simple-uploader/Uploader/tree/develop/samples/Node.js 示例启动服务
+        target: process.env.service.url+'/sso/img/upload',   //上传地址
+        testChunks: false,
+        withCredentials:true,   //携带jwt
+        singleFile:true,        //单文件上传
+      },
+      attrs: {
+        accept: 'image/*'
+      },
+      errorImg: '',
+      statusText: {
+        success: '上传成功',
+        error: '出错了',
+        uploading: '上传中',
+        paused: '暂停中',
+        waiting: '等待中'
+      },
+      datalist: null,
+      pageSizeList: [5, 10, 20, 50], //可选显示数据条数
+      datacount: 0,
+      sysid: 0,
+      id: null,
+      sysname: "",
+      selected: "",
+      addData: {
+        name: "",
+        addr: "",
+        time_out: "",
+        logo: "",
+        theme: "",
+        style: [],
+        ident: "",
+        secret:"",
+      },
+      editData: {},
+      enableData: { id: null, status: null },
+      pi: 1,
+      ps:10,
+      totalPage: 0,
+      pageAuth: [],
+      auth:{addsys:false}
+    };
+  },
+  props:["path"],
+  mounted() {
+    this.$refs.main.style.height = document.documentElement.clientHeight + 'px';
+    this.goPage({ page: 1,ps:this.ps });
+    //this.queryTags(this.path);
+  },
+  computed: {
+    editLayout() {
+      return this.editData.layout.split(" ");
+    }
+  },
+  methods: {
+    // queryTags(path){
+    //   if (path == '') return;
+    //   this.$fetch("/sso/role/auth",{sys_id:0,role_id:0,path:path})
+    //     .then(res => {
+    //       this.pageAuth = res;
+    //       if (this.pageAuth.length <= 0){
+    //         return false
+    //       }
+    //       this.pageAuth.forEach((item,index)=>{
+    //         let path = item.path;
+    //        this.auth[path] = true
+    //
+    //       })
+    //     })
+    //     .catch(err => {
+    //       this.$notify({
+    //         title: '错误',
+    //         message: '网络错误,请稍后再试',
+    //         type: 'error',
+    //         offset: 50,
+    //         duration:2000,
+    //       });
+    //     });
+    // },
+    //上传成功的事件
+    fileSuccess (rootFile, file, message, chunk) {
+      let data =JSON.parse(message);
+      this.addData.logo=data.url;
+        this.$notify({
+          title: '成功',
+          message: '上传成功',
+          type: 'success',
+          offset: 50,
+          duration:2000,
+        });
+    },
+    fileEditSuccess (rootFile, file, message, chunk) {
+      let data =JSON.parse(message);
+      this.editData.logo=data.url
+    },
+    //上传失败事件
+    fileError(rootFile, file, message, chunk){
+        this.$notify({
+          title: '错误',
+          message: '上传失败，请稍后再试',
+          type: 'error',
+          offset: 50,
+          duration:2000,
+        });
+    },
+    next(){
+      let pi =this.pi;
+      this.pi = pi + 1;
+      this.$fetch("/sso/sys/manage", { pi: this.pi ,ps:this.ps,name: this.sysname,status: this.selected})
+        .then(res => {
+          if(res.list.length <= 0){
+            this.pi=pi;
+            return false
+          }
+          this.datalist = this.datalist.concat(res.list);
+          this.datacount = res.count;
+          this.totalPage = Math.ceil(res.count / 10);
+        })
+        .catch(err => {
+          if (err.response) {
+            if (err.response.status == 403) {
+              this.$router.push("/member/login");
+            }else{
+              this.$notify({
+                title: '错误',
+                message: '网络错误,请稍后再试',
+                type: 'error',
+                offset: 50,
+                duration:2000,
+              });
+            }
+          }
+        });
+    },
+    handleSizeChange(val){
+      this.ps =val;
+      this.query()
+    },
+    goPage(val) {
+      this.pi = val;
+      this.$fetch("/sso/sys/manage", { pi: val ,ps:this.ps,name: this.sysname,status: this.selected})
+        .then(res => {
+          this.datalist = res.list;
+          this.datacount = res.count;
+          this.totalPage = Math.ceil(res.count / 10);
+        })
+        .catch(err => {
+          if (err.response) {
+            if (err.response.status == 403) {
+              this.$router.push("/member/login");
+            }else{
+              this.$notify({
+                title: '错误',
+                message: '网络错误,请稍后再试',
+                type: 'error',
+                offset: 50,
+                duration:2000,
+              });
+            }
+          }
+        });
+    },
+    query() {
+      this.$fetch("/sso/sys/manage", {
+        pi: this.pi,
+        ps:this.ps,
+        name: this.sysname,
+        status: this.selected
+      })
+        .then(res => {
+          this.datalist = res.list;
+          this.datacount = res.count;
+          this.totalPage = Math.ceil(res.count / 10);
+        })
+        .catch(err => {
+          if (err.response.status == 403) {
+            this.$router.push("/member/login");
+          }else{
+            this.$notify({
+              title: '错误',
+              message: '网络错误,请稍后再试',
+              type: 'error',
+              offset: 50,
+              duration:2000,
+            });
+          }
+        });
+    },
+    openAdd() {
+      this.$refs.addModal.open();
+    },
+    addNew() {
+      let str = "";
+      this.addData.style.forEach((item, index) => {
+        str += item + " ";
+      });
+      this.$post("/sso/sys/manage", {
+        name: this.addData.name,
+        addr: this.addData.addr,
+        time_out: this.addData.time_out,
+        logo: this.addData.logo,
+        style: str,
+        theme: this.addData.theme,
+        ident: this.addData.ident,
+        wechat_status: this.addData.wechat_status,
+      })
+        .then(res => {
+          this.$refs.addModal.close();
+          this.goPage({ page: this.pi });
+            this.$notify({
+              title: '成功',
+              message: '添加成功',
+              type: 'success',
+              offset: 50,
+              duration:2000,
+            });
+        })
+        .catch(err => {
+          if (err.response.status == 403) {
+            this.$router.push("/member/login");
+          }else{
+            this.$notify({
+              title: '错误',
+              message: '网络错误,请稍后再试',
+              type: 'error',
+              offset: 50,
+              duration:2000,
+            });
+          }
+        });
+    },
+    deleteById(id) {
+      this.sysid = id;
+      if (this.sysid == 0 || this.sysid == 100) {
+        this.$refs.msgModal.open();
+        return false;
+      }
+      this.$refs.theModal.open();
+    },
+    cancel() {
+      this.$refs.theModal.close();
+      this.$refs.msgModal.close();
+      this.$refs.editModal.close();
+      this.$refs.addModal.close();
+      this.$refs.msg2Modal.close();
+    },
+    ok() {
+      this.$del("/sso/sys/manage", { data: { id: this.sysid } })
+        .then(res => {
+          this.cancel();
+          this.goPage({ page: this.pi });
+            this.$notify({
+              title: '成功',
+              message: '删除成功',
+              type: 'success',
+              offset: 50,
+              duration:2000
+            });
+        })
+        .catch(err => {
+          if (err.response.status == 403) {
+            this.$router.push("/member/login");
+          }else{
+            this.$notify({
+              title: '错误',
+              message: '网络错误,请稍后再试',
+              type: 'error',
+              offset: 50,
+              duration:2000,
+            });
+          }
+        });
+    },
+    enable(id, status) {
+
+      this.enableData.id = id;
+      this.enableData.status = status;
+
+      this.$confirm("确定执行此操作?, 是否继续?", "提示", {
+        confirmButtonText: "确定",
+        cancelButtonText: "取消",
+        type: "warning"
+      }).then(() => {
+        this.$put("/sso/sys/manage", {
+          id: this.enableData.id,
+          status: this.enableData.status
+        })
+          .then(res => {
+            this.goPage(this.pi);
+
+            this.$notify({
+              title: '成功',
+              message: '状态修改成功',
+              type: 'success',
+              offset: 50,
+              duration:2000,
+            });
+          })
+          .catch(err => {
+
+              this.$notify({
+                title: '错误',
+                message: '网络错误,请稍后再试',
+                type: 'error',
+                offset: 50,
+                duration:2000,
+              });
+
+          });
+
+      }).catch(() => {
+        this.$message({
+          type: "info",
+          message: "已取消删除"
+        });
+      });
+
+
+    },
+    enableOk() {
+
+    },
+    edit(id) {
+      this.datalist.forEach((item, index) => {
+        if (item.id == id) {
+          let a = typeof item.layout;
+          if (a == "string") {
+            item.layout = item.layout.split(" ");
+          }
+          this.editData = item;
+          this.$refs.editModal.open();
+        }
+      });
+    },
+    editPost() {
+      let str = "";
+      let edit = this.editData;
+      this.editData.layout.forEach((item, index) => {
+        str += item + " ";
+      });
+      edit.layout = str.trim();
+      this.$post("/sso/sys/manage/edit", edit)
+        .then(res => {
+          this.$refs.editModal.close();
+          this.goPage({ page: this.pi });
+            this.$notify({
+              title: '成功',
+              message: '编辑成功',
+              type: 'success',
+              offset: 50,
+              duration:2000
+            });
+        })
+        .catch(err => {
+          if (err.response.status == 403) {
+            this.$notify({
+              title: '错误',
+              message: '登录超时，请重新登录',
+              type: 'error',
+              offset: 50,
+              duration:2000,
+              onClose: ()=> {
+                this.$router.push("/member/login");
+              }
+            });
+          }else{
+            this.$notify({
+              title: '错误',
+              message: '网络错误,请稍后再试',
+              type: 'error',
+              offset: 50,
+              duration:2000,
+            });
+          }
+        });
+    },
+    manage(id) {
+      this.$router.push({
+        name: "sysfunc",
+        query: {
+          id: id
+        }
+      });
+    }
+  }
+};
+</script>
+
+<style>
+  .uploader-example {
+    font-size: 12px;
+  }
+  .uploader-example .uploader-btn {
+    margin-right: 4px;
+  }
+  .uploader-example .uploader-list {
+    max-height: 440px;
+    overflow: auto;
+    overflow-x: hidden;
+    overflow-y: auto;
+  }
+  .page-pagination{padding: 10px 15px;text-align: right;}
+</style>
+
diff --git a/mgrserver/src/pages/system/sys.index.vue b/mgrserver/src/pages/system/sys.index.vue
index e7a3038..62e537c 100644
--- a/mgrserver/src/pages/system/sys.index.vue
+++ b/mgrserver/src/pages/system/sys.index.vue
@@ -52,7 +52,7 @@
             <td class="visible-md  visible-lg">{{item.login_timeout}}</td>
             <td class="visible-md  visible-lg ">
               <img v-if="item.theme" :class="item.theme.split('|')[0]"
-                   :src="'/static/img/'+item.logo" :onerror="errorImg" alt="">
+                   :src="item.logo" :onerror="errorImg" alt="">
             </td>
             <td>
               <div class="form-group form-inline">
diff --git a/mgrserver/src/pages/user/index.new.vue b/mgrserver/src/pages/user/index.new.vue
new file mode 100644
index 0000000..405c56e
--- /dev/null
+++ b/mgrserver/src/pages/user/index.new.vue
@@ -0,0 +1,595 @@
+<!-- 用户信息列表，查询，启动，禁用，解锁 -->
+<template>
+  <div ref="main">
+
+      <div class="panel panel-default">
+        <div class="panel panel-default">
+          <div class="panel-body">
+            <form class="form-inline" role="form">
+              <div class="form-group">
+                <label class="sr-only" for="exampleInputEmail2">用户名</label>
+                <input type="text" class="form-control" v-model="paging.username"  placeholder="请输入用户名">
+              </div>
+              <div class="form-group ">
+                <label class="col-sm-2 control-label sr-only">角色</label>
+                <select v-model="paging.role_id" name="role_id" class="form-control visible-md  visible-lg">
+                  <option value="" selected="selected" >---请选择角色---</option>
+                  <option v-for="(r, index) in roleList" :key="index" :value="r.role_id">{{r.name}}</option>
+                </select>
+              </div>
+              <a class="btn btn-success" @click="searchClick" >查询</a>
+              <a class="btn btn-primary" @click="showModal(1,{})" >添加用户</a>
+            </form>
+          </div>
+        </div>
+        <bootstrap-modal ref="editModal" :need-header="true" :need-footer="true" :closed="resetSys">
+          <div slot="title">
+            {{isAdd == 1 ? "添加用户" : "编辑用户信息"}}
+          </div>
+          <div slot="body">
+            <div class="panel panel-default">
+              <div class="panel-body">
+                <form role="form" class="ng-pristine ng-valid ng-submitted height-min">
+                  <div class="form-group">
+                    <label>用户名</label>
+                    <input name="username1" type="text" class="form-control" v-validate="'required'" v-model="userInfo.user_name" placeholder="请输入用户名" required >
+                    <div class="form-heigit"> <span v-show="errors.first('username1')" class="text-danger">用户名不能为空！</span> </div>
+                  </div>
+                  <div class="form-group">
+                    <label>电话</label>
+                    <input name="mobile1" type="text" class="form-control" v-validate="'required|numeric'" v-model="userInfo.mobile" placeholder="请输入电话" maxlength="11" required>
+                    <div class="form-heigit"><span v-show="errors.first('mobile1')" class="text-danger">请输入正确的11位手机号！</span></div>
+                  </div>
+                  <div class="form-group">
+                    <label>邮箱</label>
+                    <input name="email1" type="text" class="form-control" v-validate="'required|email'" v-model="userInfo.email" placeholder="请输入邮箱" required>
+                    <div class="form-heigit"><span v-show="errors.first('email1')" class="text-danger">请输入正确的邮箱！</span></div>
+                  </div>
+                  <div class="form-group">
+                    <label>扩展参数(非必须)</label>
+                    <textarea name="ext_params" type="text" class="form-control" v-model="userInfo.ext_params" placeholder="扩展参数" >
+                    </textarea>
+                    <div class="form-heigit">
+                      <span v-show="errors.first('ext')" class="text-danger">请输入正确的邮箱！</span>
+                    </div>
+
+                  </div>
+                  <div class="form-group sel-col-5">
+                    <div class="form-inline">
+                      <label>系统与角色</label>
+                      <span class="add-btn"><a class="btn m-b-xs btn-xs btn-success" @click="add"><i class="fa fa-plus"></i></a></span>
+                    </div>
+                    <form class="form-inline pull-in clearfix"
+                          v-for='(list,index) in userInfo.lists'
+                          v-bind:key='list.id'>
+                      <div class="form-group col-sm-5" >
+                        <select name="select1" class="form-control" v-validate="'required'" v-model="list.sys_id" @change="sysStatus(list.sys_id,index)" required >
+                          <option value="" selected="selected" >---请选择系统---</option>
+                          <option v-for="(r, index) in sysList" :key="index" :value="r.id" :disabled="r.disabled">{{r.name}}</option>
+                        </select>
+                      </div>
+                      <div class="form-group col-sm-5">
+                        <select name="select2" class="form-control" v-validate="'required'" v-model="list.role_id" required >
+                          <option value="" selected="selected" >---请选择角色---</option>
+                          <option v-for="(r, index) in roleList" :key="index" :value="r.role_id">{{r.name}}</option>
+                        </select>
+                      </div>
+                      <div class="form-group del-btn" v-if="userInfo.lists.length > 1">
+                        <a class="btn m-b-xs btn-xs btn-danger" @click="del(index)"><i class="fa fa-minus"></i></a>
+                      </div>
+                    </form>
+                    <div class="">
+                      <div class="form-group form-heigit col-sm-5"><span v-show="errors.has('select1')" class="text-danger">必须选择系统！</span></div>
+                      <div class="form-group form-heigit col-sm-5"><span v-show="errors.has('select2')" class="text-danger">必须选择用户角色！</span></div>
+                    </div>
+                  </div>
+                  <div class="form-group" v-if="isAdd == 1">
+                    <label class="checkbox-inline">
+                      <input id="statuscheck" type="checkbox">是否启用
+                    </label>
+                  </div>
+                </form>
+              </div>
+            </div>
+          </div>
+          <div slot="footer">
+            <a class="btn btn-default" @click="onClose">取消</a>
+            <a class="btn btn-success" @click="submitUser">提交</a>
+          </div>
+        </bootstrap-modal>
+
+        <el-scrollbar style="height:100%">
+          <el-table :data="datalist.items" stripe  style="width: 100%">
+
+            <el-table-column width="100" prop="user_name" label="用户名" ></el-table-column>
+
+            <el-table-column prop="rolestr" label="系统/角色" ></el-table-column>
+
+            <el-table-column  width="130" prop="mobile" label="联系电话" ></el-table-column>
+            <el-table-column width="150" prop="email" label="邮箱" ></el-table-column>
+
+            <el-table-column  width="80" prop="status" label="状态" >
+              <template slot-scope="scope">
+
+                <el-tag type="success" v-if="scope.row.status == 0">{{scope.row.status_label}}</el-tag>
+                <el-tag type="info" v-if="scope.row.status == 2">{{scope.row.status_label}}</el-tag>
+              </template>
+            </el-table-column>
+
+            <el-table-column prop="create_time" label="创建时间" >
+              <template slot-scope="scope">
+                <i class="el-icon-time"></i>
+                <span style="margin-left: 10px">{{ scope.row.create_time }}</span>
+              </template>
+            </el-table-column>
+            <el-table-column prop="create_time" label="扩展参数" >
+              <template slot-scope="scope">
+
+                <span style="margin-left: 10px">{{ scope.row.ext_params }}</span>
+              </template>
+            </el-table-column>
+
+            <el-table-column  label="操作">
+              <template slot-scope="scope">
+                <el-button plain type="primary" size="mini" @click="showModal(2,scope.row)">编辑</el-button>
+                <el-button plain type="success" size="mini" @click="userChange(0,scope.row.user_id)" v-if="scope.row.status == 2" >启用</el-button>
+                <el-button plain type="info" size="mini" @click="userChange(2,scope.row.user_id)" v-if="scope.row.status == 0">禁用</el-button>
+
+
+
+                <el-button plain  type="danger" size="mini" @click="userDel(scope.row.user_id)">删除</el-button>
+
+              </template>
+            </el-table-column>
+          </el-table>
+
+        </el-scrollbar>
+
+        <div class="page-pagination">
+          <el-pagination
+            @size-change="handleSizeChange"
+            @current-change="pageChange"
+            :current-page="paging.pi"
+            :page-size="paging.ps"
+            :page-sizes="pageSizes"
+            layout="total, sizes, prev, pager, next, jumper"
+            :total="totalpage">
+          </el-pagination>
+        </div>
+
+
+
+      </div>
+
+  </div>
+</template>
+<script>
+import pager from "vue-simple-pager";
+import PullTo from 'vue-pull-to'
+export default {
+  components: {
+    "bootstrap-modal": require("vue2-bootstrap-modal"),
+    pager: pager,
+    PullTo
+  },
+  data() {
+    return {
+      paging: { ps: 5, pi: 1, username: "", role_id: "" },
+      pageSizes: [5, 10, 20, 50], //可选显示数据条数
+
+      datalist: { count: 0, items: [] },
+      userInfo: {
+        user_name: "",
+        user_id: -1,
+        lists: [],
+        mobile: null,
+        email: null,
+        status: 0,
+        is_add: 2,
+        ext_params:"",
+      },
+
+      totalpage: 0,
+      sysList: [],
+      roleList: [], //角色列表
+      selectSys: [],
+      isAdd: 1,
+    };
+  },
+  created(){
+
+  },
+  mounted() {
+    this.querySys();
+    this.queryData();
+  },
+  methods: {
+    loadmore: function(loaded) {
+      return new Promise(function(resolve, reject) {
+        setTimeout(function() {
+          loaded("done");
+        }, 1000);
+      });
+    },
+
+
+    queryData: function() {
+      if (this.paging.pi == 0) {
+        this.paging.pi = 1;
+      }
+      this.$post("/sso/user", this.paging)
+        .then(res => {
+          this.datalist.items = res.list;
+          this.datalist.count = new Number(res.count);
+          this.totalpage = res.count;
+        })
+        .catch(err => {
+          if (err.response.status == 403) {
+            this.$router.push("/login");
+          }else{
+            this.$notify({
+              title: '错误',
+              message: '网络错误,请稍后再试',
+              type: 'error',
+              offset: 50,
+              duration:2000,
+            });
+          }
+        });
+    },
+    pageChange(val) {
+
+      this.paging.pi = val;
+      this.queryData();
+    },
+    handleSizeChange(val){
+      this.paging.ps = val
+      this.queryData()
+    },
+
+    searchClick: function() {
+      this.paging.pi = 1;
+      this.queryData();
+    },
+    next(){
+      let pi = this.paging.pi
+      this.paging.pi = pi + 1;
+      this.$post("/sso/user", this.paging)
+        .then(res => {
+          if(res.list.length <= 0) {
+            this.paging.pi = pi
+            return false
+          }
+          this.datalist.items = this.datalist.items.concat(res.list);
+          this.datalist.count = new Number(res.count);
+          this.totalpage = Math.ceil(this.datalist.count / this.paging.ps);
+        })
+        .catch(err => {
+          if (err.response.status == 403) {
+            this.$router.push("/login");
+          }else{
+            this.$notify({
+              title: '错误',
+              message: '网络错误,请稍后再试',
+              type: 'error',
+              offset: 50,
+              duration:2000,
+            });
+          }
+        });
+    },
+    stateChange(e){
+      console.log(e)
+    },
+    showModal: function(i, j) {
+      if (j.status == 1) {
+          this.$notify({
+            title: '警告',
+            message: '请先进行解锁操作',
+            type: 'warning',
+            offset: 50,
+            duration:2000
+          });
+        return false;
+      }
+      if (i == 1) {
+        // 添加用户
+        this.isAdd = 1;
+        this.userInfo.user_name = "";
+        this.userInfo.role_id = "";
+        this.userInfo.mobile = null;
+        this.userInfo.status = 0;
+        this.userInfo.user_id = -1;
+        this.userInfo.is_add = 1;
+        this.userInfo.lists = [{ sys_id: "", role_id: "" }];
+        this.userInfo.email = "";
+        this.selectSys.push("");
+      } else {
+        // 编辑用户
+        this.isAdd = 2;
+        this.userInfo.user_name = j.user_name;
+        this.userInfo.role_id = j.role_id;
+        this.userInfo.mobile = j.mobile;
+        this.userInfo.status = j.status;
+        this.userInfo.user_id = j.user_id;
+        this.userInfo.lists = j.roles;
+        this.userInfo.is_add = 2;
+        this.userInfo.email = j.email;
+        this.userInfo.ext_params = j.ext_params;
+        for (var s = 0; s < j.roles.length; s++) {
+          this.selectSys.push(j.roles[s].sys_id);
+        }
+        this.setSys();
+      }
+      this.$refs.editModal.open();
+    },
+    userChange: function(ests, userid) {
+      var r
+      this.$confirm("确认执行该操作吗?", "提示", {
+        confirmButtonText: "确定",
+        cancelButtonText: "取消",
+        type: "warning"
+      }).then(() => {
+        var user = { status: ests, user_id: userid };
+        this.$put("/sso/user", user)
+          .then(res => {
+            this.queryData();
+            this.$notify({
+              title: '成功',
+              message: '修改状态成功',
+              type: 'success',
+              offset: 50,
+              duration: 2000
+            });
+          })
+          .catch(err => {
+            if (err.response.status == 403) {
+              this.$notify({
+                title: '错误',
+                message: '登录超时,请重新登录',
+                type: 'error',
+                offset: 50,
+                duration:2000,
+                onClose: () => {
+                  this.$router.push("/login");
+                }
+              });
+            }else{
+              this.$notify({
+                title: '错误',
+                message: '网络错误,请稍后再试',
+                type: 'error',
+                offset: 50,
+                duration:2000,
+              });
+            }
+          });
+
+      }).catch(() => {
+        this.$message({
+          type: "info",
+          message: "已取消删除"
+        });
+
+      });
+    },
+    userDel: function(userid) {
+      var user = { user_id: userid };
+
+      this.$confirm("此操作将永久删除该数据, 是否继续?", "提示", {
+        confirmButtonText: "确定",
+        cancelButtonText: "取消",
+        type: "warning"
+      }).then(() => {
+        this.$post("/sso/user/delete", user)
+          .then(res => {
+            this.queryData();
+            this.$notify({
+              title: '成功',
+              message: '成功删除用户',
+              type: 'success',
+              offset: 50,
+              duration:2000
+            });
+          })
+          .catch(err => {
+            this.$notify({
+              title: '错误',
+              message: '网络错误,请稍后再试',
+              type: 'error',
+              offset: 50,
+              duration:2000,
+            });
+          });
+
+      }).catch(() => {
+        this.$message({
+          type: "info",
+          message: "已取消删除"
+        });
+      });
+    },
+    add() {
+      this.userInfo.lists.push({
+        sys_id: "",
+        role_id: ""
+      });
+      this.selectSys.push("");
+    },
+    del(index) {
+      for (var s = 0; s < this.sysList.length; s++) {
+        if (this.sysList[s].id == this.userInfo.lists[index].sys_id) {
+          this.sysList[s].disabled = false;
+        }
+      }
+      this.userInfo.lists.splice(index, 1);
+      this.selectSys.splice(index, 1);
+    },
+    onClose() {
+      this.$refs.editModal.close();
+    },
+    resetSys() {
+      this.selectSys = [];
+      for (var s = 0; s < this.sysList.length; s++) {
+        this.sysList[s].disabled = false;
+      }
+    },
+    setSys() {
+      for (var s = 0; s < this.sysList.length; s++) {
+        for (var i = 0; i < this.selectSys.length; i++) {
+          if (this.sysList[s].id == this.selectSys[i]) {
+            this.sysList[s].disabled = true;
+          }
+        }
+      }
+    },
+    sysStatus(id, idx) {
+      if (this.selectSys[idx] != "") {
+        for (var s = 0; s < this.sysList.length; s++) {
+          if (this.sysList[s].id == this.selectSys[idx]) {
+            this.sysList[s].disabled = false;
+          }
+        }
+      }
+      this.selectSys[idx] = id;
+      for (var s = 0; s < this.sysList.length; s++) {
+        if (this.sysList[s].id == id) {
+          this.sysList[s].disabled = true;
+        }
+      }
+    },
+    submitUser() {
+      if (this.userInfo.lists.length < 1) {
+        this.$notify({
+          title: '警告',
+          message: '至少需要添加一个系统角色！',
+          type: 'warning',
+          offset: 50
+        });
+        return false;
+      }
+      var s = "";
+      for (var i = 0; i < this.userInfo.lists.length; i++) {
+        s =
+          s +
+          this.userInfo.lists[i].sys_id +
+          "," +
+          this.userInfo.lists[i].role_id +
+          "|";
+      }
+      this.userInfo.auth = s;
+      this.$validator.validate().then(result => {
+        if (!result) {
+          return false;
+        } else {
+          if (this.isAdd == 1) {
+            // 添加用户
+            this.userInfo.is_add = 1;
+            var x = document.getElementById("statuscheck").checked;
+            if (x) {
+              this.userInfo.status = 0;
+            } else {
+              this.userInfo.status = 2;
+            }
+            this.$post("/sso/user/save", this.userInfo)
+              .then(res => {
+                this.queryData();
+                  this.$notify({
+                    title: '成功',
+                    message: '添加成功',
+                    type: 'success',
+                    offset: 50,
+                    duration:2000
+                  });
+              })
+              .catch(err => {
+                if (err.response.status == 403) {
+                  this.$notify({
+                    title: '错误',
+                    message: '登录超时,请重新登录',
+                    type: 'error',
+                    offset: 50,
+                    duration:2000,
+                    onClose: () => {
+                      this.$router.push("/login");
+                    }
+                  });
+                }else{
+                  this.$notify({
+                    title: '错误',
+                    message: '网络错误,请稍后再试',
+                    type: 'error',
+                    offset: 50,
+                    duration:2000,
+                  });
+                }
+              });
+          }else if (this.isAdd == 2){
+            this.$post("/sso/user/edit", this.userInfo)
+              .then(res => {
+                this.queryData();
+                  this.$notify({
+                    title: '成功',
+                    message: '编辑成功',
+                    type: 'success',
+                    offset: 50,
+                    duration:2000
+                  });
+
+              })
+              .catch(err => {
+                if (err.response.status == 403) {
+                  this.$notify({
+                    title: '错误',
+                    message: '登录超时,请重新登录',
+                    type: 'error',
+                    offset: 50,
+                    duration:2000,
+                    onClose: () => {
+                      this.$router.push("/login");
+                    }
+                  });
+                }else{
+                  this.$notify({
+                    title: '错误',
+                    message: '网络错误,请稍后再试',
+                    type: 'error',
+                    offset: 50,
+                    duration:2000,
+                  });
+                }
+              });
+          }
+
+          this.onClose();
+        }
+      });
+    },
+    querySys() {
+      this.$fetch("/sso/base", {})
+        .then(res => {
+          this.roleList = res.rolelist;
+        })
+        .catch(err => {
+        });
+
+      this.$post("/sso/base", {})
+        .then(res => {
+          this.sysList = res.list;
+          for (s in this.sysList) {
+            s.disabled = false;
+          }
+        })
+        .catch(err => {
+        });
+
+
+    }
+  }
+};
+</script>
+
+<style scoped>
+  .page-pagination{padding: 10px 15px;text-align: right;}
+</style>
+
diff --git a/mgrserver/src/pages/user/index.vue b/mgrserver/src/pages/user/index.vue
deleted file mode 100644
index 0739c2c..0000000
--- a/mgrserver/src/pages/user/index.vue
+++ /dev/null
@@ -1,580 +0,0 @@
-<!-- 用户信息列表，查询，启动，禁用，解锁 -->
-<template>
-  <div ref="main">
-
-      <div class="panel panel-default">
-        <div class="panel panel-default">
-          <div class="panel-body">
-            <form class="form-inline" role="form">
-              <div class="form-group">
-                <label class="sr-only" for="exampleInputEmail2">用户名</label>
-                <input type="text" class="form-control" v-model="paging.username"  placeholder="请输入用户名">
-              </div>
-              <div class="form-group ">
-                <label class="col-sm-2 control-label sr-only">角色</label>
-                <select v-model="paging.role_id" name="role_id" class="form-control visible-md  visible-lg">
-                  <option value="" selected="selected" >---请选择角色---</option>
-                  <option v-for="(r, index) in roleList" :key="index" :value="r.role_id">{{r.name}}</option>
-                </select>
-              </div>
-              <a class="btn btn-success" @click="searchClick" >查询</a>
-              <a class="btn btn-primary" @click="showModal(1,{})" >添加用户</a>
-            </form>
-          </div>
-        </div>
-        <bootstrap-modal ref="editModal" :need-header="true" :need-footer="true" :closed="resetSys">
-          <div slot="title">
-            {{isAdd == 1 ? "添加用户" : "编辑用户信息"}}
-          </div>
-          <div slot="body">
-            <div class="panel panel-default">
-              <div class="panel-body">
-                <form role="form" class="ng-pristine ng-valid ng-submitted height-min">
-                  <div class="form-group">
-                    <label>用户名</label>
-                    <input name="username1" type="text" class="form-control" v-validate="'required'" v-model="userInfo.user_name" placeholder="请输入用户名" required >
-                    <div class="form-heigit"> <span v-show="errors.first('username1')" class="text-danger">用户名不能为空！</span> </div>
-                  </div>
-                  <div class="form-group">
-                    <label>电话</label>
-                    <input name="mobile1" type="text" class="form-control" v-validate="'required|numeric'" v-model="userInfo.mobile" placeholder="请输入电话" maxlength="11" required>
-                    <div class="form-heigit"><span v-show="errors.first('mobile1')" class="text-danger">请输入正确的11位手机号！</span></div>
-                  </div>
-                  <div class="form-group">
-                    <label>邮箱</label>
-                    <input name="email1" type="text" class="form-control" v-validate="'required|email'" v-model="userInfo.email" placeholder="请输入邮箱" required>
-                    <div class="form-heigit"><span v-show="errors.first('email1')" class="text-danger">请输入正确的邮箱！</span></div>
-                  </div>
-                  <div class="form-group sel-col-5">
-                    <div class="form-inline">
-                      <label>系统与角色</label>
-                      <span class="add-btn"><a class="btn m-b-xs btn-xs btn-success" @click="add"><i class="fa fa-plus"></i></a></span>
-                    </div>
-                    <form class="form-inline pull-in clearfix"
-                          v-for='(list,index) in userInfo.lists'
-                          v-bind:key='list.id'>
-                      <div class="form-group col-sm-5" >
-                        <select name="select1" class="form-control" v-validate="'required'" v-model="list.sys_id" @change="sysStatus(list.sys_id,index)" required >
-                          <option value="" selected="selected" >---请选择系统---</option>
-                          <option v-for="(r, index) in sysList" :key="index" :value="r.id" :disabled="r.disabled">{{r.name}}</option>
-                        </select>
-                      </div>
-                      <div class="form-group col-sm-5">
-                        <select name="select2" class="form-control" v-validate="'required'" v-model="list.role_id" required >
-                          <option value="" selected="selected" >---请选择角色---</option>
-                          <option v-for="(r, index) in roleList" :key="index" :value="r.role_id">{{r.name}}</option>
-                        </select>
-                      </div>
-                      <div class="form-group del-btn" v-if="userInfo.lists.length > 1">
-                        <a class="btn m-b-xs btn-xs btn-danger" @click="del(index)"><i class="fa fa-minus"></i></a>
-                      </div>
-                    </form>
-                    <div class="">
-                      <div class="form-group form-heigit col-sm-5"><span v-show="errors.has('select1')" class="text-danger">必须选择系统！</span></div>
-                      <div class="form-group form-heigit col-sm-5"><span v-show="errors.has('select2')" class="text-danger">必须选择用户角色！</span></div>
-                    </div>
-                  </div>
-                  <div class="form-group" v-if="isAdd == 1">
-                    <label class="checkbox-inline">
-                      <input id="statuscheck" type="checkbox">是否启用
-                    </label>
-                  </div>
-                </form>
-              </div>
-            </div>
-          </div>
-          <div slot="footer">
-            <a class="btn btn-default" @click="onClose">取消</a>
-            <a class="btn btn-success" @click="submitUser">提交</a>
-          </div>
-        </bootstrap-modal>
-
-        <div class="table-responsive">
-
-          <table class="table table-striped m-b-none">
-            <thead>
-            <tr>
-              <th>用户名</th>
-              <th  class="visible-md-block  visible-lg-block">系统/角色</th>
-              <th class="border-no">联系电话</th>
-              <th class="visible-md-block  visible-lg-block border-no">邮箱</th>
-              <th>状态</th>
-              <th class="visible-md-block visible-lg-block border-no">创建时间</th>
-              <th>操作</th>
-            </tr>
-            </thead>
-
-            <tbody class="table-border">
-            <tr v-for="(item, index) in datalist.items" :key="index">
-              <td>{{item.user_name}}</td>
-              <td class="visible-md-block visible-lg-block over-text" :title="item.rolestr">{{item.rolestr}}</td>
-              <td >{{item.mobile}}</td>
-              <td class="visible-md-block visible-lg-block">{{item.email}}</td>
-              <td v-if="item.status==2" class="text-danger">{{item.status_label}}</td>
-              <td v-if="item.status==1" class="text-warning">{{item.status_label}}</td>
-              <td v-if="item.status==0" class="text-success">{{item.status_label}}</td>
-              <td class="visible-md-block  visible-lg-block">{{item.create_time}}</td>
-              <td>
-                <div class="form-inline">
-                  <div class="form-group">
-                    <button class="btn btn-xs btn-primary" @click="showModal(2,item)">编辑</button>
-                  </div>
-                  <div class="form-group">
-                    <button class="btn btn-xs btn-warning" @click="userChange(2,item.user_id)" v-if="item.status==0" >禁用</button>
-                    <button class="btn btn-xs btn-warning" @click="userChange(0,item.user_id)" v-if="item.status==2" >启用</button>
-                    <button class="btn btn-xs btn-warning" @click="userChange(11,item.user_id)" v-if="item.status==1" >解锁</button>
-                  </div>
-                  <div class="form-group">
-                    <button class="btn btn-xs btn-danger visible-md visible-lg" @click="userDel(item.user_id)">删除</button>
-                  </div>
-                </div>
-              </td>
-            </tr>
-            </tbody>
-
-          </table>
-          <div class="form-group form-inline paging visible-lg-block visible-md-block">
-            <div class="form-group">
-
-              <div class="list-number">
-                共 {{datalist.count}} 条记录 | 每页显示:
-                <select id="ddlps" v-model="paging.ps" @change="searchClick">
-                  <option v-for="psl in pageSizeList" :key="psl.id" :value="psl">{{psl}}</option>
-                </select>
-                条
-              </div>
-
-              <div class="list-page">
-                <pager class="visible-md visible-lg"
-                       :total-page="totalpage"
-                       :init-page="paging.pi"
-                       :showItems="5"
-                       @go-page="pageChange">
-                </pager>
-              </div>
-
-            </div>
-
-          </div>
-        </div>
-
-
-      </div>
-
-  </div>
-</template>
-<script>
-import pager from "vue-simple-pager";
-import PullTo from 'vue-pull-to'
-export default {
-  components: {
-    "bootstrap-modal": require("vue2-bootstrap-modal"),
-    pager: pager,
-    PullTo
-  },
-  data() {
-    return {
-      paging: { ps: 10, pi: 1, username: "", role_id: "" },
-      pageSizeList: [5, 10, 20, 50], //可选显示数据条数
-      datalist: { count: 0, items: [] },
-      userInfo: {
-        user_name: "",
-        user_id: -1,
-        lists: [],
-        mobile: null,
-        email: null,
-        status: 0,
-        is_add: 2,
-      },
-      totalpage: 0,
-      sysList: [],
-      roleList: [], //角色列表
-      selectSys: [],
-      isAdd: 1,
-    };
-  },
-  created(){
-
-  },
-  mounted() {
-    this.querySys();
-    this.queryData();
-  },
-  methods: {
-    loadmore: function(loaded) {
-      return new Promise(function(resolve, reject) {
-        setTimeout(function() {
-          loaded("done");
-        }, 1000);
-      });
-    },
-    queryData: function() {
-      if (this.paging.pi == 0) {
-        this.paging.pi = 1;
-      }
-      this.$post("/sso/user", this.paging)
-        .then(res => {
-          this.datalist.items = res.list;
-          this.datalist.count = new Number(res.count);
-          this.totalpage = Math.ceil(this.datalist.count / this.paging.ps);
-        })
-        .catch(err => {
-          if (err.response.status == 403) {
-            this.$router.push("/login");
-          }else{
-            this.$notify({
-              title: '错误',
-              message: '网络错误,请稍后再试',
-              type: 'error',
-              offset: 50,
-              duration:2000,
-            });
-          }
-        });
-    },
-    pageChange: function(data) {
-      this.paging.pi = data.page;
-      this.queryData();
-    },
-
-    searchClick: function() {
-      this.paging.pi = 1;
-      this.queryData();
-    },
-    next(){
-      let pi = this.paging.pi
-      this.paging.pi = pi + 1;
-      this.$post("/sso/user", this.paging)
-        .then(res => {
-          if(res.list.length <= 0) {
-            this.paging.pi = pi
-            return false
-          }
-          this.datalist.items = this.datalist.items.concat(res.list);
-          this.datalist.count = new Number(res.count);
-          this.totalpage = Math.ceil(this.datalist.count / this.paging.ps);
-        })
-        .catch(err => {
-          if (err.response.status == 403) {
-            this.$router.push("/login");
-          }else{
-            this.$notify({
-              title: '错误',
-              message: '网络错误,请稍后再试',
-              type: 'error',
-              offset: 50,
-              duration:2000,
-            });
-          }
-        });
-    },
-    stateChange(e){
-      console.log(e)
-    },
-    showModal: function(i, j) {
-      if (j.status == 1) {
-          this.$notify({
-            title: '警告',
-            message: '请先进行解锁操作',
-            type: 'warning',
-            offset: 50,
-            duration:2000
-          });
-        return false;
-      }
-      if (i == 1) {
-        // 添加用户
-        this.isAdd = 1;
-        this.userInfo.user_name = "";
-        this.userInfo.role_id = "";
-        this.userInfo.mobile = null;
-        this.userInfo.status = 0;
-        this.userInfo.user_id = -1;
-        this.userInfo.is_add = 1;
-        this.userInfo.lists = [{ sys_id: "", role_id: "" }];
-        this.userInfo.email = "";
-        this.selectSys.push("");
-      } else {
-        // 编辑用户
-        this.isAdd = 2;
-        this.userInfo.user_name = j.user_name;
-        this.userInfo.role_id = j.role_id;
-        this.userInfo.mobile = j.mobile;
-        this.userInfo.status = j.status;
-        this.userInfo.user_id = j.user_id;
-        this.userInfo.lists = j.roles;
-        this.userInfo.is_add = 2;
-        this.userInfo.email = j.email;
-        for (var s = 0; s < j.roles.length; s++) {
-          this.selectSys.push(j.roles[s].sys_id);
-        }
-        this.setSys();
-      }
-      this.$refs.editModal.open();
-    },
-    userChange: function(ests, userid) {
-      var r = confirm("确认执行该操作吗？");
-      if (r == true) {
-        var user = { status: ests, user_id: userid };
-        this.$put("/sso/user", user)
-          .then(res => {
-            this.queryData();
-            this.$notify({
-              title: '成功',
-              message: '修改状态成功',
-              type: 'success',
-              offset: 50,
-              duration: 2000
-            });
-          })
-          .catch(err => {
-            if (err.response.status == 403) {
-              this.$notify({
-                title: '错误',
-                message: '登录超时,请重新登录',
-                type: 'error',
-                offset: 50,
-                duration:2000,
-                onClose: () => {
-                  this.$router.push("/login");
-                }
-              });
-            }else{
-              this.$notify({
-                title: '错误',
-                message: '网络错误,请稍后再试',
-                type: 'error',
-                offset: 50,
-                duration:2000,
-              });
-            }
-          });
-      } else {
-        return false;
-      }
-    },
-    userDel: function(userid) {
-      var r = confirm("警告！确认删除该用户吗？");
-      if (!r) {
-        return false;
-      }
-      var user = { user_id: userid };
-      this.$post("/sso/user/delete", user)
-        .then(res => {
-          this.queryData();
-          this.$notify({
-            title: '成功',
-            message: '成功删除用户',
-            type: 'success',
-            offset: 50,
-            duration:2000
-          });
-        })
-        .catch(err => {
-          if (err.response.status == 403) {
-            this.$notify({
-              title: '错误',
-              message: '登录超时,请重新登录',
-              type: 'error',
-              offset: 50,
-              duration:2000,
-              onClose:() => {
-                this.$router.push("/login");
-              }
-            });
-          }else{
-            this.$notify({
-              title: '错误',
-              message: '网络错误,请稍后再试',
-              type: 'error',
-              offset: 50,
-              duration:2000,
-            });
-          }
-        });
-    },
-    add() {
-      this.userInfo.lists.push({
-        sys_id: "",
-        role_id: ""
-      });
-      this.selectSys.push("");
-    },
-    del(index) {
-      for (var s = 0; s < this.sysList.length; s++) {
-        if (this.sysList[s].id == this.userInfo.lists[index].sys_id) {
-          this.sysList[s].disabled = false;
-        }
-      }
-      this.userInfo.lists.splice(index, 1);
-      this.selectSys.splice(index, 1);
-    },
-    onClose() {
-      this.$refs.editModal.close();
-    },
-    resetSys() {
-      this.selectSys = [];
-      for (var s = 0; s < this.sysList.length; s++) {
-        this.sysList[s].disabled = false;
-      }
-    },
-    setSys() {
-      for (var s = 0; s < this.sysList.length; s++) {
-        for (var i = 0; i < this.selectSys.length; i++) {
-          if (this.sysList[s].id == this.selectSys[i]) {
-            this.sysList[s].disabled = true;
-          }
-        }
-      }
-    },
-    sysStatus(id, idx) {
-      if (this.selectSys[idx] != "") {
-        for (var s = 0; s < this.sysList.length; s++) {
-          if (this.sysList[s].id == this.selectSys[idx]) {
-            this.sysList[s].disabled = false;
-          }
-        }
-      }
-      this.selectSys[idx] = id;
-      for (var s = 0; s < this.sysList.length; s++) {
-        if (this.sysList[s].id == id) {
-          this.sysList[s].disabled = true;
-        }
-      }
-    },
-    submitUser() {
-      if (this.userInfo.lists.length < 1) {
-        this.$notify({
-          title: '警告',
-          message: '至少需要添加一个系统角色！',
-          type: 'warning',
-          offset: 50
-        });
-        return false;
-      }
-      var s = "";
-      for (var i = 0; i < this.userInfo.lists.length; i++) {
-        s =
-          s +
-          this.userInfo.lists[i].sys_id +
-          "," +
-          this.userInfo.lists[i].role_id +
-          "|";
-      }
-      this.userInfo.auth = s;
-      this.$validator.validate().then(result => {
-        if (!result) {
-          return false;
-        } else {
-          if (this.isAdd == 1) {
-            // 添加用户
-            this.userInfo.is_add = 1;
-            var x = document.getElementById("statuscheck").checked;
-            if (x) {
-              this.userInfo.status = 0;
-            } else {
-              this.userInfo.status = 2;
-            }
-            this.$post("/sso/user/save", this.userInfo)
-              .then(res => {
-                this.queryData();
-                  this.$notify({
-                    title: '成功',
-                    message: '添加成功',
-                    type: 'success',
-                    offset: 50,
-                    duration:2000
-                  });
-              })
-              .catch(err => {
-                if (err.response.status == 403) {
-                  this.$notify({
-                    title: '错误',
-                    message: '登录超时,请重新登录',
-                    type: 'error',
-                    offset: 50,
-                    duration:2000,
-                    onClose: () => {
-                      this.$router.push("/login");
-                    }
-                  });
-                }else{
-                  this.$notify({
-                    title: '错误',
-                    message: '网络错误,请稍后再试',
-                    type: 'error',
-                    offset: 50,
-                    duration:2000,
-                  });
-                }
-              });
-          }else if (this.isAdd == 2){
-            this.$post("/sso/user/edit", this.userInfo)
-              .then(res => {
-                this.queryData();
-                  this.$notify({
-                    title: '成功',
-                    message: '编辑成功',
-                    type: 'success',
-                    offset: 50,
-                    duration:2000
-                  });
-
-              })
-              .catch(err => {
-                if (err.response.status == 403) {
-                  this.$notify({
-                    title: '错误',
-                    message: '登录超时,请重新登录',
-                    type: 'error',
-                    offset: 50,
-                    duration:2000,
-                    onClose: () => {
-                      this.$router.push("/login");
-                    }
-                  });
-                }else{
-                  this.$notify({
-                    title: '错误',
-                    message: '网络错误,请稍后再试',
-                    type: 'error',
-                    offset: 50,
-                    duration:2000,
-                  });
-                }
-              });
-          }
-
-          this.onClose();
-        }
-      });
-    },
-    querySys() {
-      this.$fetch("/sso/base", {})
-        .then(res => {
-          this.roleList = res.rolelist;
-        })
-        .catch(err => {
-        });
-
-      this.$post("/sso/base", {})
-        .then(res => {
-          this.sysList = res.list;
-          for (s in this.sysList) {
-            s.disabled = false;
-          }
-        })
-        .catch(err => {
-        });
-
-
-    }
-  }
-};
-</script>
-
-<style scoped>
-  .list-number{display: inline-block;padding: 15px 0 3px 15px;}
-  .list-page{display: inline-block;position: absolute;right: 15px;margin-top: -43px;}
-</style>
-
diff --git a/mgrserver/src/router/index.js b/mgrserver/src/router/index.js
index e0395f3..4bd7034 100644
--- a/mgrserver/src/router/index.js
+++ b/mgrserver/src/router/index.js
@@ -3,14 +3,14 @@ import Router from 'vue-router';
 import menu from '@/pages/member/menu';
 import login from '@/pages/member/login';
 import check from '@/pages/member/check';
-import sysindex from '@/pages/system/sys.index.vue'
+import sysindex from '@/pages/system/sys.index.new.vue'
 import sysfunc from '@/pages/system/func.index.vue'
-import userindex from '@/pages/user/index.vue'
+import userindex from '@/pages/user/index.new.vue'
 // import userindex from '@/pages/user/index';
 import changepassword from '@/pages/user/change.pwd';
 import changeInfo from '@/pages/user/change.info';
 import userBind from '@/pages/user/user.bind';
-import roleindex from '@/pages/role/index';
+import roleindex from '@/pages/role/index.new';
 import roleauth from '@/pages/role/auth';
 import notifyRecords from '@/pages/notify/notify.records.vue';
 import notifySettings from '@/pages/notify/notify.settings.vue';
